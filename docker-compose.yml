services:
  warest:
    container_name: warest
    image: triyatna/warest-whatsapp-rest-api:latest
    build:
      context: .
      dockerfile: Dockerfile
      args:
        NODE_VERSION: ${NODE_VERSION:-22-bookworm-slim}
    restart: always
    env_file:
      - .env.docker
    ports:
      - "7308:7308"
    volumes:
      - warest_data:/app/data
    healthcheck:
      test: ["CMD", "curl", "-fsS", "http://127.0.0.1:7308/api/v1/server/ping"]
      interval: 30s
      timeout: 5s
      retries: 5
      start_period: 20s
volumes:
  warest_data:
