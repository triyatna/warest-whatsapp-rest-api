<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <meta
      name="description"
      content="WARest UI Manage - multi-session WhatsApp REST API console"
    />
    <title>WARest UI Manage</title>

    <link rel="icon" href="/media/favicon.png" />

    <style>
      .op-50 {
        opacity: 0.5;
      }
      .ml-auto {
        margin-left: auto;
      }
      .mb-8 {
        margin-bottom: 8px;
      }
      .gap-8 {
        gap: 8px;
      }
      .align-center {
        align-items: center;
      }
      .text-12 {
        font-size: 12px;
      }
      .text-danger {
        color: #b91c1c;
      }

      :root {
        --bg: #070b16;
        --bg2: #0a0f1f;
        --glass: rgba(13, 19, 39, 0.6);
        --glass-strong: rgba(13, 19, 39, 0.75);
        --border: rgba(255, 255, 255, 0.06);
        --text: #e5edf7;
        --muted: #97a7c6;
        --primary: #60a5fa;
        --accent: #34d399;
        --danger: #ef4444;
        --warn: #eab308;
        --ok: #22c55e;
        --shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
        --radius: 18px;
        --mx: 50%;
        --my: 0%;
        --space-1: 6px;
        --space-2: 10px;
        --space-3: 14px;
        --space-4: 18px;
        --space-5: 24px;
        --ring: 0 0 0 4px rgba(59, 130, 246, 0.18);
        --ring-border: rgba(59, 130, 246, 0.5);
      }
      * {
        box-sizing: border-box;
      }
      ::selection {
        background: rgba(96, 165, 250, 0.25);
      }

      html,
      body {
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        margin: 0;
        color: var(--text);
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto,
          Arial, "Apple Color Emoji", "Segoe UI Emoji";

        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 800'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.04'/%3E%3C/svg%3E"),
          radial-gradient(
            ellipse 40% 60% at 5% 5%,
            hsla(210, 80%, 50%, 0.15),
            transparent
          ),
          radial-gradient(
            ellipse 35% 55% at 95% 10%,
            hsla(160, 70%, 50%, 0.15),
            transparent
          ),
          radial-gradient(
            ellipse 50% 70% at 50% 100%,
            hsla(250, 80%, 60%, 0.12),
            transparent
          ),
          linear-gradient(170deg, var(--bg) 0%, var(--bg2) 100%);
        overflow-x: hidden;
        scroll-behavior: smooth;
        font-size: clamp(14px, 1.4vw, 16px);
        line-height: 1.5;
      }
      main {
        flex: 1;
        margin-top: 54px;
      }
      .container {
        position: relative;
        z-index: 1;
        max-width: 1160px;
        margin: 0 auto;
        padding: 24px 18px calc(90px + env(safe-area-inset-bottom));
      }

      .rowing {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: var(--space-4);
      }

      .column {
        display: flex;
        flex-direction: column;
        gap: var(--space-3);
      }
      .login-column {
        justify-self: center;
        width: 100%;
        max-width: 420px;
        margin: 0 auto;
      }

      @media (max-width: 768px) {
        .rowing {
          grid-template-columns: 1fr;
        }
      }

      @media (min-width: 768px) {
        .container {
          padding: 28px 24px calc(90px + env(safe-area-inset-bottom));
        }
      }

      .site-header {
        position: fixed;
        top: 10px;
        left: 50%;
        transform: translateX(-50%);
        width: min(96%, 1160px);
        z-index: 100;
        border-radius: 14px;
        background: linear-gradient(180deg, #0e1730, #0c152d);
        border: 1px solid var(--border);
        transition: background 0.3s ease, box-shadow 0.3s ease,
          transform 0.3s ease;
      }
      .site-header::before,
      .site-header::after {
        content: none;
      }
      .site-header.scrolled {
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.32);
        background: linear-gradient(180deg, #0f1934, #0c162f);
      }
      .header-inner {
        max-width: 1160px;
        margin: 0 auto;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 16px;
        padding: 14px 24px;
        padding-top: calc(14px + env(safe-area-inset-top));
        padding-left: max(24px, env(safe-area-inset-left));
        padding-right: max(24px, env(safe-area-inset-right));
        will-change: transform, background;
      }
      .header-title {
        margin: 0;
        display: flex;
        align-items: center;
        gap: 12px;
        font-size: clamp(18px, 2.5vw, 22px);
        font-weight: 700;
        letter-spacing: 0.2px;
        color: var(--text);
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
      }
      .header-subtitle {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 13px;
        color: var(--muted);
        white-space: nowrap;
        opacity: 0.95;
      }
      .header-subtitle span {
        opacity: 0;
        transform: translateY(4px);
        animation: headerSubFade 0.5s ease-out forwards;
      }
      .header-subtitle span:nth-child(1) {
        animation-delay: 0.12s;
      }
      .header-subtitle span:nth-child(2) {
        animation-delay: 0.2s;
      }
      .header-subtitle span:nth-child(3) {
        animation-delay: 0.28s;
      }
      .header-subtitle span:nth-child(4) {
        animation-delay: 0.36s;
      }
      .header-subtitle span:nth-child(5) {
        animation-delay: 0.44s;
      }
      @media (max-width: 768px) {
        .site-header {
          width: calc(100% - 24px);
        }
        .header-subtitle {
          display: none;
        }
        .header-inner {
          padding-left: 18px;
          padding-right: 18px;
        }
      }

      h1 {
        margin: 0;
        letter-spacing: 0.2px;
        line-height: 1.2;
        font-size: clamp(20px, 3vw, 26px);
      }
      .muted {
        color: var(--muted);
      }

      .statusdot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        display: inline-block;
        margin-left: 8px;
        border: 1px solid #1f2937;
      }
      .status-online {
        background: #16a34a;
        box-shadow: 0 0 0 0 rgba(22, 163, 74, 0.6);
        animation: pulse 1.8s infinite;
      }
      .status-offline {
        background: #ef4444;
      }
      .status-reconn {
        background: #eab308;
      }
      @keyframes pulse {
        0% {
          box-shadow: 0 0 0 0 rgba(22, 163, 74, 0.55);
        }
        70% {
          box-shadow: 0 0 0 10px rgba(22, 163, 74, 0);
        }
        100% {
          box-shadow: 0 0 0 0 rgba(22, 163, 74, 0);
        }
      }

      .section-title {
        margin: 12px 0 6px;
        font-weight: 800;
        letter-spacing: 0.2px;
        opacity: 0.95;
        font-size: clamp(17px, 2.2vw, 20px);
      }
      .row {
        display: flex;
        align-items: center;
        gap: var(--space-2);
        flex-wrap: wrap;
      }
      .col {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }
      .flex-1 {
        flex: 1 1 0%;
      }
      .flex-2 {
        flex: 2 1 0%;
      }
      .justify-end {
        justify-content: flex-end;
      }
      .mt-6 {
        margin-top: 6px;
      }
      .mt-8 {
        margin-top: 8px;
      }
      .mt-12 {
        margin-top: 12px;
      }
      .mt-16 {
        margin-top: 16px;
      }
      .mb-6 {
        margin-bottom: 6px;
      }
      .mb-8 {
        margin-bottom: 8px;
      }
      .mb-12 {
        margin-bottom: 12px;
      }
      .ml-2 {
        margin-left: 8px;
      }
      .ml-4 {
        margin-left: 16px;
      }
      .mr-2 {
        margin-right: 8px;
      }
      .mr-4 {
        margin-right: 16px;
      }
      .hidden {
        display: none !important;
      }

      body.modal-open {
        overflow: hidden;
      }

      .backdrop {
        position: fixed;
        inset: 0;
        pointer-events: none;
        z-index: 0;
      }
      #netbg {
        position: absolute;
        inset: 0;
        width: 100%;
        height: 100%;
        display: block;
      }

      .grid-lines {
        position: absolute;
        inset: -10%;
        background-image: linear-gradient(
            to right,
            rgba(99, 102, 241, 0.07) 1px,
            transparent 1px
          ),
          linear-gradient(
            to bottom,
            rgba(99, 102, 241, 0.07) 1px,
            transparent 1px
          );
        background-size: 40px 40px;
        -webkit-mask-image: radial-gradient(
          1200px 600px at var(--mx) var(--my),
          #000 30%,
          rgba(0, 0, 0, 0.2) 60%,
          transparent 75%
        );
        mask-image: radial-gradient(
          1200px 600px at var(--mx) var(--my),
          #000 30%,
          rgba(0, 0, 0, 0.2) 60%,
          transparent 75%
        );
        animation: drift 24s linear infinite;
        will-change: transform;
        transform: translateZ(0);
        contain: paint;
      }
      @keyframes drift {
        0% {
          transform: translate3d(0, 0, 0);
        }
        50% {
          transform: translate3d(-20px, -20px, 0);
        }
        100% {
          transform: translate3d(0, 0, 0);
        }
      }
      .cursor-glow {
        position: absolute;
        inset: 0%;
        background: radial-gradient(
            600px 420px at var(--mx) var(--my),
            rgba(255, 255, 255, 0.24),
            rgba(255, 255, 255, 0.08) 45%,
            transparent 75%
          ),
          radial-gradient(
            340px 240px at calc(var(--mx) + 60px) calc(var(--my) + 30px),
            rgba(255, 255, 255, 0.13),
            transparent 70%
          );
        filter: blur(10px);
        mix-blend-mode: screen;
        opacity: 0.75;
        transition: opacity 0.2s ease;
        will-change: opacity, transform;
        contain: paint;
      }
      .backdrop::after {
        content: "";
        position: absolute;
        inset: -10%;
        background: linear-gradient(
          180deg,
          transparent,
          rgba(255, 255, 255, 0.06) 35%,
          transparent 70%
        );
        mix-blend-mode: screen;
        animation: scanY 12s ease-in-out infinite;
        opacity: 0.35;
      }
      @keyframes scanY {
        0%,
        100% {
          transform: translateY(-6%);
        }
        50% {
          transform: translateY(6%);
        }
      }

      .card {
        background: linear-gradient(
            180deg,
            rgba(255, 255, 255, 0.04),
            rgba(255, 255, 255, 0.02)
          ),
          var(--glass);
        -webkit-backdrop-filter: blur(10px) saturate(120%);
        backdrop-filter: blur(10px) saturate(120%);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        padding: 16px;
        margin-bottom: 16px;
        box-shadow: var(--shadow);
        transition: transform 0.2s ease, box-shadow 0.2s ease,
          border-color 0.2s ease;
      }
      .card:hover {
        transform: translateY(-1px);
        box-shadow: 0 14px 36px rgba(0, 0, 0, 0.33);
        border-color: rgba(59, 130, 246, 0.35);
      }
      .card.is-active {
        border-color: rgba(59, 130, 246, 0.5);
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.22), var(--shadow);
      }

      .grid {
        display: grid;
        grid-template-columns: repeat(12, 1fr);
        gap: 12px;
      }

      .msg-cards {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
        gap: 12px;
      }
      .msg-card {
        display: flex;
        flex-direction: column;
        gap: 8px;
        padding: 16px;
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.04),
          rgba(255, 255, 255, 0.02)
        );
        border: 1px solid var(--border);
        border-radius: 14px;
        cursor: pointer;
        transition: transform 0.15s, box-shadow 0.15s, border-color 0.15s;
        -webkit-user-select: none;
        user-select: none;
      }
      .msg-cards.is-disabled .msg-card {
        opacity: 0.35;
        pointer-events: none;
        cursor: not-allowed;
        filter: grayscale(0.35);
      }
      .msg-card:hover {
        transform: translateY(-2px);
        border-color: rgba(59, 130, 246, 0.45);
        box-shadow: 0 8px 22px rgba(0, 0, 0, 0.28);
      }
      .msg-card .title {
        font-weight: 800;
        letter-spacing: 0.2px;
      }
      .msg-card .desc {
        color: var(--muted);
        font-size: 13px;
      }
      .msg-guard-note {
        margin-top: 10px;
        font-size: 0.9rem;
        color: rgba(229, 237, 247, 0.7);
      }

      .modal-overlay {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.45);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 1200;
        padding: 16px;
      }
      #editOverlay.modal-overlay {
        z-index: 6000;
        background: rgba(0, 0, 0, 0.6);
      }
      .modal-overlay.show {
        display: flex;
      }
      .modal {
        width: min(920px, 96vw);
        max-height: 92vh;
        background: #0b1224;
        border: 1px solid #1f2937;
        border-radius: 14px;
        box-shadow: 0 20px 50px rgba(0, 0, 0, 0.35);
        display: grid;
        grid-template-rows: auto 1fr auto;
        overflow: hidden;
        opacity: 0;
        transform: translateY(6px) scale(0.985);
        transition: opacity 0.22s ease, transform 0.22s ease;
      }
      .modal-overlay.show .modal {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
      .modal-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
        padding: 12px 16px;
        border-bottom: 1px solid #1f2937;
        background: #0a0f1f;
      }
      .modal-header .modal-close {
        background: transparent;
        border: none;
        color: var(--text);
        font-size: 20px;
        width: 36px;
        height: 36px;
        display: grid;
        place-items: center;
        border-radius: 8px;
        cursor: pointer;
        -webkit-user-select: none;
        user-select: none;
      }
      .modal-header .modal-close:hover {
        background: rgba(255, 255, 255, 0.06);
      }
      .modal-title {
        font-weight: 800;
      }
      .modal-body {
        padding: 16px;
        overflow: auto;
        background: #0b1224;
      }
      .modal-footer {
        display: flex;
        gap: 8px;
        justify-content: flex-end;
        padding: 12px 16px;
        border-top: 1px solid #1f2937;
        background: #0a0f1f;
      }
      #msgModalOverlay .modal-footer {
        justify-content: space-between;
        align-items: center;
      }
      #msgModalOverlay .modal-footer .msg-delay {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        margin-right: 12px;
      }
      #msgModalOverlay .modal-footer .msg-delay input[type="number"] {
        width: 120px;
        min-width: 100px;
      }

      .modal.no-header .modal-header {
        display: none;
      }
      .modal.no-header {
        padding-top: 8px;
      }
      .modal.no-header .modal-close {
        background: transparent;
        border: none;
        color: var(--text);
        font-size: 20px;
        width: 36px;
        height: 36px;
        display: grid;
        place-items: center;
        border-radius: 8px;
        cursor: pointer;
        position: absolute;
        top: 8px;
        right: 8px;
      }
      .modal.no-header .modal-close:hover {
        background: rgba(255, 255, 255, 0.06);
      }

      .modal-body form {
        display: grid;
        gap: 10px;
      }
      .modal-body .form-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
      }
      @media (max-width: 720px) {
        .modal-body .form-grid {
          grid-template-columns: 1fr;
        }
      }
      .modal-body .full {
        grid-column: 1 / -1;
      }
      .modal-body label {
        font-size: 13px;
        font-weight: 600;
        color: var(--muted);
        letter-spacing: 0.2px;
      }
      .modal-body .field {
        display: grid;
        gap: 6px;
      }

      .modal-body .chk-title {
        font-size: 14px;
        font-weight: 600;
        color: var(--text);
      }

      .form-row {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }
      .form-row > * {
        flex: 1 1 0%;
      }
      .inline-note {
        font-size: 12px;
        color: var(--muted);
      }

      .segctrl {
        display: inline-flex;
        border: 1px solid var(--border);
        border-radius: 10px;
        overflow: hidden;
        background: rgba(255, 255, 255, 0.02);
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.02);
      }
      .segctrl button {
        border: 0;
        background: transparent;
        padding: 8px 12px;
        color: var(--text);
        cursor: pointer;
        transition: background 0.15s ease, color 0.15s ease;
      }
      .segctrl button.active {
        background: rgba(59, 130, 246, 0.18);
        box-shadow: inset 0 0 0 1px rgba(59, 130, 246, 0.35);
      }
      .segctrl button:hover {
        background: rgba(255, 255, 255, 0.06);
      }

      .checkbox-wrapper-8 .tgl {
        display: none;
      }
      .checkbox-wrapper-8 .tgl,
      .checkbox-wrapper-8 .tgl:after,
      .checkbox-wrapper-8 .tgl:before,
      .checkbox-wrapper-8 .tgl *,
      .checkbox-wrapper-8 .tgl *:after,
      .checkbox-wrapper-8 .tgl *:before,
      .checkbox-wrapper-8 .tgl + .tgl-btn {
        box-sizing: border-box;
      }
      .checkbox-wrapper-8 .tgl + .tgl-btn {
        outline: 0;
        display: block;
        width: 4em;
        height: 2em;
        position: relative;
        cursor: pointer;
        -webkit-user-select: none;
        user-select: none;
        border-radius: 999px;
      }
      .checkbox-wrapper-8 .tgl + .tgl-btn:after,
      .checkbox-wrapper-8 .tgl + .tgl-btn:before {
        position: relative;
        display: block;
        content: "";
        width: 50%;
        height: 100%;
      }
      .checkbox-wrapper-8 .tgl + .tgl-btn:after {
        left: 0;
      }
      .checkbox-wrapper-8 .tgl + .tgl-btn:before {
        display: none;
      }
      .checkbox-wrapper-8 .tgl:checked + .tgl-btn:after {
        left: 50%;
      }
      .checkbox-wrapper-8 .tgl-skewed + .tgl-btn {
        overflow: hidden;
        transform: skew(-10deg);
        backface-visibility: hidden;
        transition: all 0.2s ease;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto,
          Arial;
        background: #64748b;
        color: #fff;
        border-radius: 999px;
      }
      .checkbox-wrapper-8 .tgl-skewed + .tgl-btn:after,
      .checkbox-wrapper-8 .tgl-skewed + .tgl-btn:before {
        transform: skew(10deg);
        display: inline-block;
        transition: all 0.2s ease;
        width: 100%;
        text-align: center;
        position: absolute;
        line-height: 2em;
        font-weight: 700;
        text-shadow: 0 1px 0 rgba(0, 0, 0, 0.4);
      }
      .checkbox-wrapper-8 .tgl-skewed + .tgl-btn:after {
        left: 100%;
        content: attr(data-tg-on);
      }
      .checkbox-wrapper-8 .tgl-skewed + .tgl-btn:before {
        left: 0;
        content: attr(data-tg-off);
      }
      .checkbox-wrapper-8 .tgl-skewed + .tgl-btn:active {
        background: #64748b;
      }
      .checkbox-wrapper-8 .tgl-skewed + .tgl-btn:active:before {
        left: -10%;
      }
      .checkbox-wrapper-8 .tgl-skewed:checked + .tgl-btn {
        background: #22c55e;
      }
      .checkbox-wrapper-8 .tgl-skewed:checked + .tgl-btn:before {
        left: -100%;
      }
      .checkbox-wrapper-8 .tgl-skewed:checked + .tgl-btn:after {
        left: 0;
      }
      .checkbox-wrapper-8 .tgl-skewed:checked + .tgl-btn:active:after {
        left: 10%;
      }
      .toggle-field {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 14px;
        padding: 12px 14px;
        border-radius: 14px;
        border: 1px solid rgba(255, 255, 255, 0.06);
        background: rgba(10, 15, 31, 0.6);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
        transition: border-color 0.2s ease, background 0.2s ease,
          box-shadow 0.2s ease, transform 0.2s ease;
      }
      .toggle-field:hover {
        border-color: rgba(96, 165, 250, 0.35);
        background: rgba(12, 20, 40, 0.78);
        box-shadow: 0 12px 32px rgba(0, 0, 0, 0.3);
        transform: translateY(-1px);
      }
      .toggle-field .checkbox-wrapper-8 {
        flex-shrink: 0;
      }
      @media (max-width: 520px) {
        .toggle-field {
          flex-direction: column;
          align-items: flex-start;
          gap: 10px;
        }
      }

      .suggest-list {
        position: absolute;
        left: 0;
        right: 0;
        top: calc(100% + 6px);
        display: none;
        max-height: 260px;
        overflow: auto;
        border: 1px solid var(--border);
        border-radius: 10px;
        z-index: 5000;
        background: linear-gradient(
          180deg,
          rgba(6, 12, 24, 0.96),
          rgba(6, 12, 24, 0.88)
        );
        -webkit-backdrop-filter: blur(6px);
        backdrop-filter: blur(6px);
        box-shadow: 0 16px 35px rgba(0, 0, 0, 0.35);
      }
      .suggest-list.show {
        display: block;
      }
      .suggest-item {
        padding: 10px 12px;
        cursor: pointer;
      }
      .suggest-item:hover {
        background: rgba(255, 255, 255, 0.06);
      }

      .map-wrap {
        height: 360px;
        border-radius: 12px;
        overflow: hidden;
        border: 1px solid var(--border);
      }
      #leafletMap {
        height: 100%;
        width: 100%;
      }

      .cards-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 12px;
      }
      .two-col {
        display: grid;
        grid-template-columns: 1.15fr 0.85fr;
        gap: 14px;
      }
      @media (max-width: 980px) {
        .two-col {
          grid-template-columns: 1fr;
        }
      }
      @media (max-width: 640px) {
        .row {
          flex-direction: column;
          align-items: stretch;
        }
        .row > * {
          width: 100% !important;
          flex-grow: 1;
        }
        .justify-end {
          justify-content: flex-start;
        }
        .container {
          padding-left: 16px;
          padding-right: 16px;
        }
      }

      #sessions {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
        gap: 12px;
      }
      @media (max-width: 640px) {
        #sessions {
          grid-template-columns: 1fr;
        }
      }

      .pill {
        padding: 4px 8px;
        border-radius: 999px;
        background: #1f2937;
      }
      .badge {
        display: inline-block;
        padding: 8px;
        border-radius: 99px;
        background: #1f2937;
        margin-left: 8px;
      }
      .ok {
        color: var(--ok);
      }
      .warn {
        color: var(--warn);
      }
      .err {
        color: var(--danger);
      }

      input,
      select,
      textarea {
        padding: 11px 12px;
        border-radius: 12px;
        border: 1px solid rgba(255, 255, 255, 0.08);
        background: var(--glass-strong);
        color: var(--text);
        outline: none;
        min-width: 0;
        transition: border-color 0.15s, box-shadow 0.15s, background 0.15s,
          transform 0.15s;
        min-height: 42px;
        font-size: 14.5px;
      }
      input::placeholder,
      textarea::placeholder {
        color: #8aa0be99;
      }
      input:focus,
      select:focus,
      textarea:focus {
        border-color: var(--ring-border);
        box-shadow: var(--ring);
        background: rgba(12, 19, 39, 0.9);
      }
      textarea {
        min-height: 108px;
        resize: vertical;
      }

      button {
        padding: 10px 14px;
        border-radius: 12px;
        border: 1px solid var(--border);
        background: linear-gradient(180deg, #0e1730, #0c152d);
        color: var(--text);
        cursor: pointer;
        font-weight: 700;
        transition: transform 0.15s, box-shadow 0.15s, background 0.15s,
          opacity 0.15s, border-color 0.15s;
        min-height: 42px;
        font-size: 14.5px;
        -webkit-user-select: none;
        user-select: none;
      }
      .btn-sm {
        padding: 6px 10px;
        min-height: 34px;
        font-size: 13px;
        border-radius: 10px;
      }
      button:hover {
        transform: translateY(-1px);
        box-shadow: 0 8px 22px rgba(0, 0, 0, 0.28);
        border-color: rgba(59, 130, 246, 0.45);
      }
      button:focus-visible {
        outline: none;
        box-shadow: var(--ring);
        border-color: var(--ring-border);
      }
      button:disabled {
        opacity: 0.6;
        cursor: not-allowed;
      }

      .btn-primary {
        background: linear-gradient(90deg, #2563eb, #3b82f6);
        border-color: #1e40af;
      }
      .btn-accent {
        background: linear-gradient(90deg, #059669, #10b981);
        border-color: #047857;
      }
      .btn-danger {
        background: linear-gradient(90deg, #dc2626, #ef4444);
        border-color: #b91c1c;
      }
      .btn-ghost {
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.02),
          rgba(255, 255, 255, 0.04)
        );
        border-color: var(--border);
      }
      .btn-ghost:hover {
        border-color: rgba(96, 165, 250, 0.35);
      }
      .btn-secondary {
        background: linear-gradient(90deg, #334155, #475569);
        border-color: #1f2937;
      }
      .btn-secondary:hover {
        border-color: rgba(96, 165, 250, 0.35);
      }
      .btn-toggle.active {
        box-shadow: 0 0 0 2px rgba(52, 211, 153, 0.35) inset,
          0 10px 24px rgba(0, 0, 0, 0.25);
        border-color: rgba(52, 211, 153, 0.55);
        background: linear-gradient(180deg, #0f2f2c, #0b2623);
      }

      .tabs {
        display: flex;
        gap: 8px;
        margin-bottom: 12px;
        flex-wrap: wrap;
      }
      .tab {
        padding: 8px 12px;
        border-radius: 999px;
        background: rgba(12, 21, 44, 0.8);
        border: 1px solid var(--border);
        cursor: pointer;
        transition: 0.15s;
        -webkit-user-select: none;
        user-select: none;
      }
      .tab:hover {
        background: #132243;
        border-color: #2f4373;
      }
      .tab.active {
        background: linear-gradient(90deg, #1d2f56, #253d77);
        border-color: #2f4373;
      }
      .tab[aria-selected="true"] {
        box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.25) inset;
      }
      .tab-pane {
        transition: opacity 0.25s ease, transform 0.25s ease;
      }
      .tab-pane.hidden {
        display: block !important;
        opacity: 0;
        transform: translateY(8px);
        pointer-events: none;
        height: 0;
        overflow: hidden;
        padding: 0;
        margin: 0;
      }

      .section-split {
        display: flex;
        flex-direction: column;
        gap: 20px;
        margin-bottom: 12px;
      }

      .session-grid {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 18px;
        align-items: stretch;
      }
      .session-card {
        padding: 24px;
        border-radius: 22px;
        border: 1px solid rgba(255, 255, 255, 0.08);
        background: linear-gradient(
          160deg,
          rgba(24, 33, 62, 0.9),
          rgba(12, 18, 34, 0.85)
        );
        box-shadow: 0 20px 45px rgba(3, 6, 15, 0.55);
        height: 100%;
        display: flex;
        flex-direction: column;
      }
      .session-card-head {
        display: flex;
        justify-content: space-between;
        gap: 16px;
        margin-bottom: 16px;
        align-items: center;
      }
      .card-head-left {
        display: flex;
        align-items: center;
        gap: 12px;
      }
      .card-step {
        width: 42px;
        height: 42px;
        border-radius: 14px;
        border: 1px solid rgba(255, 255, 255, 0.2);
        display: grid;
        place-items: center;
        font-weight: 600;
        color: #9cc9ff;
        background: rgba(35, 56, 104, 0.6);
        font-size: 0.85rem;
      }
      .session-card-title {
        font-size: 1.25rem;
        font-weight: 600;
        color: #f2f5ff;
        margin-bottom: 2px;
      }
      .session-card-desc {
        font-size: 0.9rem;
        color: rgba(233, 238, 255, 0.75);
        margin: 0;
      }
      .session-card-body {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 12px;
      }
      .session-label {
        font-size: 0.8rem;
        text-transform: uppercase;
        letter-spacing: 0.12em;
        color: rgba(226, 229, 243, 0.7);
        margin-bottom: 6px;
        display: block;
      }
      .session-input-row {
        display: flex;
        gap: 12px;
        align-items: center;
        flex-wrap: wrap;
      }
      .session-input-row input,
      .session-input-row select {
        border-radius: 15px;
        border: 1px solid rgba(255, 255, 255, 0.08);

        flex: 1 1 240px;
        min-width: 220px;
        min-height: 48px;
        background: rgba(255, 255, 255, 0.05);
        color: #f3f6ff;
        padding: 0 16px;
        font-size: 1rem;
        box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05);
      }
      .session-input-row select {
        color: #f6f7ff;
        background: rgba(255, 255, 255, 0.05);
      }
      .session-input-row select option {
        color: #0a0f1f;
        background: #f5f6fa;
      }
      .session-card-desc + .session-label {
        margin-top: 10px;
      }
      .session-meta-list {
        list-style: none;
        padding: 0;
        margin: 6px 0 0;
        color: rgba(226, 232, 255, 0.75);
        font-size: 0.85rem;
      }
      .session-meta-list li + li {
        margin-top: 4px;
      }
      .session-input-row button {
        min-height: 48px;
        border-radius: 15px;
        padding-inline: 18px;
        flex: 0 0 auto;
        min-width: 150px;
      }
      @media (max-width: 640px) {
        .session-input-row {
          flex-direction: column;
          align-items: stretch;
        }
        .session-input-row button {
          width: 100%;
          min-width: 0;
        }
        .session-grid {
          grid-template-columns: 1fr;
        }
        .session-input-row input,
        .session-input-row select {
          width: 100%;
          flex: 1 1 auto;
          max-width: 100%;
          box-sizing: border-box;
        }
      }

      .eyebrow {
        font-size: 0.72rem;
        text-transform: uppercase;
        letter-spacing: 0.2em;
        color: rgba(232, 236, 251, 0.6);
        margin: 0 0 6px;
      }
      .text-brand {
        color: #75c8ff;
      }

      .subcard {
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.03),
          rgba(255, 255, 255, 0.02)
        );
        border: 1px solid var(--border);
        border-radius: calc(var(--radius) - 6px);
        padding: 14px;
      }
      .subcard + .subcard {
        margin-top: 12px;
      }
      .subcard-head {
        display: flex;
        align-items: baseline;
        justify-content: space-between;
        gap: 10px;
        margin-bottom: 10px;
      }
      .subcard-title {
        font-weight: 800;
        letter-spacing: 0.2px;
      }
      .hint {
        font-size: 12px;
        color: var(--muted);
        opacity: 0.9;
      }

      .mm-item {
        padding: 12px 14px;
      }
      .mm-item .form-row {
        display: grid;
        grid-template-columns: 100px 1fr auto auto;
        align-items: center;
        gap: 10px;
      }
      .mm-item .form-row .hint {
        color: var(--muted);
        font-size: 12px;
        white-space: nowrap;
      }
      .mm-item .form-row .segctrl {
        justify-self: start;
      }
      .mm-item .form-row .mm-remove {
        justify-self: end;
      }
      .mm-item .form-row .mm-caption,
      .mm-item .form-row .mm-file,
      .mm-item .form-row .mm-url {
        grid-column: 2 / 5;
      }
      .mm-item .mm-upload-area .mm-file {
        grid-column: 2 / 5;
      }
      .mm-item .mm-url-area .mm-url {
        grid-column: 2 / 5;
      }
      @media (max-width: 720px) {
        .mm-item .form-row {
          grid-template-columns: 1fr;
        }
        .mm-item .form-row .segctrl,
        .mm-item .form-row .mm-remove {
          justify-self: start;
        }
        .mm-item .form-row .mm-caption,
        .mm-item .form-row .mm-file,
        .mm-item .form-row .mm-url {
          grid-column: 1;
        }
      }

      .qr {
        background: #fff;
        padding: 18px;
        border-radius: 20px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 18px 40px rgba(0, 0, 0, 0.45);
      }
      .qr-refresh-overlay {
        position: absolute;
        inset: 0;
        border-radius: 18px;
        background: radial-gradient(
            circle at 20% 20%,
            rgba(96, 165, 250, 0.18),
            rgba(96, 165, 250, 0) 55%
          ),
          radial-gradient(
            circle at 80% 15%,
            rgba(52, 211, 153, 0.16),
            rgba(52, 211, 153, 0) 50%
          ),
          rgba(8, 12, 24, 0.82);
        border: 1px solid rgba(255, 255, 255, 0.12);
        color: #eaf3ff;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 12px;
        padding: 18px;
        text-align: center;
        letter-spacing: 0.1px;
        box-shadow: 0 18px 40px rgba(0, 0, 0, 0.38);
        -webkit-backdrop-filter: blur(8px) saturate(115%);
        backdrop-filter: blur(8px) saturate(115%);
        opacity: 0;
        transform: translateY(6px) scale(0.985);
        pointer-events: none;
        transition: opacity 0.25s ease, transform 0.25s ease;
        z-index: 2;
      }
      .qr-refresh-overlay.is-visible {
        opacity: 1;
        transform: translateY(0) scale(1);
        pointer-events: auto;
      }
      .qr-refresh-cta {
        margin: 0;
        display: inline-flex;
        align-items: center;
        gap: 10px;
        background: rgba(255, 255, 255, 0.08);
        color: #eaf3ff;
        border: 1px solid rgba(120, 195, 255, 0.38);
        border-radius: 14px;
        padding: 11px 16px;
        font-weight: 800;
        letter-spacing: 0.15px;
        cursor: pointer;
        box-shadow: 0 10px 28px rgba(0, 0, 0, 0.28),
          0 0 0 1px rgba(255, 255, 255, 0.04) inset;
        transition: transform 0.16s ease, background 0.16s ease,
          border-color 0.16s ease, box-shadow 0.16s ease, color 0.16s ease;
      }
      .qr-refresh-cta:hover,
      .qr-refresh-cta:focus-visible {
        background: rgba(96, 165, 250, 0.22);
        border-color: rgba(96, 165, 250, 0.6);
        box-shadow: 0 14px 32px rgba(0, 0, 0, 0.35),
          0 0 0 1px rgba(255, 255, 255, 0.12) inset;
        transform: translateY(-1px) scale(1.01);
        color: #f6fbff;
      }
      .qr-refresh-icon {
        width: 18px;
        height: 18px;
        border-radius: 6px;
        border: 1.5px solid rgba(255, 255, 255, 0.55);
        background: rgba(11, 21, 43, 0.25);
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-size: 0.9rem;
        font-weight: 900;
        color: currentColor;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.25);
      }
      .qr-refresh-label {
        font-size: 0.95rem;
        letter-spacing: 0.15px;
      }
      .qr-refresh-overlay .spark {
        width: 12px;
        height: 12px;
        border-radius: 999px;
        background: radial-gradient(
          circle,
          rgba(255, 255, 255, 0.95) 0%,
          rgba(96, 165, 250, 0.4) 60%,
          rgba(96, 165, 250, 0.1) 100%
        );
        box-shadow: 0 0 0 10px rgba(96, 165, 250, 0.05),
          0 0 0 18px rgba(52, 211, 153, 0.04);
        animation: qrSpark 1.4s ease-in-out infinite;
      }
      @keyframes qrSpark {
        0% {
          transform: scale(0.9);
          opacity: 0.7;
        }
        50% {
          transform: scale(1.15);
          opacity: 1;
        }
        100% {
          transform: scale(0.9);
          opacity: 0.75;
        }
      }
      .paircode-area {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        gap: 12px;
        min-height: 260px;
      }
      .paircode-card {
        width: 260px;
        height: 260px;
        position: relative;
        overflow: hidden;
        display: flex;
        align-items: stretch;
        padding: 18px 16px;
        border-radius: 16px;
        background: linear-gradient(180deg, #0e1730, #0c152d);
        border: 1px solid rgba(255, 255, 255, 0.08);
        box-shadow: 0 10px 28px rgba(0, 0, 0, 0.35);
      }
      .paircode-card-content {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        align-items: center;
        gap: 16px;
        width: 100%;
        transition: opacity 0.2s ease, filter 0.2s ease;
      }
      .paircode-card.is-empty .paircode-card-content {
        filter: blur(4px);
        opacity: 0.3;
      }
      .paircode-label {
        font-size: 13px;
        color: var(--muted);
        opacity: 0.95;
      }
      .paircode-digits {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        letter-spacing: 2px;
        font-size: 20px;
        font-weight: 800;
        font-variant-numeric: tabular-nums;
        color: #e5edf7;
        padding: 10px 12px;
        border-radius: 10px;
        background: rgba(255, 255, 255, 0.04);
        border: 1px dashed rgba(255, 255, 255, 0.12);
        width: 90%;
      }
      .paircode-refresh {
        position: absolute;
        inset: 0;
        margin: 0;
        border-radius: inherit;
        border: 1px dashed rgba(117, 200, 255, 0.45);
        background: rgba(12, 21, 45, 0.78);
        color: #d4ebff;
        font-weight: 600;
        font-size: 0.95rem;
        padding: 24px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 10px;
        cursor: pointer;
        -webkit-backdrop-filter: blur(6px);
        backdrop-filter: blur(6px);
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.2s ease, transform 0.2s ease;
      }
      .paircode-refresh .icon-refresh {
        font-size: 1.4rem;
      }
      .paircode-refresh:hover,
      .paircode-refresh:focus-visible {
        transform: scale(1.02);
      }
      .paircode-refresh.is-busy {
        opacity: 0.9;
        cursor: wait;
      }
      .paircode-refresh.is-busy .icon-refresh {
        animation: refresh-spin 0.9s linear infinite;
      }
      .paircode-card.is-empty .paircode-refresh {
        opacity: 1;
        pointer-events: auto;
      }
      .paircode-status {
        margin-top: 12px;
        color: var(--muted);
        font-size: 12px;
      }
      .paircode-error {
        margin-top: 12px;
        padding: 12px;
        border-radius: 10px;
        border: 1px solid rgba(255, 107, 129, 0.35);
        background: rgba(255, 107, 129, 0.08);
        color: #ff8a9a;
        text-align: left;
      }
      .paircode-error-hint {
        margin-top: 6px;
        color: rgba(255, 255, 255, 0.75);
      }
      #qrArea[data-mode="pair"] .qr,
      #qrArea[data-mode="pair"] .qr-placeholder,
      #qrArea[data-mode="pair"] #qrMeta {
        display: none !important;
      }
      #qrArea[data-mode="qr"] #pairCodeArea,
      #qrArea[data-mode="qr"] .pair-input-row {
        display: none !important;
      }
      #qrArea[data-mode="pair"] .pair-input-row {
        display: flex;
      }

      .code {
        font-family: ui-monospace, Menlo, Consolas, monospace;
        font-size: 12px;
        background: #0c1426;
        border: 1px dashed #203052;
        border-radius: 10px;
        padding: 6px 8px;
        color: #cbd5e1;
      }

      #sessionInfo.kv {
        border-radius: 12px;
        padding: 16px 24px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        display: flex;
        flex-direction: column;
        gap: 4px;
      }
      .kv-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 6px 2px;
        flex-wrap: wrap;
      }
      .kv-key {
        font-size: 0.9rem;
        color: #f8f8f8;
        margin-right: 16px;
        flex-shrink: 0;
      }
      .kv-key.muted {
        color: #b3b3b3;
      }
      .kv-val {
        font-size: 0.95rem;
        font-weight: 600;
        color: #f0f0f0;
        text-align: right;
        display: flex;
        align-items: center;
        justify-content: flex-end;
        word-break: break-all;
        min-width: 50%;
      }
      .kv-val .pill {
        display: inline-block;
        padding: 4px 10px;
        font-size: 0.75rem;
        font-weight: 700;
        line-height: 1;
        color: #433f3f;
        background-color: #8fc1f4;
        border-radius: 20px;
        margin-left: 8px;
        text-transform: capitalize;
      }
      .kv-val .time {
        font-size: 0.75rem;
        color: #999;
        margin-left: 8px;
        white-space: nowrap;
        font-weight: 400;
      }
      @media (min-width: 768px) {
        #sessionInfo.kv {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 8px 24px;
          padding: 20px 28px;
        }
        .kv-row {
          border-bottom: none;
          padding: 8px 0;
        }
        .session-grid {
          display: grid;
          grid-template-columns: repeat(2, minmax(0, 1fr));
          gap: 18px;
          align-items: stretch;
        }
        .session-grid .session-card-head {
          min-height: 96px;
          align-items: flex-start;
        }
      }

      .qr-wrap {
        padding: 0;
        border: none;
        background: transparent;
      }
      .qr-area {
        min-height: 360px;
        position: relative;
        padding: 0;
      }
      .qr-shell {
        display: flex;
        gap: 24px;
        align-items: stretch;
        background: linear-gradient(
          160deg,
          rgba(18, 26, 52, 0.92),
          rgba(8, 12, 24, 0.9)
        );
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: 26px;
        padding: 22px;
        box-shadow: 0 22px 45px rgba(0, 0, 0, 0.5);
      }
      @media (max-width: 1024px) {
        .qr-shell {
          flex-direction: column;
          padding: 20px;
        }
      }
      @media (max-width: 640px) {
        .qr-shell {
          padding: 16px;
          gap: 18px;
        }
        .qr-info,
        .qr-panel {
          padding: 16px;
          border-radius: 18px;
        }
      }
      .qr-info {
        flex: 0 0 42%;
        background: rgba(6, 10, 22, 0.86);
        border-radius: 20px;
        border: 1px solid rgba(255, 255, 255, 0.06);
        padding: 20px;
        display: flex;
        flex-direction: column;
        gap: 14px;
      }
      .qr-info h4 {
        margin: 0;
        font-size: 1.5rem;
        color: #f5f7ff;
      }
      .qr-steps {
        margin: 0;
        padding-left: 20px;
        color: #d7def7;
        line-height: 1.6;
      }
      .qr-steps li + li {
        margin-top: 6px;
      }
      .qr-alt-login {
        margin-top: 4px;
        padding: 14px 16px;
        border-radius: 18px;
        border: 1px dashed rgba(120, 173, 255, 0.4);
        background: rgba(80, 120, 190, 0.12);
      }
      .qr-alt-title {
        font-weight: 600;
        margin-bottom: 4px;
        color: #f4f7ff;
      }
      .pair-input-row {
        display: none;
        gap: 12px;
        margin-top: 6px;
      }
      .pair-input-row input {
        flex: 1;
        min-height: 46px;
        border-radius: 14px;
        border: 1px solid rgba(255, 255, 255, 0.08);
        background: rgba(255, 255, 255, 0.05);
        color: #f1f5ff;
        padding: 0 14px;
      }
      .pair-input-row button {
        min-height: 46px;
        border-radius: 14px;
        padding-inline: 18px;
        white-space: nowrap;
      }
      .qr-panel {
        flex: 1;
        background: rgba(6, 9, 20, 0.9);
        border-radius: 22px;
        border: 1px solid rgba(255, 255, 255, 0.08);
        padding: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      .qr-link-alt {
        margin-top: 18px;
        text-align: center;
      }
      .phone-link-btn {
        border: none;
        background: rgba(255, 255, 255, 0.08);
        color: #cfe5ff;
        font-weight: 600;
        padding: 10px 18px;
        border-radius: 999px;
        cursor: pointer;
        transition: background 0.2s ease, transform 0.2s ease;
      }
      .phone-link-btn:hover,
      .phone-link-btn:focus-visible {
        background: rgba(117, 200, 255, 0.3);
        transform: translateY(-1px);
      }
      .phone-link-btn--ghost {
        background: transparent;
        border: 1px solid rgba(255, 255, 255, 0.2);
        color: #f4f6ff;
        margin-top: 10px;
      }
      .phone-link-hint {
        margin-top: 6px;
        color: rgba(219, 228, 255, 0.65);
        font-size: 0.85rem;
      }
      .qr-visual {
        width: 100%;
        text-align: center;
      }
      .qr-area.empty .qr {
        display: none;
      }
      .qr-area.empty .qr-placeholder {
        display: block;
      }
      .qr-placeholder {
        display: none;
        margin-top: 12px;
        text-align: center;
      }
      .cards-grid .card {
        padding: 12px;
      }
      .cards-grid .card .pill {
        background: rgba(31, 41, 55, 0.85);
      }

      .session-manager-head {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        flex-wrap: wrap;
        margin-bottom: 14px;
      }
      .session-manager-head .toolbar {
        display: flex;
        gap: 10px;
        align-items: center;
        flex-wrap: wrap;
      }
      #btnRefresh {
        position: relative;
        padding-inline: 46px 20px;
        min-height: 48px;
        border-radius: 16px;
        letter-spacing: 0.04em;
        font-weight: 600;
      }
      #btnRefresh::before {
        content: "⟳";
        position: absolute;
        left: 16px;
        top: 50%;
        transform: translateY(-50%);
        font-size: 18px;
        font-weight: 600;
        color: rgba(255, 255, 255, 0.8);
        animation: refresh-spin 0.9s linear infinite;
        animation-play-state: paused;
        opacity: 0.55;
      }
      #btnRefresh.is-busy::before {
        animation-play-state: running;
        opacity: 1;
      }
      @keyframes refresh-spin {
        from {
          transform: translateY(-50%) rotate(0deg);
        }
        to {
          transform: translateY(-50%) rotate(360deg);
        }
      }
      .session-grid {
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      }
      .session-card {
        position: relative;
        overflow: hidden;
      }
      .session-card::after {
        content: "";
        position: absolute;
        inset: 0;
        border-radius: inherit;
        pointer-events: none;
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.08),
          rgba(255, 255, 255, 0)
        );
        opacity: 0;
        transition: opacity 0.2s ease;
      }
      .session-card:hover::after {
        opacity: 1;
      }
      .session-card-body .muted {
        color: rgba(214, 224, 255, 0.7);
      }
      .session-input-row {
        align-items: center;
      }
      .session-input-row .execute-btn {
        min-width: 140px;
      }
      .muted-note {
        color: rgba(226, 232, 255, 0.65);
        font-size: 0.85rem;
        margin-top: 6px;
      }
      .link-device {
        border-radius: 28px;
        border: 1px solid rgba(255, 255, 255, 0.08);
        padding: 28px;
        box-shadow: 0 28px 60px rgba(0, 0, 0, 0.55);
        transition: opacity 0.25s ease, filter 0.25s ease;
      }
      .link-device.link-device--inactive {
        opacity: 0.65;
        filter: grayscale(0.2);
      }
      .link-device.link-device--inactive .login-panel,
      .link-device.link-device--inactive .login-switch,
      .link-device.link-device--inactive .login-view {
        pointer-events: none;
      }
      .link-device.link-device--hidden {
        display: none;
      }
      @media (max-width: 640px) {
        .link-device {
          padding: 18px;
          border-radius: 22px;
        }
      }
      .link-columns {
        display: flex;
        flex-wrap: wrap;
        align-items: stretch;
        gap: 26px;
      }
      .link-columns > .login-panel,
      .link-columns > .link-steps {
        flex: 1 1 320px;
        min-width: 0;
      }
      .login-panel {
        order: 1;
      }
      .link-steps {
        order: 2;
      }
      @media (min-width: 900px) {
        .link-columns {
          flex-wrap: nowrap;
        }
        .link-steps {
          order: 1;
        }
        .login-panel {
          order: 2;
        }
      }
      @media (max-width: 640px) {
        .link-columns {
          flex-direction: column;
        }
        .link-steps,
        .login-panel {
          width: 100%;
        }
      }
      .link-steps {
        border-radius: 22px;
        border: 1px solid rgba(255, 255, 255, 0.05);
        background: rgba(6, 10, 24, 0.9);
        padding: 22px 24px 56px 24px;
        display: flex;
        flex-direction: column;
        gap: 16px;
        min-width: 0;
      }
      .link-steps .steps-header {
        font-size: 0.85rem;
        letter-spacing: 0.18em;
        text-transform: uppercase;
        color: rgba(148, 203, 255, 0.8);
      }
      .link-steps .steps-block-title {
        font-size: 1.2rem;
        font-weight: 700;
        color: #f4f7ff;
      }
      .steps-block {
        display: none;
      }
      .link-steps[data-mode="qr"] .steps-block--qr {
        display: block;
      }
      .link-steps[data-mode="phone"] .steps-block--phone,
      .link-steps[data-mode="pair"] .steps-block--phone {
        display: block;
      }
      .step-list {
        list-style: none;
        padding: 0;
        margin: 0;
        display: flex;
        flex-direction: column;
        gap: 14px;
        counter-reset: step;
      }
      .step-list li {
        position: relative;
        padding-left: 44px;
        color: #d6e0ff;
        font-size: 0.98rem;
        counter-increment: step;
        line-height: 1.45;
      }
      .step-list li::before {
        content: counter(step);
        width: 30px;
        height: 30px;
        border-radius: 999px;
        border: 2px solid rgba(117, 200, 255, 0.7);
        background: #0a1328;
        color: #9cd9ff;
        font-weight: 700;
        display: grid;
        place-items: center;
        position: absolute;
        left: 0;
        top: 0;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.35);
      }
      .step-list li::after {
        content: "";
        position: absolute;
        left: 14px;
        top: 32px;
        width: 2px;
        height: calc(100% - 32px);
        background: linear-gradient(
          180deg,
          rgba(117, 200, 255, 0.3),
          transparent
        );
      }
      .step-list li:last-child::after {
        display: none;
      }
      .login-panel {
        border-radius: 22px;
        border: 1px solid rgba(255, 255, 255, 0.06);
        background: rgba(5, 8, 20, 0.95);
        padding: 24px;
        display: flex;
        flex-direction: column;
        gap: 20px;
        position: relative;
      }
      .login-view {
        display: none;
        flex-direction: column;
        gap: 16px;
        align-items: center;
      }
      .login-view--phone,
      .login-view--pair {
        align-items: stretch;
      }
      #qrArea[data-mode="qr"] .login-view--qr {
        display: flex;
      }
      #qrArea[data-mode="phone"] .login-view--phone {
        display: flex;
      }
      #qrArea[data-mode="pair"] .login-view--pair {
        display: flex;
      }
      .phone-number-field {
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
        width: 100%;
      }
      .phone-number-field select,
      .phone-number-field input {
        height: 52px;
        border-radius: 16px;
        border: 1px solid rgba(255, 255, 255, 0.12);
        background: rgba(255, 255, 255, 0.05);
        color: #f7fbff;
        font-size: 1rem;
      }
      .phone-number-field select {
        min-width: 130px;
        padding-inline: 12px;
      }
      .phone-number-field select option {
        color: #0f172a;
      }
      .phone-number-field input {
        flex: 1;
        min-width: 180px;
        padding-inline: 16px;
      }
      @media (max-width: 480px) {
        .phone-number-field {
          flex-direction: column;
          align-items: stretch;
        }

        .phone-number-field select,
        .phone-number-field input {
          min-width: 0;
          width: 100%;
        }
      }
      .login-switch,
      .phone-link-hint {
        text-align: center;
        color: rgba(207, 229, 255, 0.75);
        font-size: 0.9rem;
      }
      .link-btn {
        border: none;
        background: none;
        color: #7fc8ff;
        font-weight: 600;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 0;
        font-size: 0.95rem;
        transition: color 0.2s ease;
      }
      .link-btn .arrow {
        font-size: 1.1rem;
        opacity: 0.8;
        transition: transform 0.2s ease;
      }
      .link-btn:hover,
      .link-btn:focus-visible {
        text-decoration: underline;
        color: #aee4ff;
      }
      .link-btn:hover .arrow,
      .link-btn:focus-visible .arrow {
        transform: translateX(3px);
      }
      .link-btn.link-btn--inline {
        font-size: 0.9rem;
      }
      #qrArea .paircode-area {
        align-items: stretch;
        gap: 18px;
        text-align: left;
      }
      #qrArea .paircode-card {
        width: 100%;
        height: auto;
        grid-template-rows: auto 1fr;
        padding: 18px 20px;
      }
      #qrArea .paircode-digits {
        font-size: 32px;
        width: 100%;
      }
      .paircode-header {
        display: flex;
        flex-direction: column;
        gap: 6px;
      }
      .paircode-target {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        align-items: center;
        color: #d4e3ff;
        font-size: 0.92rem;
      }
      .paircode-target button {
        border: none;
        background: none;
        color: #7fc8ff;
        font-weight: 600;
        cursor: pointer;
        padding: 0;
      }
      .paircode-actions {
        text-align: center;
      }
      .qr-meta {
        font-size: 0.85rem;
        color: rgba(214, 228, 255, 0.75);
      }
      .active-session-card {
        border-radius: 24px;
        border: 1px solid rgba(255, 255, 255, 0.06);
        background: linear-gradient(
          145deg,
          rgba(9, 12, 26, 0.95),
          rgba(20, 28, 58, 0.9)
        );
        padding: 26px;
        display: flex;
        flex-direction: column;
        gap: 20px;
        box-shadow: 0 24px 60px rgba(0, 0, 0, 0.5);
      }
      .active-session-header {
        display: flex;
        gap: 18px;
        align-items: center;
        flex-wrap: wrap;
      }
      .active-session-actions {
        display: flex;
        gap: 12px;
        align-items: center;
        margin-left: auto;
      }
      .session-avatar {
        width: 78px;
        height: 78px;
        border-radius: 26px;
        overflow: hidden;
        border: 1px solid rgba(255, 255, 255, 0.08);
        background: rgba(255, 255, 255, 0.04);
        flex-shrink: 0;
      }
      .session-avatar img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
      }
      .active-summary {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }
      .active-summary .name {
        font-size: 1.4rem;
        font-weight: 700;
        color: #f4f7ff;
      }
      .active-session-id {
        display: flex;
        align-items: center;
        gap: 10px;
        flex-wrap: wrap;
        color: rgba(199, 209, 247, 0.85);
        font-size: 0.95rem;
      }
      .active-session-meta {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 16px;
      }
      .active-meta-card {
        border-radius: 18px;
        border: 1px solid rgba(255, 255, 255, 0.06);
        background: rgba(9, 13, 30, 0.85);
        padding: 12px 16px;
      }
      .active-meta-card .label {
        text-transform: uppercase;
        letter-spacing: 0.08em;
        font-size: 0.72rem;
        color: rgba(213, 220, 248, 0.7);
        margin-bottom: 6px;
      }
      .active-meta-card .value {
        font-size: 1rem;
        font-weight: 600;
        color: #f1f5ff;
        word-break: break-word;
      }
      .sessions-board {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        gap: 16px;
      }
      .session-tile {
        border-radius: 20px;
        border: 1px solid rgba(255, 255, 255, 0.06);
        background: rgba(10, 15, 30, 0.9);
        padding: 18px;
        display: flex;
        flex-direction: column;
        gap: 12px;
        box-shadow: 0 16px 40px rgba(0, 0, 0, 0.45);
      }
      .session-tile.is-active {
        border-color: rgba(52, 211, 153, 0.75);
        box-shadow: 0 20px 45px rgba(52, 211, 153, 0.2);
      }
      .session-tile .session-title {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
        font-weight: 700;
        color: #f4f7ff;
      }
      .session-status-pill {
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 0.75rem;
        text-transform: capitalize;
        border: 1px solid rgba(148, 163, 184, 0.35);
        background: rgba(148, 163, 184, 0.15);
        color: #cbd5f5;
        transition: background 0.2s ease, border-color 0.2s ease,
          color 0.2s ease;
      }
      .session-status-pill.status-open {
        background: rgba(34, 197, 94, 0.18);
        border-color: rgba(34, 197, 94, 0.6);
        color: #bbf7d0;
      }
      .session-status-pill.status-connection {
        background: rgba(234, 179, 8, 0.18);
        border-color: rgba(234, 179, 8, 0.6);
        color: #fef9c3;
      }
      .session-status-pill.status-error {
        background: rgba(248, 113, 113, 0.18);
        border-color: rgba(248, 113, 113, 0.6);
        color: #fecaca;
      }
      .session-actions {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
      }
      .session-actions button {
        flex: 1 1 calc(50% - 8px);
        min-width: 120px;
      }
      .session-actions button:nth-child(3),
      .session-actions button:nth-child(4) {
        flex: 1 1 100%;
      }
      @media (max-width: 520px) {
        .session-actions button {
          flex: 1 1 100%;
        }
      }
      .btn-logout {
        background: linear-gradient(90deg, #9333ea, #a855f7);
        border-color: #7e22ce;
      }

      .toast {
        position: fixed;
        left: 50%;
        top: calc(20px + env(safe-area-inset-top));
        transform: translate(-50%, -16px);
        width: clamp(260px, 92vw, 560px);
        max-width: 92vw;
        text-align: center;
        background: linear-gradient(
          180deg,
          rgba(15, 23, 42, 0.96),
          rgba(2, 6, 23, 0.94)
        );
        color: #e5e7eb;
        border: 1px solid rgba(148, 163, 184, 0.35);
        padding: 12px 16px;
        border-radius: 14px;
        box-shadow: 0 16px 40px rgba(0, 0, 0, 0.45),
          0 0 0 1px rgba(148, 163, 184, 0.06) inset;
        -webkit-backdrop-filter: blur(8px) saturate(120%);
        backdrop-filter: blur(8px) saturate(120%);
        opacity: 0;
        transition: transform 0.22s ease, opacity 0.22s ease;
        z-index: 3000;
        pointer-events: none;
        line-height: 1.35;
      }
      .toast.show {
        opacity: 1;
        transform: translate(-50%, 0);
      }

      footer.site-footer {
        position: relative;
        bottom: 0;
        left: 0;
        right: 0;
        background-color: #30303052;
        border-top: 1px solid rgba(80, 80, 80, 0.441);
        -webkit-backdrop-filter: blur(10px) saturate(120%);
        backdrop-filter: blur(10px) saturate(120%);
        width: 100%;
      }
      .footer-inner {
        max-width: 1160px;
        margin: 0 auto;
        padding: 12px 18px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        color: var(--muted);
        font-size: 13px;
      }
      .footer-links {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }
      .footer-links a {
        color: var(--text);
        opacity: 0.85;
        text-decoration: none;
        border-bottom: 1px dashed transparent;
        transition: opacity 0.2s, border-color 0.2s;
      }
      .footer-links a:hover {
        opacity: 1;
        border-color: rgba(96, 165, 250, 0.5);
      }

      .login-card {
        width: min(94vw, 440px);
        border-radius: 16px;
        padding: 22px 20px;
        max-height: min(92vh, 720px);
        overflow: auto;
        position: relative;
        background: linear-gradient(
              180deg,
              rgba(255, 255, 255, 0.02),
              rgba(255, 255, 255, 0.01)
            )
            padding-box,
          radial-gradient(
              160% 140% at 0% 0%,
              rgba(59, 130, 246, 0.16),
              rgba(52, 211, 153, 0.1) 40%,
              rgba(7, 11, 22, 0) 70%
            )
            border-box;
        border: 1px solid transparent;
        box-shadow: 0 18px 45px rgba(0, 0, 0, 0.35);
        -webkit-backdrop-filter: saturate(140%) blur(6px);
        backdrop-filter: saturate(140%) blur(6px);
      }
      #editOverlay .login-card {
        width: min(94vw, 560px);
      }
      .login-card h2 {
        margin: 0 0 6px;
        font-size: 22px;
        letter-spacing: 0.2px;
      }
      .login-card .subtitle {
        margin: 0 0 14px;
        font-size: 13px;
        color: var(--muted);
      }
      .login-card .form-row {
        display: grid;
        gap: 8px;
        margin-top: 8px;
      }
      .login-card .form-row label {
        font-size: 13px;
        font-weight: 600;
        color: var(--muted);
        letter-spacing: 0.2px;
      }
      .login-card input,
      .login-card select,
      .login-card textarea {
        width: 100%;
        padding: 10px 12px;
        border-radius: 12px;
        border: 1px solid var(--border);
        background: rgba(10, 16, 32, 0.9);
        color: var(--text);
        min-height: 44px;
        transition: border-color 0.15s ease, box-shadow 0.15s ease,
          background 0.15s ease;
      }
      .login-card input::placeholder {
        color: rgba(229, 237, 247, 0.45);
      }
      .login-card input:focus-visible,
      .login-card select:focus-visible,
      .login-card textarea:focus-visible {
        outline: none;
        box-shadow: var(--ring);
        border-color: var(--ring-border);
        background: rgba(12, 18, 36, 0.96);
      }

      .input-with-icon {
        position: relative;
        width: 100%;
      }
      @keyframes headerGradientMove {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }
      @keyframes headerLineSweep {
        0% {
          transform: translateX(-25%);
          opacity: 0.4;
        }
        50% {
          transform: translateX(25%);
          opacity: 0.8;
        }
        100% {
          transform: translateX(-25%);
          opacity: 0.4;
        }
      }
      @keyframes headerSubFade {
        from {
          opacity: 0;
          transform: translateY(4px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .input-with-icon input {
        padding-right: 44px;
      }
      .input-with-icon button {
        position: absolute;
        right: 6px;
        top: 50%;
        transform: translateY(-50%);
        border-radius: 8px;
        border: none;
        background: transparent;
        color: var(--muted);
        cursor: pointer;
        display: grid;
        place-items: center;
        width: 36px;
        height: 36px;
        transition: color 0.15s ease;
      }
      .input-with-icon button:hover {
        color: var(--text);
        background: transparent;
      }
      .input-with-icon button:focus-visible {
        outline: none;
        box-shadow: none;
      }
      .icon-eye {
        width: 18px;
        height: 18px;
        display: block;
      }
      .modal-body .field input,
      .modal-body .field select,
      .modal-body .field textarea {
        width: 100%;
        padding: 10px 12px;
        border-radius: 12px;
        border: 1px solid var(--border);
        background: rgba(10, 16, 32, 0.9);
        color: var(--text);
        min-height: 44px;
        transition: border-color 0.15s ease, box-shadow 0.15s ease,
          background 0.15s ease;
      }
      .modal-body .field input:focus-visible,
      .modal-body .field select:focus-visible,
      .modal-body .field textarea:focus-visible {
        outline: none;
        box-shadow: var(--ring);
        border-color: var(--ring-border);
        background: rgba(12, 18, 36, 0.96);
      }
      .login-logo {
        height: 60px;
        object-fit: contain;
        display: block;
        margin: 0 auto 10px auto;
        filter: drop-shadow(0 4px 10px rgba(0, 0, 0, 0.4));
        border-radius: 12px;
      }
      .logo-header {
        height: 32px;
        object-fit: contain;
        vertical-align: middle;
        filter: drop-shadow(0 2px 6px rgba(0, 0, 0, 0.3));
        border-radius: 8px;
      }

      .login-actions {
        display: flex;
        gap: 8px;
        margin-top: 20px;
        justify-content: flex-end;
      }
      .btn-primary {
        cursor: pointer;
      }

      @media (max-width: 768px), (pointer: coarse) {
        .grid-lines {
          -webkit-mask-image: none;
          mask-image: none;
          animation: none;
          opacity: 0.35;
        }
        .cursor-glow,
        .backdrop::after {
          display: none;
        }
        .card,
        .login-overlay {
          -webkit-backdrop-filter: none;
          backdrop-filter: none;
          background: rgba(12, 18, 32, 0.9);
        }
        .login-card {
          width: min(96vw, 560px);
          max-height: 92vh;
        }
        html,
        body {
          background-color: #0a0f1f;
        }
        #netbg {
          opacity: 0.9;
        }
      }
      @media (max-width: 480px) {
        .login-card h2 {
          font-size: 16px;
        }
        .login-card {
          padding: 16px 14px;
        }
        .login-actions {
          gap: 6px;
        }
      }

      .sr-only {
        position: absolute !important;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
      }
      .error-text {
        color: #fca5a5;
        margin-top: 8px;
        display: none;
      }

      .fade-in {
        animation: fadein 0.35s ease-in-out;
      }
      @media (max-width: 767.98px) {
        .session-grid {
          grid-template-columns: 1fr;
        }
      }
      @keyframes fadein {
        from {
          opacity: 0;
          transform: translateY(6px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .btn-join[data-joined="1"] {
        filter: brightness(0.9);
      }

      @supports (overscroll-behavior-y: contain) {
        @media (max-width: 640px) {
          body,
          main {
            overscroll-behavior-y: contain;
          }
        }
      }
      @supports (scrollbar-gutter: stable both-edges) {
        .login-card {
          scrollbar-gutter: stable both-edges;
        }
      }
    </style>

    <script>
      (function () {
        try {
          var key = localStorage.getItem("wa.apiKey") || "";
          if (!key) {
            var next =
              (window.location.pathname || "/") +
              (window.location.search || "");
            var target = "/login?next=" + encodeURIComponent(next || "/");
            window.location.replace(target);
          }
        } catch {}
      })();
      (function () {
        try {
          var m = document.createElement("meta");
          m.setAttribute("name", "theme-color");
          m.setAttribute("content", "#0a0f1f");
          m.setAttribute("media", "(prefers-color-scheme: dark)");
          document.head.appendChild(m);
        } catch {}
      })();
    </script>
  </head>

  <body>
    <header class="site-header">
      <div class="header-inner">
        <h1 class="header-title">
          <img src="/media/warest-logo.png" class="logo-header" alt="WARest" />
          WARest UI Manage
          <span
            id="sockDot"
            class="statusdot status-offline"
            title="socket offline"
          ></span>
        </h1>
        <div class="header-subtitle" aria-hidden="true">
          <span>Multi-session</span>
          <span class="op-50">&bull;</span>
          <span>Rest API</span>
          <span class="op-50">&bull;</span>
          <span>Open Source</span>
        </div>
      </div>
    </header>

    <main>
      <div class="backdrop" aria-hidden="true">
        <canvas id="netbg"></canvas>
        <div class="grid-lines"></div>
        <div class="cursor-glow"></div>
      </div>

      <div class="container">
        <section class="card" aria-labelledby="connect-title">
          <div class="row">
            <h3 id="connect-title" class="section-title">
              WARest (v{WARestVersion})
            </h3>
            <input
              id="apiKey"
              type="password"
              hidden
              class="flex-1"
              placeholder="X-WAREST-API-KEY"
              autocomplete="off"
            />
            <input
              id="baseUrl"
              hidden
              class="flex-2"
              placeholder="Base URL (e.g. http://localhost:4000)"
              autocomplete="off"
            />
            <button id="btnLoad" class="btn-danger ml-auto" data-autofocus>
              Log Out
            </button>
          </div>
        </section>
        <section id="secSessions" class="card" aria-labelledby="session-title">
          <div class="session-manager-head">
            <div>
              <h3 id="session-title" class="section-title">
                Create / Manage Session
              </h3>
              <p class="muted-note">
                Create new runtimes or jump into an existing WhatsApp session
                seamlessly.
              </p>
            </div>
            <div class="toolbar">
              <button
                id="btnRefresh"
                class="btn-ghost"
                disabled
                title="Reload sessions"
              >
                Refresh
              </button>
            </div>
          </div>

          <div class="section-split">
            <div class="session-grid">
              <div class="session-card session-card--create">
                <div class="session-card-head">
                  <div>
                    <div class="session-card-title">
                      Create or start a session
                    </div>
                    <p class="session-card-desc">
                      Provision a unique session ID or resume a stopped runtime.
                    </p>
                  </div>
                </div>
                <div class="session-card-body">
                  <label for="sessId" class="session-label">Session ID</label>
                  <div class="session-input-row">
                    <input
                      id="sessId"
                      placeholder="e.g. sales-team"
                      autocomplete="off"
                    />
                    <button
                      id="btnCreate"
                      class="btn-accent execute-btn"
                      disabled
                    >
                      Execute
                    </button>
                  </div>
                  <p class="muted-note">
                    Use an unused ID to spin up a new device or reuse an
                    existing ID to bring the runtime back online.
                  </p>
                </div>
              </div>
              <div class="session-card session-card--active">
                <div class="session-card-head">
                  <div>
                    <div class="session-card-title">
                      Choose an active session
                    </div>
                    <p class="session-card-desc">
                      Selecting a session automatically loads its current state.
                    </p>
                  </div>
                </div>
                <div class="session-card-body">
                  <label for="sessionSelect" class="session-label"
                    >Active session</label
                  >
                  <div class="session-input-row">
                    <select
                      id="sessionSelect"
                      aria-label="Select active session"
                    >
                      <option value="">-- pilih session --</option>
                    </select>
                  </div>
                  <p class="muted-note">
                    The dashboard will refresh status, QR, and device insights
                    as soon as you switch.
                  </p>
                </div>
              </div>
            </div>

            <div
              id="qrWrap"
              class="link-device link-device--inactive"
              aria-disabled="true"
            >
              <div id="qrArea" data-mode="qr" aria-live="polite">
                <div class="rowing">
                  <div class="column">
                    <div class="link-steps" id="linkSteps" data-mode="qr">
                      <div class="steps-block steps-block--qr">
                        <p class="steps-header">Link a device</p>
                        <h4 class="steps-block-title">Steps for QR login</h4>
                        <ol class="step-list">
                          <li>Open WhatsApp on your phone.</li>
                          <li>
                            On Android tap <strong>Menu</strong>
                            <span aria-hidden="true">&#8942;</span> &rsaquo; on
                            iPhone tap <strong>Settings</strong>.
                          </li>
                          <li>
                            Choose <strong>Linked devices</strong> then tap
                            <strong>Link a device</strong>.
                          </li>
                          <li>Point your phone at the QR code to confirm.</li>
                        </ol>
                      </div>
                      <div class="steps-block steps-block--phone">
                        <p class="steps-header">Link a device</p>
                        <h4 class="steps-block-title">
                          Steps for phone number login
                        </h4>
                        <ol class="step-list">
                          <li>
                            Open WhatsApp &rsaquo; Linked devices &rsaquo;
                            <strong>Link a device</strong>.
                          </li>
                          <li>
                            Tap
                            <strong>Link with phone number instead</strong>.
                          </li>
                          <li>
                            Enter the code shown here to finish linking the
                            device.
                          </li>
                        </ol>
                      </div>
                    </div>
                  </div>
                  <div class="column login-column">
                    <div class="login-view login-view--qr">
                      <p class="eyebrow">Scan QR</p>
                      <div class="qr">
                        <img
                          id="qrImg"
                          alt="QR Code"
                          width="260"
                          height="260"
                        />
                      </div>
                      <div id="qrMeta" class="qr-meta"></div>
                      <div class="login-switch" id="qrLinkAlt">
                        <button id="btnShowPair" class="link-btn" type="button">
                          Log in with phone number
                          <span class="arrow" aria-hidden="true">&rsaquo;</span>
                        </button>
                        <p class="phone-link-hint">
                          Use this if your camera can’t scan the QR.
                        </p>
                      </div>
                      <div class="qr-placeholder muted">
                        No QR yet. Pick a session and click
                        <b>Join Live</b> to get live updates.
                      </div>
                    </div>

                    <div
                      class="login-view login-view--phone"
                      id="phoneLoginView"
                    >
                      <div>
                        <p class="eyebrow">Phone pairing</p>
                        <h4>Log in with phone number</h4>
                        <p class="muted-note">
                          Enter the WhatsApp number (including country code) you
                          want to link.
                        </p>
                      </div>
                      <div class="session-label">WhatsApp number</div>
                      <div class="phone-number-field">
                        <select
                          id="countryCodeSelect"
                          aria-label="Country code"
                        ></select>
                        <input
                          id="pairPhone"
                          type="tel"
                          inputmode="numeric"
                          pattern="[0-9]*"
                          placeholder="812xxxxxxx"
                          autocomplete="off"
                        />
                      </div>
                      <button id="btnPairCode" class="btn-primary execute-btn">
                        Next
                      </button>
                      <div class="login-switch">
                        <button
                          type="button"
                          class="link-btn"
                          id="linkPhoneToQr"
                        >
                          Log in with QR code
                          <span class="arrow" aria-hidden="true">&rsaquo;</span>
                        </button>
                      </div>
                    </div>

                    <div
                      id="pairCodeArea"
                      class="login-view login-view--pair paircode-area"
                      aria-live="polite"
                      aria-atomic="true"
                    >
                      <div class="paircode-header">
                        <p class="eyebrow">Enter code on phone</p>
                        <div class="paircode-target">
                          Linking WhatsApp account
                          <strong id="pairLinkedNumber">-</strong>
                          <button
                            type="button"
                            id="btnEditPhone"
                            class="link-btn link-btn--inline"
                          >
                            Edit phone
                          </button>
                        </div>
                        <div id="sessionInPairCode" class="muted"></div>
                      </div>
                      <div class="paircode-card" id="pairCodeCard">
                        <div class="paircode-card-content">
                          <div class="paircode-label">Pair code</div>
                          <div id="pairCodeVal" class="paircode-digits">
                            XXXX-XXXX
                          </div>
                          <div class="muted text-12">
                            Tap "Link with phone number instead" on your phone,
                            then enter this code.
                          </div>
                        </div>
                        <button
                          id="btnPairRefresh"
                          class="paircode-refresh"
                          type="button"
                          aria-hidden="true"
                          tabindex="-1"
                        >
                          <span class="icon-refresh" aria-hidden="true"
                            >&#8635;</span
                          >
                          <span id="pairCodeRefreshLabel"
                            >Refresh to show code</span
                          >
                        </button>
                      </div>
                      <div
                        id="pairCodeStatus"
                        class="paircode-status hidden"
                      ></div>
                      <div
                        id="pairCodeError"
                        class="paircode-error hidden"
                        role="alert"
                      >
                        <div id="pairCodeErrorText"></div>
                        <div class="paircode-error-hint text-12">
                          Disarankan pindah ke <b>Scan QR</b> sementara.
                        </div>
                      </div>
                      <div class="paircode-actions">
                        <button id="btnBackToQR" class="link-btn" type="button">
                          Log in with QR code
                          <span class="arrow" aria-hidden="true">&rsaquo;</span>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="active-session-card">
            <div class="active-session-header">
              <div class="session-avatar">
                <img
                  id="sessAvatarImg"
                  src="/media/warest-logo.png"
                  referrerpolicy="no-referrer"
                  alt="Profile"
                />
              </div>
              <div class="active-summary">
                <p class="eyebrow">Active session</p>
                <div class="name" id="sessNameVal">No session selected</div>
                <div class="active-session-id">
                  <span id="sessIdLabel">—</span>
                  <span class="session-status-pill" id="sessStatusPill">-</span>
                </div>
                <div class="phone muted" id="sessPhoneVal">Phone: -</div>
              </div>
              <div class="active-session-actions">
                <button
                  id="btnActiveLogout"
                  type="button"
                  class="btn-logout btn-secondary"
                  hidden
                >
                  Logout
                </button>
              </div>
            </div>
            <div class="active-session-meta" id="sessionInfo"></div>
          </div>

          <div class="subcard mt-12">
            <div class="subcard-head">
              <div class="subcard-title">All Sessions</div>
              <span class="hint">List of all available sessions</span>
            </div>
            <div id="sessions" class="sessions-board"></div>
          </div>
        </section>
        <section id="secMessaging" class="card" aria-labelledby="msg-title">
          <h3 id="msg-title" class="section-title">Messaging</h3>
          <div class="msg-cards" id="msgCards">
            <div
              class="msg-card"
              data-type="text"
              tabindex="0"
              role="button"
              aria-label="Send Text"
            >
              <div class="title">Send Text</div>
              <div class="desc">
                Send rich text with markdown, auto-mentions & link preview.
              </div>
            </div>
            <div
              class="msg-card"
              data-type="media-single"
              tabindex="0"
              role="button"
              aria-label="Send Media"
            >
              <div class="title">Send Media (Image/Video)</div>
              <div class="desc">
                Use URL or upload one file, supports caption & view-once.
              </div>
            </div>
            <div
              class="msg-card"
              data-type="audio"
              tabindex="0"
              role="button"
              aria-label="Send Audio"
            >
              <div class="title">Send Audio</div>
              <div class="desc">
                Send audio by URL or upload; can send as Voice Note (PTT).
              </div>
            </div>
            <div
              class="msg-card"
              data-type="document"
              tabindex="0"
              role="button"
              aria-label="Send Document"
            >
              <div class="title">Send Document</div>
              <div class="desc">
                Send any file by URL or upload; optional filename & caption.
              </div>
            </div>
            <div
              class="msg-card"
              data-type="sticker"
              tabindex="0"
              role="button"
              aria-label="Send Sticker"
            >
              <div class="title">Send Sticker</div>
              <div class="desc">
                Send image/webp; non-webp auto-converted to 512x512 webp.
              </div>
            </div>
            <div
              class="msg-card"
              data-type="contact"
              tabindex="0"
              role="button"
              aria-label="Send Contact"
            >
              <div class="title">Send Contact</div>
              <div class="desc">
                Send contact with name, phone, organization, and email.
              </div>
            </div>
            <div
              class="msg-card"
              data-type="location"
              tabindex="0"
              role="button"
              aria-label="Send Location"
            >
              <div class="title">Send Location</div>
              <div class="desc">
                Pick on map or search; auto-fills name, address, latitude,
                longitude.
              </div>
            </div>
            <div
              class="msg-card"
              data-type="poll"
              tabindex="0"
              role="button"
              aria-label="Send Poll"
            >
              <div class="title">Send Poll</div>
              <div class="desc">
                Create a poll with dynamic options and selection limit.
              </div>
            </div>
            <div
              class="msg-card"
              data-type="gif"
              tabindex="0"
              role="button"
              aria-label="Send GIF"
            >
              <div class="title">Send GIF</div>
              <div class="desc">
                Send GIF from URL or upload video with GIF playback.
              </div>
            </div>
            <div
              class="msg-card"
              data-type="button"
              tabindex="0"
              role="button"
              aria-label="Send Interactive Button"
            >
              <div class="title">Send Interactive Button</div>
              <div class="desc">
                Build a carousel card with header, text, footer, and buttons.
              </div>
            </div>
            <div
              class="msg-card"
              data-type="list"
              tabindex="0"
              role="button"
              aria-label="Send Interactive List"
            >
              <div class="title">Send Interactive List</div>
              <div class="desc">
                Create a list with sections and rows, with a call-to-action.
              </div>
            </div>
            <div
              class="msg-card"
              data-type="media-file"
              tabindex="0"
              role="button"
              aria-label="Send Multi Media"
            >
              <div class="title">Send Multi Media</div>
              <div class="desc">
                Send multiple files or URLs at once: images, video, audio,
                documents, GIF, stickers.
              </div>
            </div>
          </div>
          <p class="msg-guard-note hidden" id="msgLockNote" role="status">
            Messaging is available after a session is logged in.
          </p>
        </section>
      </div>
    </main>

    <footer class="site-footer" role="contentinfo">
      <div class="footer-inner">
        <div>Copyright © <span id="year"></span> WARest UI Manage</div>
        <nav class="footer-links" aria-label="Footer links">
          <a href="/docs" target="_blank" rel="noopener noreferrer">Docs API</a>
        </nav>
      </div>
    </footer>

    <div
      class="toast"
      role="status"
      aria-live="polite"
      aria-atomic="true"
    ></div>

    <script>
      (function () {
        "use strict";
        const root = document.documentElement;
        const coarse = window.matchMedia("(pointer: coarse)").matches;
        if (coarse) {
          root.style.setProperty("--mx", "50%");
          root.style.setProperty("--my", "20%");
          document.getElementById("year").textContent = String(
            new Date().getFullYear()
          );
          return;
        }
        let ticking = false,
          lastX = 0,
          lastY = 0;
        const set = (x, y) => {
          root.style.setProperty("--mx", x + "px");
          root.style.setProperty("--my", y + "px");
        };
        const update = () => {
          set(lastX, lastY);
          ticking = false;
        };
        const onMove = (x, y) => {
          lastX = x;
          lastY = y;
          if (!ticking) {
            requestAnimationFrame(update);
            ticking = true;
          }
        };
        document.addEventListener("mousemove", (e) =>
          onMove(e.clientX, e.clientY)
        );
        document.addEventListener("DOMContentLoaded", () => {
          document.getElementById("year").textContent = String(
            new Date().getFullYear()
          );
        });
      })();
    </script>

    <script>
      (function () {
        const header = document.querySelector(".site-header");
        if (!header) return;
        const apply = () => {
          if (window.scrollY > 4) header.classList.add("scrolled");
          else header.classList.remove("scrolled");
        };
        apply();
        window.addEventListener("scroll", apply, { passive: true });
      })();
    </script>
    <script>
      (function () {
        const KEY = "warest:scroll:main";
        try {
          if ("scrollRestoration" in history)
            history.scrollRestoration = "manual";
        } catch {}
        const store = (value) => {
          try {
            sessionStorage.setItem(KEY, String(Math.max(0, value)));
          } catch {}
        };
        document.addEventListener("DOMContentLoaded", () => {
          const saved = Number(sessionStorage.getItem(KEY) || "0");
          if (Number.isFinite(saved) && saved > 4) {
            window.scrollTo(0, saved);
          }
        });
        let ticking = false;
        const onScroll = () => {
          if (ticking) return;
          ticking = true;
          requestAnimationFrame(() => {
            ticking = false;
            store(window.scrollY || 0);
          });
        };
        window.addEventListener("scroll", onScroll, { passive: true });
        window.addEventListener("beforeunload", () =>
          store(window.scrollY || 0)
        );
      })();
    </script>

    <div id="editOverlay" class="modal-overlay" aria-modal="true" role="dialog">
      <div class="modal" role="document">
        <div class="modal-header">
          <div class="modal-title">Edit Session</div>
          <button id="editModalClose" class="modal-close" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form class="form-grid" id="editForm">
            <div class="field full">
              <label for="editSessionId">Session ID</label>
              <input id="editSessionId" type="text" readonly />
            </div>
            <div class="field">
              <label for="editWebhookUrl">Webhook URL</label>
              <input
                id="editWebhookUrl"
                type="text"
                placeholder="https://example.com/webhook"
              />
            </div>
            <div class="field">
              <label for="editWebhookSecret">Webhook Secret</label>
              <div class="input-with-icon">
                <input
                  id="editWebhookSecret"
                  type="password"
                  placeholder="secret"
                />
                <button
                  id="toggleEditSecret"
                  type="button"
                  aria-label="Show secret"
                  title="Show"
                >
                  <svg
                    class="icon-eye icon-eye-open hidden"
                    viewBox="0 0 24 24"
                    aria-hidden="true"
                  >
                    <path
                      fill="currentColor"
                      d="M12 5c5 0 9.27 3.11 11 7-1.73 3.89-6 7-11 7S2.73 15.89 1 12C2.73 8.11 7 5 12 5zm0 2C8.14 7 4.86 9.06 3.3 12 4.86 14.94 8.14 17 12 17s7.14-2.06 8.7-5C19.14 9.06 15.86 7 12 7zm0 2a3 3 0 110 6 3 3 0 010-6z"
                    />
                  </svg>
                  <svg
                    class="icon-eye icon-eye-closed"
                    viewBox="0 0 24 24"
                    aria-hidden="true"
                  >
                    <path
                      fill="currentColor"
                      d="M2.1 3.51L3.5 2.1l18.4 18.39-1.41 1.41-3.05-3.05A12.38 12.38 0 0112 19c-5 0-9.27-3.11-11-7a13.52 13.52 0 012.86-3.95L2.1 3.51zM7.6 9l1.64 1.64A3 3 0 0012 15a3 3 0 001.36-.34l1.49 1.49A6.02 6.02 0 0112 17a5 5 0 01-4.4-8zm4.58-4c5 0 9.27 3.11 11 7-.61 1.38-1.53 2.61-2.66 3.62l-1.43-1.43C20.42 13.18 21.09 12.13 21.5 12c-1.56-2.94-4.84-5-8.7-5-.6 0-1.2.06-1.77.18L9.8 5.45c.77-.28 1.6-.45 2.38-.45z"
                    />
                  </svg>
                </button>
              </div>
            </div>
            <div class="field full">
              <div class="toggle-field">
                <div>
                  <div class="chk-title">Preflight Verify</div>
                  <div class="muted text-12">
                    Test the webhook before saving changes.
                  </div>
                </div>
                <div class="checkbox-wrapper-8">
                  <input
                    class="tgl tgl-skewed"
                    id="editPreflightVerify"
                    type="checkbox"
                    checked
                  />
                  <label
                    class="tgl-btn"
                    data-tg-off="NO"
                    data-tg-on="YES"
                    for="editPreflightVerify"
                  ></label>
                </div>
              </div>
            </div>
            <div class="field full">
              <div id="editPreflightResult" class="muted text-12 mt-6"></div>
            </div>
          </form>
          <div id="editError" class="muted error-text"></div>
        </div>
        <div class="modal-footer">
          <button id="btnEditCancel" type="button" class="btn btn-secondary">
            Cancel
          </button>
          <button id="btnEditSave" type="button" class="btn btn-primary">
            Save
          </button>
        </div>
      </div>
    </div>
    <script>
      (function () {
        const toggleBtn = document.getElementById("toggleEditSecret");
        if (!toggleBtn) return;
        const inp = document.getElementById("editWebhookSecret");
        const eyeOpen = toggleBtn.querySelector(".icon-eye-open");
        const eyeClosed = toggleBtn.querySelector(".icon-eye-closed");
        if (!inp || !eyeOpen || !eyeClosed) return;
        toggleBtn.addEventListener("click", () => {
          const wasPassword = inp.type === "password";
          inp.type = wasPassword ? "text" : "password";
          const nowShown = wasPassword;
          eyeOpen.classList.toggle("hidden", !nowShown);
          eyeClosed.classList.toggle("hidden", nowShown);
          toggleBtn.setAttribute(
            "aria-label",
            nowShown ? "Hide secret" : "Show secret"
          );
          toggleBtn.setAttribute("title", nowShown ? "Hide" : "Show");
          toggleBtn.setAttribute("aria-pressed", nowShown ? "true" : "false");
        });
      })();
    </script>
    <div
      id="msgModalOverlay"
      class="modal-overlay"
      aria-hidden="true"
      role="dialog"
      aria-modal="true"
    >
      <div class="modal" role="document">
        <div class="modal-header">
          <div class="modal-title" id="msgModalTitle">Compose</div>
          <button id="msgModalClose" class="modal-close" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body" id="msgModalBody"></div>
        <div class="modal-footer">
          <!-- <div class="msg-delay">
            <label for="msg_delay_ms" class="inline-note">Delay (ms)</label>
            <input
              id="msg_delay_ms"
              type="number"
              min="0"
              step="100"
              value="3600"
            />
          </div> -->
          <div class="footer-actions">
            <button id="msgModalCancel" class="btn btn-secondary">
              Cancel
            </button>
            <button id="msgModalSend" class="btn btn-primary">Send</button>
          </div>
        </div>
      </div>
    </div>
    <script src="/socket.io/socket.io.js" defer></script>
    <script src="/auth.js" defer></script>
    <script src="/app.js" defer></script>
  </body>
</html>
