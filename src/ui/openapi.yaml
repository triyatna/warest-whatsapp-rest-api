openapi: 3.0.3
info:
  version: 1.3.42
  description: |
    REST API surface served by warest-whatsapp-rest-api-multisessions.
  contact:
    name: WARest
servers:
  - url: http://localhost:4001
    description: Local development
tags:
  - name: Sessions
    description: Lifecycle for WhatsApp sessions.
  - name: Messages - Sending
    description: Send outbound WhatsApp messages of every type.
  - name: Messages - Actions
    description: React to previously sent or received messages.
  - name: Chats
    description: Query message history or mutate chat state.
  - name: Groups
    description: Manage WhatsApp groups.
  - name: Profiles
    description: Account level profile and contacts utilities.
  - name: Server
    description: Runtime and infrastructure controls.
  - name: Misc
    description: Supporting utilities such as media helpers, crypto tools, UUID helpers, and poll decrypt utilities.
security:
  - ApiKeyAuth: []
x-common-responses: &commonResponses
  400:
    $ref: "#/components/responses/ValidationError"
  401:
    $ref: "#/components/responses/UnauthorizedError"
  403:
    $ref: "#/components/responses/ForbiddenError"
  404:
    $ref: "#/components/responses/NotFoundError"
  429:
    $ref: "#/components/responses/RateLimitError"
  500:
    $ref: "#/components/responses/InternalServerError"
paths:
  /api/v1/session/create:
    get:
      operationId: getSessionCreate
      tags:
        - Sessions
      summary: Start a session
      description: Returns the QR string plus a data URL whenever additional authentication is required.
      parameters:
        - in: query
          name: sessionId
          required: true
          description: Unique session identifier owned by the caller.
          schema:
            type: string
      responses:
        200:
          description: Session created and scan QR code if required.
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/ApiEnvelope"
                  - type: object
                    properties:
                      results:
                        type: array
                        items:
                          $ref: "#/components/schemas/SessionCreateResult"
              examples:
                Created:
                  value:
                    status: true
                    code: 1107
                    message: Scan the QR to continue
                    results:
                      - registryUser: USSERREGISTRY
                        sessionId: main
                        qrString: string
                        qr: base64encodeddataurl
                        qrDuration: 20
                        webhookUrl: "https://hooks.example.com/warest"
                        webhookSecret: rotateMe
                AlreadyOpen:
                  value:
                    status: true
                    code: 1104
                    message: Session already open
                    results:
                      - registryUser: USERREGISTRY
                        sessionId: main
                        createdAt: "2024-05-01T08:30:00.000Z"
                        webhookUrl: "https://hooks.example.com/warest"
                        webhookSecret: rotateMe
        400:
          $ref: "#/components/responses/SessionRequiredError"
        401:
          $ref: "#/components/responses/UnauthorizedError"
        403:
          $ref: "#/components/responses/SessionForbiddenError"
        429:
          $ref: "#/components/responses/RateLimitError"
        500:
          $ref: "#/components/responses/InternalServerError"
  /api/v1/session/create/pair-code:
    get:
      operationId: getSessionCreatePairCode
      tags:
        - Sessions
      summary: Request a pairing code
      description: Validates the MSISDN format and fetches a new pairing code from WhatsApp when possible.
      parameters:
        - in: query
          name: sessionId
          required: true
          schema:
            type: string
        - in: query
          name: phone
          required: true
          schema:
            type: string
            description: Digits only phone number including country code.
      responses:
        200:
          description: Pair code payload. Codes rotate frequently.
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/ApiEnvelope"
                  - type: object
                    properties:
                      results:
                        type: array
                        items:
                          $ref: "#/components/schemas/SessionPairCodeResult"
              examples:
                PairCodeGenerated:
                  summary: Pair code generated
                  value:
                    status: true
                    code: 1000
                    message: Pair code generated
                    results:
                      - registryUser: USERREGISTRY
                        sessionId: main
                        pairCode: "123-456"
                SessionAlreadyOpen:
                  summary: Session already open
                  value:
                    status: true
                    code: 1104
                    message: Session already open
                    results:
                      - registryUser: USERREGISTRY
                        sessionId: main
                        status: open
        202:
          description: Pairing code still being generated; poll again.
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/ApiEnvelope"
                  - type: object
                    properties:
                      results:
                        type: array
                        items:
                          $ref: "#/components/schemas/SessionPairCodeResult"
              examples:
                Example response:
                  summary: Pair code pending
                  value:
                    status: true
                    code: 1110
                    message: Pair code pending
                    results:
                      - registryUser: user-main
                        sessionId: main
                        pairCode: ""
        400:
          description: Validation error when sessionId or phone is missing or invalid.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiEnvelope"
              examples:
                Example response:
                  summary: sessionId missing
                  value:
                    status: false
                    code: 1100
                    message: sessionId is required
                    results: null
                Example response - phone missing:
                  summary: phone missing
                  value:
                    status: false
                    code: 2001
                    message: phone is required
                    results: null
        401:
          $ref: "#/components/responses/UnauthorizedError"
        403:
          $ref: "#/components/responses/SessionForbiddenError"
        429:
          $ref: "#/components/responses/RateLimitError"
        500:
          $ref: "#/components/responses/InternalServerError"
  /api/v1/session/logout:
    get:
      operationId: getSessionLogout
      tags:
        - Sessions
      summary: Sign out
      description: Stop the runtime and purge WhatsApp credentials while keeping the session registered.
      parameters:
        - $ref: "#/components/parameters/SessionIdQuery"
      responses:
        200:
          description: Logout completed; result reports which steps succeeded.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiEnvelope"
              examples:
                Example response:
                  summary: Logout complete
                  value:
                    status: true
                    code: 1000
                    message: Logout success
                    results:
                      - sessionId: main
                        steps:
                          runtime: true
                          creds: true
        400:
          $ref: "#/components/responses/SessionRequiredError"
        401:
          $ref: "#/components/responses/UnauthorizedError"
        403:
          $ref: "#/components/responses/SessionForbiddenError"
        404:
          $ref: "#/components/responses/SessionNotFoundError"
        429:
          $ref: "#/components/responses/RateLimitError"
        500:
          $ref: "#/components/responses/InternalServerError"
  /api/v1/session/reconnect:
    get:
      operationId: getSessionReconnect
      tags:
        - Sessions
      summary: Restart a session runtime
      description: Recreate the runtime for a session.
      parameters:
        - $ref: "#/components/parameters/SessionIdQuery"
      responses:
        202:
          description: Session restart scheduled.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiEnvelope"
              examples:
                Example response:
                  summary: Runtime restart requested
                  value:
                    status: true
                    code: 1109
                    message: Reconnect scheduled
                    results: null
        400:
          $ref: "#/components/responses/SessionRequiredError"
        401:
          $ref: "#/components/responses/UnauthorizedError"
        403:
          $ref: "#/components/responses/SessionForbiddenError"
        404:
          $ref: "#/components/responses/SessionNotFoundError"
        429:
          $ref: "#/components/responses/RateLimitError"
        500:
          $ref: "#/components/responses/InternalServerError"
  /api/v1/session/devices:
    get:
      operationId: getSessionDevices
      tags:
        - Sessions
      summary: List linked devices
      description: List linked device info for the logged in account.
      parameters:
        - $ref: "#/components/parameters/SessionIdQuery"
      responses:
        200:
          description: Device metadata.
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/ApiEnvelope"
                  - type: object
                    properties:
                      results:
                        type: array
                        items:
                          $ref: "#/components/schemas/SessionDevicesResult"
              examples:
                SessionAlreadyOpen:
                  summary: Linked device metadata
                  value:
                    status: true
                    code: 1000
                    message: Device Info
                    results:
                      - name: Main Device
                        phone: "6281234567890"
                        device: android
                SessionNotLoggedIn:
                  summary: Session not logged in
                  value:
                    status: true
                    code: 1000
                    message: Device Info
                    results:
                      - name: null
                        phone: null
                        device: WARest
        400:
          $ref: "#/components/responses/SessionRequiredError"
        401:
          $ref: "#/components/responses/UnauthorizedError"
        403:
          $ref: "#/components/responses/SessionForbiddenError"
        404:
          $ref: "#/components/responses/SessionNotFoundError"
        429:
          $ref: "#/components/responses/RateLimitError"
        500:
          $ref: "#/components/responses/InternalServerError"
  /api/v1/session/{sessionId}/config:
    post:
      operationId: postSessionSessionIdConfig
      tags:
        - Sessions
      summary: Update session webhook
      description: Update webhook configuration for a session.
      parameters:
        - in: path
          name: sessionId
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                webhookUrl:
                  type: string
                  format: uri
                  description: "(optional) HTTPS endpoint that receives events."
                webhookSecret:
                  type: string
                  description: "(optional) Provide to rotate the secret manually."
                preflight:
                  type: boolean
                  description: "(optional) When true the server sends a signed test request before saving."
              required:
                - webhookUrl
                - webhookSecret
            example:
              webhookUrl: "https://hooks.example.com/warest"
              webhookSecret: superSecret
              preflight: true
      responses:
        200:
          description: Persisted config summary.
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/ApiEnvelope"
                  - type: object
                    properties:
                      results:
                        type: array
                        items:
                          $ref: "#/components/schemas/SessionConfigResult"
              examples:
                Example response:
                  summary: Config updated
                  value:
                    status: true
                    code: 1000
                    message: Config updated
                    results:
                      - registryUser: USERREGISTRY
                        sessionId: main
                        webhookUrl: "https://hooks.example.com/warest"
                        webhookSecret: superSecret
        400:
          description: Invalid payload or missing sessionId.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiEnvelope"
              examples:
                preflightFailed:
                  summary: Webhook preflight rejected
                  value:
                    status: false
                    code: 2000
                    message: Webhook preflight failed
                    results:
                      - results:
                          - target: "https://hooks.example.com/warest"
                            ok: false
                            error: "getaddrinfo ENOTFOUND hooks.example.com"
                            roundTripMs: 217
                PathParamInvalid:
                  summary: Path param invalid
                  value:
                    status: false
                    code: 1100
                    message: sessionId is required
                    results: null

        401:
          $ref: "#/components/responses/UnauthorizedError"
        403:
          $ref: "#/components/responses/SessionForbiddenError"
        404:
          $ref: "#/components/responses/SessionNotFoundError"
        429:
          $ref: "#/components/responses/RateLimitError"
        500:
          $ref: "#/components/responses/InternalServerError"
  /api/v1/session/list:
    get:
      operationId: getSessionList
      tags:
        - Sessions
      summary: List sessions
      description: List sessions owned by the authenticated user.
      responses:
        200:
          description: All sessions tied to the caller.
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/ApiEnvelope"
                  - type: object
                    properties:
                      results:
                        type: array
                        items:
                          $ref: "#/components/schemas/SessionListResult"
              examples:
                Example response:
                  summary: Session inventory
                  value:
                    status: true
                    code: 1000
                    message: Sessions fetched
                    results:
                      - items:
                          - id: main
                            status: open
                            me:
                              id: "6281234567890@whatsapp.net"
                              name: WARest Bot
                              lid: "75987654321000@.lid"
                            pushName: WARest Bot
                            lastConn: "2024-05-01T08:30:00.000Z"
                          - id: sales
                            status: starting
                            me: null
                            pushName: null
                            lastConn: null
        401:
          $ref: "#/components/responses/UnauthorizedError"
        429:
          $ref: "#/components/responses/RateLimitError"
        500:
          $ref: "#/components/responses/InternalServerError"
  /api/v1/session/delete:
    delete:
      operationId: deleteSessionDelete
      tags:
        - Sessions
      summary: Delete a session
      description: Stops the runtime, purges credentials, and removes metadata in a best effort fashion.
      parameters:
        - $ref: "#/components/parameters/SessionIdQuery"
      responses:
        200:
          description: Deletion steps reported per layer.
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/ApiEnvelope"
                  - type: object
                    properties:
                      results:
                        type: array
                        items:
                          $ref: "#/components/schemas/SessionDeleteResult"
              examples:
                Example response:
                  summary: Session removed
                  value:
                    status: true
                    code: 1000
                    message: Session deleted
                    results:
                      - sessionId: main
                        steps:
                          runtime: true
                          creds: true
                          meta: true
        400:
          $ref: "#/components/responses/SessionRequiredError"
        401:
          $ref: "#/components/responses/UnauthorizedError"
        403:
          $ref: "#/components/responses/SessionForbiddenError"
        404:
          $ref: "#/components/responses/SessionNotFoundError"
        429:
          $ref: "#/components/responses/RateLimitError"
        500:
          $ref: "#/components/responses/InternalServerError"
  /api/v1/messages/send/text:
    post:
      operationId: postMessagesSendText
      tags:
        - Messages - Sending
      summary: Send a text message
      description: Also exposed as GET for manual testing, but POST with JSON body is recommended for production traffic.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              allOf:
                - $ref: "#/components/schemas/DestinationSelector"
                - type: object
                  required:
                    - message
                  properties:
                    message:
                      type: string
                      description: Plain text message, markdown and emoji shortcodes are supported.
                - $ref: "#/components/schemas/SendOptions"
            example:
              sessionId: main
              to: "62812xxxxxxx"
              message: "Hello"
              presence: true
              replyMessageId: "ABCD1234EFGH5678"
              isForwarded: false
      responses:
        <<: *commonResponses
        200:
          description: Text message send status per recipient.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageSendResponse"
              examples:
                textSuccess:
                  summary: Text message sent
                  value:
                    status: true
                    code: 1000
                    message: "Text message sent"
                    results:
                      - phone: "628111111111"
                        to: "62812xxxxxxx"
                        toJid: "62812xxxxxxx@s.whatsapp.net"
                        messageId: "3EB01234..."
                        status: "text success"
                        timestamp: 1763487000
                        advancedInfo:
                          isForwarded: false
                          quotedMessageId: "AB12"
  /api/v1/messages/send/files:
    post:
      operationId: postMessagesSendFiles
      tags:
        - Messages - Sending
      summary: Send media files
      description: |
        Supports JSON payloads (`files` array with URLs or objects), multipart/form-data with `file` parts,
        or raw binary uploads with query parameters. Metadata such as caption and per-file options
        are honored per docs/routes.md. Archives (ZIP/7z), PDFs, CAD files, and other arbitrary binaries
        are supported. Executables and script files (EXE, MSI, BAT, CMD, SH, etc.) are automatically rejected.
        MIME validation relies on `WAREST_MIMETYPE_FILES_ALLOWLIST`. Default categories:
          - image_as_document: image/jpeg, image/png, image/webp, image/gif, image/bmp, image/tiff, image/heif, image/heic
          - video_as_document: video/mp4, video/3gpp, video/3gp, video/mpeg, video/ogg, video/webm, video/x-msvideo, video/x-matroska, video/quicktime
          - audio_as_document: audio/mpeg, audio/mp3, audio/aac, audio/wav, audio/flac, audio/ogg, audio/opus, audio/amr, audio/x-ms-wma, audio/mp4, audio/m4a
          - office_documents: application/pdf, application/msword, application/vnd.ms-excel, application/vnd.ms-powerpoint, application/vnd.openxmlformats-officedocument.wordprocessingml.document, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.openxmlformats-officedocument.presentationml.presentation, application/vnd.ms-access, application/vnd.visio, application/vnd.ms-project
          - archives_and_packages: application/zip, application/x-zip-compressed, application/vnd.rar, application/x-rar-compressed, application/gzip, application/x-gzip, application/x-7z-compressed, application/x-tar, application/x-bzip2, application/x-xz, application/vnd.android.package-archive, application/x-msdownload, application/x-iso9660-image
          - text_and_data: text/plain, text/csv, text/xml, application/xml, application/json, application/javascript, text/html, text/markdown, application/sql, application/x-sql, text/yaml, application/x-yaml, application/x-sh, text/css
          - ebooks: application/epub+zip, application/x-mobipocket-ebook, application/x-fictionbook+xml
          - design_and_vector: application/postscript, image/svg+xml, application/illustrator, application/photoshop, application/vnd.adobe.photoshop, image/vnd.adobe.photoshop
          - fallback: application/octet-stream
      requestBody:
        required: true
        content:
          application/json:
            schema:
              allOf:
                - $ref: "#/components/schemas/DestinationSelector"
                - type: object
                  properties:
                    files:
                      type: array
                      description: Array of file URLs, data URIs, or objects `{ file, caption?, filename? }`.
                      items:
                        oneOf:
                          - type: string
                            example: "https://example.com/image.jpg"
                          - type: object
                            properties:
                              file:
                                type: string
                                description: URL, path, or base64 data URI.
                                example: "https://example.com/image.jpg"
                              caption:
                                type: string
                              filename:
                                type: string
                                example: "image file"
                              replyMessageId:
                                type: string
                                description: "(optional) Message ID to quote."
                                example: "ABCD1234EFGH5678"
                    caption:
                      type: string
                - $ref: "#/components/schemas/SendOptions"
            example:
              sessionId: main
              to: "62812xxxxxxx"
              files:
                - file: "data:application/pdf;base64,..."
                  caption: "Spec"
                  filename: "Spec.pdf"
                - "https://example.com/payload.exe"
              presence: true
              isForwarded: false
          multipart/form-data:
            schema:
              type: object
              properties:
                sessionId:
                  type: string
                  description: Session identifier.
                to:
                  type: string
                  description: Destination WhatsApp ID.
                files:
                  type: array
                  description: "(required) One or more file parts."
                  items:
                    type: string
                    format: binary
                caption:
                  type: string
                  description: "(optional) Caption for all files."
                replyMessageId:
                  type: string
                  description: "(optional) Message ID to quote."
                isForwarded:
                  type: boolean
                  description: "(optional) Mark the outgoing messages as forwarded."
                presence:
                  type: boolean
                  description: "(optional) Emit typing state before sending."
              required:
                - sessionId
                - to
                - files
          application/octet-stream:
            schema:
              type: string
              format: binary
            description: Combine with query string `sessionId`, `to`, `filename`, and optional send options.
      responses:
        <<: *commonResponses
        200:
          description: File send status with per-recipient metadata.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageSendResponse"
              examples:
                filesSuccess:
                  summary: File message sent
                  value:
                    status: true
                    code: 1000
                    message: "File message sent"
                    results:
                      - phone: "628111111111"
                        to: "62812xxxxxxx"
                        toJid: "62812xxxxxxx@s.whatsapp.net"
                        messageId: null
                        status: "files success"
                        timestamp: 1763487001
                        advancedInfo:
                          isForwarded: false
                          quotedMessageId: null
                          files:
                            - name: "Spec.pdf"
                              mimetype: "application/pdf"
                              size: 34012
                              messageId: "3EB04568..."
                              timestamp: 1763487001
                          blockedFiles:
                            - name: "payload.exe"
                              mimetype: "application/x-msdownload"
                              reason: "Files with .exe extensions are not allowed"
  /api/v1/messages/send/media:
    post:
      operationId: postMessagesSendMedia
      tags:
        - Messages - Sending
      summary: Send an image or video
      description: |
        Send image/video by HTTPS URL, base64 data URI, or direct file upload (multipart/form-data).
        Attach optional caption, compression, and view once flags.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              allOf:
                - $ref: "#/components/schemas/DestinationSelector"
                - type: object
                  required:
                    - media
                  properties:
                    media:
                      type: string
                      example: "https://example.com/photo.jpg"
                      description: HTTPS URL, local path, or base64 data URI.
                    caption:
                      type: string
                    compress:
                      type: boolean
                      default: true
                    viewOnce:
                      type: boolean
                      default: false
                - $ref: "#/components/schemas/SendOptions"
            example:
              sessionId: main
              to: "62812xxxxxxx"
              media: "https://example.com/photo.jpg"
              caption: "Hi!"
              compress: true
              viewOnce: false
              presence: true
          multipart/form-data:
            schema:
              allOf:
                - $ref: "#/components/schemas/DestinationSelector"
                - type: object
                  properties:
                    media:
                      type: string
                      format: binary
                      description: Binary image/video file.
                    caption:
                      type: string
                      description: (optional) Caption for the media.
                    compress:
                      type: boolean
                      default: true
                      description: (optional) Whether to compress the media.
                    viewOnce:
                      type: boolean
                      default: false
                      description: (optional) Send as view once media.
                  required:
                    - media
                - $ref: "#/components/schemas/SendOptions"
          application/octet-stream:
            schema:
              type: string
              format: binary
            description: >
              Raw image/video bytes. Supply `sessionId`/`phone`, `to`, and optional send options via query string.
      responses:
        <<: *commonResponses
        200:
          description: Media message accepted.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageSendResponse"
              examples:
                mediaSuccess:
                  summary: Image message sent
                  value:
                    status: true
                    code: 1000
                    message: "Media message sent"
                    results:
                      - phone: "628111111111"
                        to: "62812xxxxxxx"
                        toJid: "62812xxxxxxx@s.whatsapp.net"
                        messageId: "3EB07890..."
                        status: "image success"
                        timestamp: 1763487010
                        advancedInfo:
                          isForwarded: false
                          quotedMessageId: null
                          compression:
                            enable: true
                          mediaKind: image

  /api/v1/messages/send/audio:
    post:
      operationId: postMessagesSendAudio
      tags:
        - Messages - Sending
      summary: Send an audio message
      description: Send audio or push-to-talk voice note.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              allOf:
                - $ref: "#/components/schemas/DestinationSelector"
                - type: object
                  required:
                    - audio
                  properties:
                    audio:
                      type: string
                      description: URL or base64 payload.
                    isVN:
                      type: boolean
                      description: Send as voice note (PTT) when true.
                - $ref: "#/components/schemas/SendOptions"
          multipart/form-data:
            schema:
              allOf:
                - $ref: "#/components/schemas/DestinationSelector"
                - type: object
                  properties:
                    audio:
                      type: string
                      format: binary
                      description: Binary audio upload.
                    isVN:
                      type: boolean
                  required:
                    - audio
                - $ref: "#/components/schemas/SendOptions"
          application/octet-stream:
            schema:
              type: string
              format: binary
            description: >
              Raw audio bytes. Provide `sessionId`/`phone`, `to`, and optional options via query string parameters.
            example:
              sessionId: main
              to: "62812xxxxxxx"
              audio: "data:audio/ogg;base64,..."
              isVN: true
              presence: true
      responses:
        <<: *commonResponses
        200:
          description: Audio dispatch summary.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageSendResponse"
              examples:
                audioSuccess:
                  summary: Voice note sent
                  value:
                    status: true
                    code: 1000
                    message: "Audio message sent"
                    results:
                      - phone: "628111111111"
                        to: "62812xxxxxxx"
                        toJid: "62812xxxxxxx@s.whatsapp.net"
                        messageId: "3EB0A111..."
                        status: "ptt success"
                        timestamp: 1763487020
                        advancedInfo:
                          isForwarded: false
                          quotedMessageId: string
                          isVN: true
                          mimeType: "audio/ogg; codecs=opus"
  /api/v1/messages/send/document:
    post:
      operationId: postMessagesSendDocument
      tags:
        - Messages - Sending
      summary: Send a document
      description: |
        Send document or any generic file as document message. Archives (ZIP/7z), PDFs, spreadsheets, and
        other binary formats are accepted, while executables and scripts are blocked automatically.
        MIME validation follows `WAREST_MIMETYPE_FILES_ALLOWLIST` with the same defaults as `/messages/send/files`:
          - image_as_document: image/jpeg, image/png, image/webp, image/gif, image/bmp, image/tiff, image/heif, image/heic
          - video_as_document: video/mp4, video/3gpp, video/3gp, video/mpeg, video/ogg, video/webm, video/x-msvideo, video/x-matroska, video/quicktime
          - audio_as_document: audio/mpeg, audio/mp3, audio/aac, audio/wav, audio/flac, audio/ogg, audio/opus, audio/amr, audio/x-ms-wma, audio/mp4, audio/m4a
          - office_documents: application/pdf, application/msword, application/vnd.ms-excel, application/vnd.ms-powerpoint, application/vnd.openxmlformats-officedocument.wordprocessingml.document, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.openxmlformats-officedocument.presentationml.presentation, application/vnd.ms-access, application/vnd.visio, application/vnd.ms-project
          - archives_and_packages: application/zip, application/x-zip-compressed, application/vnd.rar, application/x-rar-compressed, application/gzip, application/x-gzip, application/x-7z-compressed, application/x-tar, application/x-bzip2, application/x-xz, application/vnd.android.package-archive, application/x-msdownload, application/x-iso9660-image
          - text_and_data: text/plain, text/csv, text/xml, application/xml, application/json, application/javascript, text/html, text/markdown, application/sql, application/x-sql, text/yaml, application/x-yaml, application/x-sh, text/css
          - ebooks: application/epub+zip, application/x-mobipocket-ebook, application/x-fictionbook+xml
          - design_and_vector: application/postscript, image/svg+xml, application/illustrator, application/photoshop, application/vnd.adobe.photoshop, image/vnd.adobe.photoshop
          - fallback: application/octet-stream
      requestBody:
        required: true
        content:
          application/json:
            schema:
              allOf:
                - $ref: "#/components/schemas/DestinationSelector"
                - type: object
                  required:
                    - document
                  properties:
                    document:
                      type: string
                      example: "https://example.com/contract.pdf"
                      description: URL, path, or base64 data URI.
                    filename:
                      type: string
                      example: "contract.pdf"
                      description: Filename of the document.
                    caption:
                      type: string
                      description: (optional) Document caption.
                - $ref: "#/components/schemas/SendOptions"
          multipart/form-data:
            schema:
              allOf:
                - $ref: "#/components/schemas/DestinationSelector"
                - type: object
                  properties:
                    document:
                      type: string
                      format: binary
                      description: Binary document upload.
                    filename:
                      type: string
                    caption:
                      type: string
                  required:
                    - document
                - $ref: "#/components/schemas/SendOptions"
          application/octet-stream:
            schema:
              type: string
              format: binary
            description: >
              Raw document bytes. Pass `sessionId`/`phone`, `to`, filename, and other options through the query string.
            example:
              sessionId: main
              to: "62812xxxxxxx"
              document: "https://example.com/contract.pdf"
              filename: "contract.pdf"
              caption: "Please review"
              presence: true
      responses:
        <<: *commonResponses
        200:
          description: Document message info.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageSendResponse"
              examples:
                documentSuccess:
                  summary: Document sent
                  value:
                    status: true
                    code: 1000
                    message: "Document message sent"
                    results:
                      - phone: "628111111111"
                        to: "62812xxxxxxx"
                        toJid: "62812xxxxxxx@s.whatsapp.net"
                        messageId: "3EB0B222..."
                        status: "document success"
                        timestamp: 1763487030
                        advancedInfo:
                          isForwarded: false
                          quotedMessageId: string
                          fileName: "contract.pdf"
                          mimetype: "application/pdf"
  /api/v1/messages/send/sticker:
    post:
      operationId: postMessagesSendSticker
      tags:
        - Messages - Sending
      summary: Send a sticker
      description: Send sticker (converted to webp when necessary).
      requestBody:
        required: true
        content:
          application/json:
            schema:
              allOf:
                - $ref: "#/components/schemas/DestinationSelector"
                - type: object
                  required:
                    - sticker
                  properties:
                    sticker:
                      type: string
                      description: URL, base64 data URI, or storage path.
                    compress:
                      type: boolean
                      description: Enable resizing before converting to WebP.
                - $ref: "#/components/schemas/SendOptions"
          multipart/form-data:
            schema:
              allOf:
                - $ref: "#/components/schemas/DestinationSelector"
                - type: object
                  properties:
                    sticker:
                      type: string
                      format: binary
                      description: Binary image/GIF upload.
                    compress:
                      type: boolean
                      description: Enable resizing before converting to WebP.
                  required:
                    - sticker
                - $ref: "#/components/schemas/SendOptions"
          application/octet-stream:
            schema:
              type: string
              format: binary
            description: >
              Raw sticker bytes. Supply `sessionId`/`phone`, `to`, and additional options via query parameters.
            example:
              sessionId: main
              to: "62812xxxxxxx"
              sticker: "https://example.com/cat.png"
              presence: true
      responses:
        <<: *commonResponses
        200:
          description: Sticker send summary.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageSendResponse"
              examples:
                stickerSuccess:
                  summary: Sticker sent
                  value:
                    status: true
                    code: 1000
                    message: "Sticker message sent"
                    results:
                      - phone: "628111111111"
                        to: "62812xxxxxxx"
                        toJid: "62812xxxxxxx@s.whatsapp.net"
                        messageId: "3EB0C333..."
                        status: "sticker success"
                        timestamp: 1763487040
                        advancedInfo:
                          isForwarded: false
                          quotedMessageId: string
                          compression:
                            enable: true
  /api/v1/messages/send/contact:
    post:
      operationId: postMessagesSendContact
      tags:
        - Messages - Sending
      summary: Send a contact card
      description: Accepts either a `contact` object or shorthand fields `name`, `fullName`, `phone`, `organization`, `email`.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              allOf:
                - $ref: "#/components/schemas/DestinationSelector"
                - $ref: "#/components/schemas/SendOptions"
                - type: object
                  properties:
                    contact:
                      type: object
                      properties:
                        name:
                          type: string
                        fullName:
                          type: string
                        phone:
                          type: string
                        organization:
                          type: string
                        email:
                          type: string
                    name:
                      type: string
                    phone:
                      type: string
            example:
              sessionId: main
              to: "62812xxxxxxx"
              contact:
                name: "John"
                fullName: "John Doe"
                phone: "628111111111"
                organization: "Acme"
              presence: true
              replyMessageId: null
              isForwarded: false
      responses:
        <<: *commonResponses
        200:
          description: Contact message response.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageSendResponse"
              examples:
                contactSuccess:
                  summary: Contact card sent
                  value:
                    status: true
                    code: 1000
                    message: "Contact message sent"
                    results:
                      - phone: "628111111111"
                        to: "62812xxxxxxx"
                        toJid: "62812xxxxxxx@s.whatsapp.net"
                        messageId: "3EB0D444..."
                        status: "contact success"
                        timestamp: 1763487050
                        advancedInfo:
                          isForwarded: false
                          quotedMessageId: null
                          displayName: "John"
  /api/v1/messages/send/location:
    post:
      operationId: postMessagesSendLocation
      tags:
        - Messages - Sending
      summary: Share a location pin
      description: Location can be provided via `location` object, `[lat, lng]` array, or dedicated latitude/longitude fields.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              allOf:
                - $ref: "#/components/schemas/DestinationSelector"
                - type: object
                  properties:
                    location:
                      required: true
                      description: (required) Location object or array.
                      oneOf:
                        - type: object
                          properties:
                            latitude:
                              type: number
                            longitude:
                              type: number
                            name:
                              type: string
                            address:
                              type: string
                        - type: array
                          minItems: 2
                          maxItems: 2
                          items:
                            type: number
                - $ref: "#/components/schemas/SendOptions"
            examples:
              locationByObject:
                summary: Location via object
                value:
                  sessionId: main
                  to: "62812xxxxxxx"
                  location:
                    latitude: -6.2
                    longitude: 106.8
                    name: "Monas"
                    address: "Monumen Nasional, Jakarta"
                  presence: true
                  replyMessageId: null
                  isForwarded: false
              locationByArray:
                summary: Location via array
                value:
                  sessionId: main
                  to: "62812xxxxxxx"
                  location: [-6.2, 106.8]
                  presence: true
                  replyMessageId: null
                  isForwarded: false
              locationByFields:
                summary: Location via fields
                value:
                  sessionId: main
                  to: "62812xxxxxxx"
                  latitude: -6.2
                  longitude: 106.8
                  name: "Monas"
                  address: "Monumen Nasional, Jakarta"
                  presence: true
                  replyMessageId: null
                  isForwarded: false
      responses:
        <<: *commonResponses
        200:
          description: Location send summary.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageSendResponse"
              examples:
                locationSuccess:
                  summary: Location shared
                  value:
                    status: true
                    code: 1000
                    message: "Location message sent"
                    results:
                      - phone: "628111111111"
                        to: "62812xxxxxxx"
                        toJid: "62812xxxxxxx@s.whatsapp.net"
                        messageId: "3EB0E555..."
                        status: "location success"
                        timestamp: 1763487060
                        advancedInfo:
                          isForwarded: false
                          quotedMessageId: null
                          location:
                            degreesLatitude: -6.2
                            degreesLongitude: 106.8
                            name: "Monas"
                            address: "Monumen Nasional, Jakarta"
  /api/v1/messages/send/poll:
    post:
      operationId: postMessagesSendPoll
      tags:
        - Messages - Sending
      summary: Send a poll
      description: Provide `question`, `options`, and optional `maxSelection` (aka selectableCount).
      requestBody:
        required: true
        content:
          application/json:
            schema:
              allOf:
                - $ref: "#/components/schemas/DestinationSelector"
                - type: object
                  required:
                    - question
                    - options
                  properties:
                    question:
                      type: string
                    options:
                      type: array
                      minItems: 1
                      items:
                        type: string
                    maxSelection:
                      type: integer
                      minimum: 1
                - $ref: "#/components/schemas/SendOptions"
            example:
              sessionId: main
              to: "62812xxxxxxx"
              question: "Do you like WARest?"
              options: ["Yes", "No"]
              maxSelection: 1
              presence: true
      responses:
        <<: *commonResponses
        200:
          description: Poll send summary.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageSendResponse"
              examples:
                pollSuccess:
                  summary: Poll sent
                  value:
                    status: true
                    code: 1000
                    message: "Poll message sent"
                    results:
                      - phone: "628111111111"
                        to: "62812xxxxxxx"
                        toJid: "62812xxxxxxx@s.whatsapp.net"
                        messageId: "3EB0E999..."
                        status: "poll success"
                        timestamp: 1763487075
                        advancedInfo:
                          isForwarded: false
                          quotedMessageId: null
                          question: "Do you like WARest?"
                          options: ["Yes", "No"]
                          maxSelection: 1
  /api/v1/messages/send/gif:
    post:
      operationId: postMessagesSendGif
      tags:
        - Messages - Sending
      summary: Send a GIF
      description: Send GIF (converted to mp4 under the hood).
      requestBody:
        required: true
        content:
          application/json:
            schema:
              allOf:
                - $ref: "#/components/schemas/DestinationSelector"
                - type: object
                  required:
                    - gif
                  properties:
                    gif:
                      type: string
                      description: URL, base64 data URI, or storage path.
                    caption:
                      type: string
                      description: (optional) GIF caption.
                    compress:
                      type: boolean
                      description: Compress video/image payloads when possible.
                - $ref: "#/components/schemas/SendOptions"
          multipart/form-data:
            schema:
              allOf:
                - $ref: "#/components/schemas/DestinationSelector"
                - type: object
                  properties:
                    gif:
                      type: string
                      format: binary
                      description: GIF/video upload.
                    caption:
                      type: string
                      description: (optional) GIF caption.
                    compress:
                      type: boolean
                      description: Compress video payloads when possible.
                  required:
                    - gif
                - $ref: "#/components/schemas/SendOptions"
          application/octet-stream:
            schema:
              type: string
              format: binary
            description: >
              Raw GIF/video bytes. Provide `sessionId`/`phone`, `to`, and additional options via the query string.
            example:
              sessionId: main
              to: "62812xxxxxxx"
              gif: "https://example.com/loop.mp4"
              caption: string
              compress: true
              presence: true
      responses:
        <<: *commonResponses
        200:
          description: GIF send summary.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageSendResponse"
              examples:
                gifSuccess:
                  summary: GIF message sent
                  value:
                    status: true
                    code: 1000
                    message: "GIF message sent"
                    results:
                      - phone: "628111111111"
                        to: "62812xxxxxxx"
                        toJid: "62812xxxxxxx@s.whatsapp.net"
                        messageId: "3EB0F666..."
                        status: "gif success"
                        timestamp: 1763487070
                        advancedInfo:
                          isForwarded: false
                          quotedMessageId: string
                          caption: string
                          compression:
                            enable: true
  /api/v1/messages/send/button:
    post:
      operationId: postMessagesSendButton
      tags:
        - Messages - Sending
      summary: Send a button template
      description: Send interactive buttons template.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              allOf:
                - $ref: "#/components/schemas/DestinationSelector"
                - type: object
                  required:
                    - text
                    - buttons
                  properties:
                    text:
                      type: string
                    buttons:
                      description: "(required) Array of button objects."
                      type: array
                      minItems: 1
                      items:
                        type: object
                        properties:
                          type:
                            type: string
                            enum: [reply, url, call]
                          id:
                            type: string
                          displayText:
                            type: string
                          url:
                            type: string
                        phoneNumber:
                          type: string
                    footer:
                      type: string
                    image:
                      type: string
                      description: URL, base64 data URI, or storage path. (Optional), default use image from server config.
                - $ref: "#/components/schemas/SendOptions"
            example:
              sessionId: main
              to: "62812xxxxxxx"
              text: "Need help?"
              footer: "Support"
              buttons:
                - type: reply
                  displayText: "Talk to agent"
                  id: "agent"
                - type: url
                  displayText: "Open site"
                  url: "https://example.com"
              presence: true
      responses:
        <<: *commonResponses
        200:
          description: Interactive button send summary.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageSendResponse"
              examples:
                buttonSuccess:
                  summary: Button template sent
                  value:
                    status: true
                    code: 1000
                    message: "Interactive button message sent"
                    results:
                      - phone: "628111111111"
                        to: "62812xxxxxxx"
                        toJid: "62812xxxxxxx@s.whatsapp.net"
                        messageId: "3EB10777..."
                        status: "interactive button success"
                        timestamp: 1763487080
                        advancedInfo:
                          isForwarded: false
                          quotedMessageId: null
                          buttonCount: 2
  /api/v1/messages/send/list:
    post:
      operationId: postMessagesSendList
      tags:
        - Messages - Sending
      summary: Send a list template
      description: Accepts either a prebuilt `lists` array or a `list` object with button label and sections.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              allOf:
                - $ref: "#/components/schemas/DestinationSelector"
                - type: object
                  properties:
                    lists:
                      type: array
                      items:
                        type: object
                    list:
                      type: object
                    image:
                      type: string
                    text:
                      type: string
                    message:
                      type: string
                    title:
                      type: string
                    footer:
                      type: string
                    buttonText:
                      type: string
                    sections:
                      type: array
                      items:
                        type: object
                        properties:
                          title:
                            type: string
                          rows:
                            type: array
                            items:
                              type: object
                              properties:
                                id:
                                  type: string
                                title:
                                  type: string
                                description:
                                  type: string

                - $ref: "#/components/schemas/SendOptions"
            examples:
              listByLists:
                summary: Prebuilt lists array
                value:
                  sessionId: main
                  to: "62812xxxxxxx"
                  lists:
                    - title: "Fruits"
                      rows:
                        - id: "apple"
                          title: "Apple"
                          description: "Red and sweet"
                        - id: "banana"
                          title: "Banana"
                          description: "Yellow and long"
                  text: "Select a fruit:"
                  buttonText: "Choose fruit"
                  presence: true
              listByObject:
                summary: List object
                value:
                  sessionId: main
                  to: "62812xxxxxxx"
                  list:
                    buttonText: "Choose option"
                    title: "Main Menu"
                    text: "Please select an option:"
                    footer: "Powered by WARest"
                    sections:
                      - title: "Options"
                        rows:
                          - id: "opt1"
                            title: "Option 1"
                            description: "First option"
                          - id: "opt2"
                            title: "Option 2"
                            description: "Second option"
                  presence: true
              listByFields:
                summary: Individual fields
                value:
                  sessionId: main
                  to: "62812xxxxxxx"
                  buttonText: "Choose option"
                  title: "Main Menu"
                  text: "Please select an option:"
                  footer: "Powered by WARest"
                  sections:
                    - title: "Options"
                      rows:
                        - id: "opt1"
                          title: "Option 1"
                          description: "First option"
                        - id: "opt2"
                          title: "Option 2"
                          description: "Second option"
                  presence: true
      responses:
        <<: *commonResponses
        200:
          description: List send summary.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageSendResponse"
              examples:
                listSuccess:
                  summary: Interactive list sent
                  value:
                    status: true
                    code: 1000
                    message: "Interactive list message sent"
                    results:
                      - phone: "628111111111"
                        to: "62812xxxxxxx"
                        toJid: "62812xxxxxxx@s.whatsapp.net"
                        messageId: "3EB11888..."
                        status: "interactive list success"
                        timestamp: 1763487090
                        advancedInfo:
                          isForwarded: false
                          quotedMessageId: null
                          sectionCount: 1
                          rowCount: 2
  /api/v1/messages/{messageId}/action/star:
    post:
      operationId: postMessagesMessageIdActionStar
      tags:
        - Messages - Actions
      summary: Star a message
      description: Star a message.
      parameters:
        - $ref: "#/components/parameters/MessageId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              allOf:
                - $ref: "#/components/schemas/DestinationSelector"
      responses:
        <<: *commonResponses
        200:
          description: Message starred.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageActionResponse"
              examples:
                success:
                  value:
                    status: true
                    code: 1000
                    message: "Message starred"
                    results:
                      - sessionId: "main"
                        phone: "628111111111"
                        to: "62812xxxxxxx"
                        toJid: "62812xxxxxxx@s.whatsapp.net"
                        messageId: "3EB01234"
                        status: "message starred success"
  /api/v1/messages/{messageId}/action/unstar:
    post:
      operationId: postMessagesMessageIdActionUnstar
      tags:
        - Messages - Actions
      summary: Unstar a message
      description: Remove star from a message.
      parameters:
        - $ref: "#/components/parameters/MessageId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              allOf:
                - $ref: "#/components/schemas/DestinationSelector"
      responses:
        <<: *commonResponses
        200:
          description: Message unstarred.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageActionResponse"
              examples:
                success:
                  value:
                    status: true
                    code: 1000
                    message: "Message unstarred"
                    results:
                      - sessionId: "main"
                        phone: "628111111111"
                        to: "62812xxxxxxx"
                        toJid: "62812xxxxxxx@s.whatsapp.net"
                        messageId: "3EB01234"
                        status: "message unstarred success"
  /api/v1/messages/{messageId}/action/reaction:
    post:
      operationId: postMessagesMessageIdActionReaction
      tags:
        - Messages - Actions
      summary: Add a reaction
      description: React to a message with an emoji.
      parameters:
        - $ref: "#/components/parameters/MessageId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              allOf:
                - $ref: "#/components/schemas/DestinationSelector"
                - type: object
                  required:
                    - emoji
                  properties:
                    emoji:
                      type: string
                      description: Emoji string to apply.
      responses:
        <<: *commonResponses
        200:
          description: Reaction applied.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageActionResponse"
              examples:
                success:
                  value:
                    status: true
                    code: 1000
                    message: "Reaction applied"
                    results:
                      - sessionId: "main"
                        phone: "628111111111"
                        to: "62812xxxxxxx"
                        toJid: "62812xxxxxxx@s.whatsapp.net"
                        messageId: "3EB01234"
                        status: "reaction applied success"
  /api/v1/messages/{messageId}/action/unreaction:
    post:
      operationId: postMessagesMessageIdActionUnreaction
      tags:
        - Messages - Actions
      summary: Remove a reaction
      description: Remove reaction from a message.
      parameters:
        - $ref: "#/components/parameters/MessageId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              allOf:
                - $ref: "#/components/schemas/DestinationSelector"
      responses:
        <<: *commonResponses
        200:
          description: Reaction removed.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageActionResponse"
              examples:
                success:
                  value:
                    status: true
                    code: 1000
                    message: "Reaction removed"
                    results:
                      - sessionId: "main"
                        phone: "628111111111"
                        to: "62812xxxxxxx"
                        toJid: "62812xxxxxxx@s.whatsapp.net"
                        messageId: "3EB01234"
                        status: "reaction removed success"
  /api/v1/messages/{messageId}/action/delete:
    delete:
      operationId: deleteMessagesMessageIdActionDelete
      tags:
        - Messages - Actions
      summary: Delete a message
      description: Delete message for current account.
      parameters:
        - $ref: "#/components/parameters/MessageId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              allOf:
                - $ref: "#/components/schemas/DestinationSelector"
                - type: object
                  properties:
                    withMedia:
                      type: boolean
                      default: true
                      description: Delete the media blob when true.
      responses:
        <<: *commonResponses
        200:
          description: Message deleted for me.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageActionResponse"
              examples:
                success:
                  value:
                    status: true
                    code: 1000
                    message: "Message deleted for me"
                    results:
                      - sessionId: "main"
                        phone: "628111111111"
                        to: "62812xxxxxxx"
                        toJid: "62812xxxxxxx@s.whatsapp.net"
                        messageId: "3EB01234"
                        status: "message deleted success"
  /api/v1/messages/{messageId}/action/revoke:
    post:
      operationId: postMessagesMessageIdActionRevoke
      tags:
        - Messages - Actions
      summary: Revoke a message
      description: Revoke message for everyone.
      parameters:
        - $ref: "#/components/parameters/MessageId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              allOf:
                - $ref: "#/components/schemas/DestinationSelector"
                - type: object
                  properties:
                    deleteForMe:
                      type: boolean
                      default: false
                      description: Optionally delete for current account as well.
      responses:
        <<: *commonResponses
        200:
          description: Message revoked.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageActionResponse"
              examples:
                success:
                  value:
                    status: true
                    code: 1000
                    message: "Message revoked"
                    results:
                      - sessionId: "main"
                        phone: "628111111111"
                        to: "62812xxxxxxx"
                        toJid: "62812xxxxxxx@s.whatsapp.net"
                        messageId: "3EB01234"
                        status: "message revoked success"
  /api/v1/messages/{messageId}/action/edit:
    post:
      operationId: postMessagesMessageIdActionEdit
      tags:
        - Messages - Actions
      summary: Edit a message
      description: Edit a previously sent text message.
      parameters:
        - $ref: "#/components/parameters/MessageId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              allOf:
                - $ref: "#/components/schemas/DestinationSelector"
                - type: object
                  required:
                    - message
                  properties:
                    message:
                      type: string
                      description: Replacement text.
      responses:
        <<: *commonResponses
        200:
          description: Message edited.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageActionResponse"
              examples:
                success:
                  value:
                    status: true
                    code: 1000
                    message: "Message edited"
                    results:
                      - sessionId: "main"
                        phone: "628111111111"
                        to: "62812xxxxxxx"
                        toJid: "62812xxxxxxx@s.whatsapp.net"
                        messageId: "3EB01234"
                        status: "message edited success"
  /api/v1/messages/{messageId}/action/mark-as-read:
    post:
      operationId: postMessagesMessageIdActionMarkAsRead
      tags:
        - Messages - Actions
      summary: Mark a message as read
      description: Mark a specific message as read.
      parameters:
        - $ref: "#/components/parameters/MessageId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              allOf:
                - $ref: "#/components/schemas/DestinationSelector"
      responses:
        <<: *commonResponses
        200:
          description: Message read receipts emitted.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageActionResponse"
              examples:
                success:
                  value:
                    status: true
                    code: 1000
                    message: "Message marked as read"
                    results:
                      - sessionId: "main"
                        phone: "628111111111"
                        to: "62812xxxxxxx"
                        toJid: "62812xxxxxxx@s.whatsapp.net"
                        messageId: "3EB01234"
                        status: "message read success"
  /api/v1/messages/action/mute:
    post:
      operationId: postMessagesActionMute
      tags:
        - Messages - Actions
      summary: Mute a chat
      description: Mute chat notifications.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              allOf:
                - $ref: "#/components/schemas/DestinationSelector"
                - type: object
                  properties:
                    duration:
                      type: integer
                      description: Duration in minutes (1 - 43200).
                      default: 60
      responses:
        <<: *commonResponses
        200:
          description: Chat muted for requested period.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageActionResponse"
              examples:
                success:
                  value:
                    status: true
                    code: 1000
                    message: "Chat muted"
                    results:
                      - sessionId: "main"
                        phone: "628111111111"
                        to: "62812xxxxxxx"
                        toJid: "62812xxxxxxx@s.whatsapp.net"
                        messageId: "3EB01234"
                        status: "chat muted success"
  /api/v1/messages/action/unmute:
    post:
      operationId: postMessagesActionUnmute
      tags:
        - Messages - Actions
      summary: Unmute a chat
      description: Unmute chat notifications.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/DestinationSelector"
      responses:
        <<: *commonResponses
        200:
          description: Chat unmuted.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageActionResponse"
              examples:
                success:
                  value:
                    status: true
                    code: 1000
                    message: "Chat unmuted"
                    results:
                      - sessionId: "main"
                        phone: "628111111111"
                        to: "62812xxxxxxx"
                        toJid: "62812xxxxxxx@s.whatsapp.net"
                        messageId: "3EB01234"
                        status: "chat unmuted success"
  /api/v1/messages/action/archive:
    post:
      operationId: postMessagesActionArchive
      tags:
        - Messages - Actions
      summary: Archive a chat
      description: Archive chat.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/DestinationSelector"
      responses:
        <<: *commonResponses
        200:
          description: Chat archived.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageActionResponse"
              examples:
                success:
                  value:
                    status: true
                    code: 1000
                    message: "Chat archived"
                    results:
                      - sessionId: "main"
                        phone: "628111111111"
                        to: "62812xxxxxxx"
                        toJid: "62812xxxxxxx@s.whatsapp.net"
                        messageId: "3EB01234"
                        status: "chat archived success"
  /api/v1/messages/action/unarchive:
    post:
      operationId: postMessagesActionUnarchive
      tags:
        - Messages - Actions
      summary: Unarchive a chat
      description: Remove chat from archive.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/DestinationSelector"
      responses:
        <<: *commonResponses
        200:
          description: Chat unarchived.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageActionResponse"
              examples:
                success:
                  value:
                    status: true
                    code: 1000
                    message: "Chat unarchived"
                    results:
                      - sessionId: "main"
                        phone: "628111111111"
                        to: "62812xxxxxxx"
                        toJid: "62812xxxxxxx@s.whatsapp.net"
                        messageId: "3EB01234"
                        status: "chat unarchived success"
  /api/v1/messages/action/clear-all:
    delete:
      operationId: deleteMessagesActionClearAll
      tags:
        - Messages - Actions
      summary: Clear chat history
      description: Clear chat history for current user.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/DestinationSelector"
      responses:
        <<: *commonResponses
        200:
          description: Chat cleared.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageActionResponse"
              examples:
                success:
                  value:
                    status: true
                    code: 1000
                    message: "Chat cleared"
                    results:
                      - sessionId: "main"
                        phone: "628111111111"
                        to: "62812xxxxxxx"
                        toJid: "62812xxxxxxx@s.whatsapp.net"
                        messageId: "3EB01234"
                        status: "chat cleared success"
  /api/v1/chats:
    get:
      operationId: getChats
      tags:
        - Chats
      summary: List chats
      description: Reads from the live store when available and falls back to persisted sync tables.
      parameters:
        - $ref: "#/components/parameters/SessionIdQuery"
        - in: query
          name: limit
          description: "(optional) Number of chats per page."
          schema:
            type: integer
            default: 10
            minimum: 1
            maximum: 200
        - in: query
          name: offset
          description: "(optional) Offset for pagination."
          schema:
            type: integer
            default: 0
            minimum: 0
        - in: query
          name: hasMedia
          description: "(optional) When true, only chats with media are returned."
          schema:
            type: boolean
            default: false
        - in: query
          name: sortBy
          description: "(optional) Field used to order the chat list."
          schema:
            type: string
            enum: [lastMessage, unreadCount, name]
            default: lastMessage
        - in: query
          name: sortOrder
          description: "(optional) Direction of the chat ordering."
          schema:
            type: string
            enum: [asc, desc]
            default: desc
        - in: query
          name: search
          description: "(optional) Filter chats by name or JID."
          schema:
            type: string
      responses:
        <<: *commonResponses
        200:
          description: Chat collection with pagination info.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ChatListResponse"
  /api/v1/chats/{chatId}/messages:
    get:
      operationId: getChatsChatIdMessages
      tags:
        - Chats
      summary: List chat messages
      description: List messages inside a chat.
      parameters:
        - $ref: "#/components/parameters/ChatId"
        - $ref: "#/components/parameters/SessionIdQuery"
        - in: query
          name: limit
          description: "(optional) Number of messages per page."
          schema:
            type: integer
            default: 20
            minimum: 1
            maximum: 200
        - in: query
          name: offset
          description: "(optional) Offset for pagination."
          schema:
            type: integer
            default: 0
            minimum: 0
        - in: query
          name: startTime
          description: "(optional) Only include messages newer than this UNIX timestamp expressed in milliseconds."
          schema:
            type: integer
        - in: query
          name: endTime
          description: "(optional) Only include messages older than this UNIX timestamp expressed in milliseconds."
          schema:
            type: integer
        - in: query
          name: mediaOnly
          description: "(optional) When true, only media messages are returned."
          schema:
            type: boolean
        - in: query
          name: isFromMe
          description: "(optional) Filter messages sent by the current account."
          schema:
            type: boolean
        - in: query
          name: search
          description: "(optional) Filter messages by text."
          schema:
            type: string
      responses:
        <<: *commonResponses
        200:
          description: Messages plus pagination info.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ChatMessagesResponse"
  /api/v1/chats/{chatId}/read:
    post:
      operationId: postChatsChatIdRead
      tags:
        - Chats
      summary: Mark chat as read
      description: Mark chat as read.
      parameters:
        - $ref: "#/components/parameters/ChatId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ChatReadRequest"
            example:
              sessionId: "main"
      responses:
        <<: *commonResponses
        200:
          description: Read receipt summary.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ChatReadResponse"
  /api/v1/chats/{chatId}/pin:
    post:
      operationId: postChatsChatIdPin
      tags:
        - Chats
      summary: Pin or unpin a chat
      description: Pin or unpin a chat.
      parameters:
        - $ref: "#/components/parameters/ChatId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ChatPinRequest"
            example:
              sessionId: "main"
              pin: true
      responses:
        <<: *commonResponses
        200:
          description: Pin status payload.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ChatPinResponse"
  /api/v1/chats/{chatId}/messages/{messageId}/pin:
    post:
      operationId: postChatsChatIdMessagesMessageIdPin
      tags:
        - Chats
      summary: Pin or unpin a message
      description: Pin or unpin a message within a chat.
      parameters:
        - $ref: "#/components/parameters/ChatId"
        - $ref: "#/components/parameters/MessageId"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ChatPinRequest"
            example:
              sessionId: "main"
              pin: true
      responses:
        <<: *commonResponses
        200:
          description: Message pin status payload.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ChatPinResponse"
  /api/v1/groups:
    get:
      operationId: getGroups
      tags:
        - Groups
      summary: List groups
      description: List groups for the active session.
      parameters:
        - $ref: "#/components/parameters/SessionIdQuery"
      responses:
        <<: *commonResponses
        200:
          description: Groups with high level metadata and counts.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GroupListResponse"
  /api/v1/group/picture:
    get:
      operationId: getGroupPicture
      tags:
        - Groups
      summary: Get group picture
      description: Get group picture URLs.
      parameters:
        - $ref: "#/components/parameters/SessionIdQuery"
        - $ref: "#/components/parameters/GroupIdQuery"
      responses:
        <<: *commonResponses
        200:
          description: Picture URLs with variants.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GroupPictureResponse"
    post:
      operationId: postGroupPicture
      tags:
        - Groups
      summary: Set group picture
      description: Set group picture.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GroupPictureSetRequest"
            example:
              sessionId: "main"
              groupId: "1203@g.us"
              picture: "data:image/png;base64,..."
      responses:
        <<: *commonResponses
        200:
          description: Picture upload summary.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GroupMutationResponse"
    delete:
      operationId: deleteGroupPicture
      tags:
        - Groups
      summary: Delete group picture
      description: Remove group picture.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GroupSelector"
      responses:
        <<: *commonResponses
        200:
          description: Picture removed.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GroupDefaultResponse"
  /api/v1/group/name:
    post:
      operationId: postGroupName
      tags:
        - Groups
      summary: Rename a group
      description: Update group name.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GroupNameUpdateRequest"
            example:
              sessionId: "main"
              groupId: "1203@g.us"
              groupName: "Team Squad"
      responses:
        <<: *commonResponses
        200:
          description: Name update summary.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GroupNameUpdateResponse"
  /api/v1/group/description:
    post:
      operationId: postGroupDescription
      tags:
        - Groups
      summary: Update group description
      description: Update group description.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GroupDescriptionUpdateRequest"
            example:
              sessionId: "main"
              groupId: "1203@g.us"
              groupDescription: "Internal chat"
      responses:
        <<: *commonResponses
        200:
          description: Description update summary.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GroupDescriptionUpdateResponse"
  /api/v1/group/locked:
    post:
      operationId: postGroupLocked
      tags:
        - Groups
      summary: Set edit permissions
      description: Toggle edit info permission.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GroupLockedRequest"
            example:
              sessionId: "main"
              groupId: "1203@g.us"
              locked: true
      responses:
        <<: *commonResponses
        200:
          description: Lock flag updated.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GroupDefaultResponse"
  /api/v1/group/announcement:
    post:
      operationId: postGroupAnnouncement
      tags:
        - Groups
      summary: Set announcement mode
      description: Toggle announcement only mode.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GroupAnnouncementRequest"
            example:
              sessionId: "main"
              groupId: "1203@g.us"
              announcement: true
      responses:
        <<: *commonResponses
        200:
          description: Announcement flag updated.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GroupDefaultResponse"
  /api/v1/group/invite:
    get:
      operationId: getGroupInvite
      tags:
        - Groups
      summary: Get invite link
      description: Fetch invite link for a group.
      parameters:
        - $ref: "#/components/parameters/SessionIdQuery"
        - $ref: "#/components/parameters/GroupIdQuery"
      responses:
        <<: *commonResponses
        200:
          description: Invite link payload.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GroupInviteResponse"
              example:
                status: true
                code: 1000
                message: "Invite link fetched"
                results:
                  - sessionId: main
                    phone: "6281234567890"
                    groupId: "120363111111111111@g.us"
                    inviteLink: "https://chat.whatsapp.com/abcdef"

  /api/v1/group/invite/revoke:
    post:
      operationId: postGroupInviteRevoke
      tags:
        - Groups
      summary: Reset invite link
      description: Revoke and regenerate invite link.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GroupSelector"
      responses:
        <<: *commonResponses
        200:
          description: Invite revocation summary.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GroupInviteResponse"
              example:
                status: true
                code: 1000
                message: Invite link revoked
                results:
                  - sessionId: main
                    phone: "6281234567890"
                    groupId: "120363111111111111@g.us"
                    inviteLink: "https://chat.whatsapp.com/abcdef"
                    status: "success revoke invite link"
  /api/v1/group/join-via-link:
    post:
      operationId: postGroupJoinViaLink
      tags:
        - Groups
      summary: Join via invite link
      description: Join a group using an invite link or code.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GroupJoinViaLinkRequest"
            example:
              sessionId: "main"
              inviteLink: "https://chat.whatsapp.com/ABC123"
      responses:
        <<: *commonResponses
        200:
          description: Join attempt status; response notes when approval is still pending.
          content:
            application/json:
              schema:
                properties:
                  status:
                    type: boolean
                    description: Indicates if the request was processed.
                  code:
                    type: integer
                    description: Response code indicating result.
                  message:
                    type: string
                    description: Summary message.
                  results:
                    type: array
                    items:
                      type: object
                      properties:
                        sessionId:
                          type: string
                          description: Session identifier.
                        phone:
                          type: string
                          description: Phone number used to join.
                        status:
                          type: string
                          description: Join status message.
              examples:
                joined:
                  value:
                    status: true
                    code: 1000
                    message: "Joined group via link"
                    results:
                      - sessionId: main
                        phone: "6281234567890"
                        status: "success joined group"
                pending:
                  value:
                    status: true
                    code: 1001
                    message: "Joined group via link"
                    results:
                      - sessionId: main
                        phone: "6281234567890"
                        status: "pending approval to join"

    get:
      operationId: getGroupJoinViaLink
      tags:
        - Groups
      summary: Preview invite link
      description: Inspect invite link without joining.
      parameters:
        - $ref: "#/components/parameters/SessionIdQuery"
        - in: query
          name: inviteLink
          required: true
          schema:
            type: string
      responses:
        <<: *commonResponses
        200:
          description: Metadata for the group behind the link.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GroupInvitePreview"
  /api/v1/group/participants:
    get:
      operationId: getGroupParticipants
      tags:
        - Groups
      summary: List participants
      description: List participants with admin flags.
      parameters:
        - $ref: "#/components/parameters/SessionIdQuery"
        - $ref: "#/components/parameters/GroupIdQuery"
      responses:
        <<: *commonResponses
        200:
          description: Participant roster.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GroupParticipantsResponse"
  /api/v1/group/participants/add:
    post:
      operationId: postGroupParticipantsAdd
      tags:
        - Groups
      summary: Add participants
      description: Add participants.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              allOf:
                - $ref: "#/components/schemas/GroupParticipantsUpdate"
      responses:
        <<: *commonResponses
        200:
          description: Add attempt summary.
          content:
            application/json:
              schema:
                properties:
                  status:
                    type: boolean
                    description: Indicates if the request was processed.
                  code:
                    type: integer
                    description: Response code indicating result.
                  message:
                    type: string
                    description: Summary message.
                  results:
                    type: array
                    items:
                      type: object
                      properties:
                        sessionId:
                          type: string
                          description: Session identifier.
                        phone:
                          type: string
                          description: Phone number of the participant.
                        groupId:
                          type: string
                          description: Group identifier.
                        addedParticipants:
                          type: array
                          items:
                            type: string
                          description: Phone number of the added participant.
                        failedToAdd:
                          type: array
                          items:
                            type: string
                          description: Reason for failure if addition failed.
                        status:
                          type: string
                          description: Addition status message.
              example:
                status: true
                code: 1000
                message: "Participants added"
                results:
                  - sessionId: main
                    phone: "6281234567890"
                    groupId: "120363111111111111@g.us"
                    addedParticipants:
                      - "6281987654321"
                      - "6281123456789"
                    failedToAdd: []
                    status: "success"
  /api/v1/group/participants/remove:
    delete:
      operationId: deleteGroupParticipantsRemove
      tags:
        - Groups
      summary: Remove participants
      description: Remove participants. Must be an admin.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              allOf:
                - $ref: "#/components/schemas/GroupParticipantsUpdate"
      responses:
        <<: *commonResponses
        200:
          description: Remove attempt summary.
          content:
            application/json:
              schema:
                properties:
                  status:
                    type: boolean
                    description: Indicates if the request was processed.
                  code:
                    type: integer
                    description: Response code indicating result.
                  message:
                    type: string
                    description: Summary message.
                  results:
                    type: array
                    items:
                      type: object
                      properties:
                        sessionId:
                          type: string
                          description: Session identifier.
                        phone:
                          type: string
                          description: Phone number of the participant.
                        groupId:
                          type: string
                          description: Group identifier.
                        removedParticipants:
                          type: array
                          items:
                            type: string
                          description: Phone number of the removed participant.
                        failedToRemove:
                          type: array
                          items:
                            type: string
                          description: Reason for failure if removal failed.
                        status:
                          type: string
                          description: Removal status message.
              example:
                status: true
                code: 1000
                message: "Participants removed"
                results:
                  - sessionId: main
                    phone: "6281234567890"
                    groupId: "120363111111111111@g.us"
                    removedParticipants:
                      - "6281987654321"
                      - "6281123456789"
                    failedToRemove: []
                    status: "success"

  /api/v1/group/participants/promote:
    post:
      operationId: postGroupParticipantsPromote
      tags:
        - Groups
      summary: Promote participants
      description: Promote participants to admin.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              allOf:
                - $ref: "#/components/schemas/GroupParticipantsUpdate"
      responses:
        <<: *commonResponses
        200:
          description: Promote attempt summary.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GroupParticipantsPromoteDemoteResponse"

  /api/v1/group/participants/demote:
    post:
      operationId: postGroupParticipantsDemote
      tags:
        - Groups
      summary: Demote participants
      description: Demote participants from admin.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              allOf:
                - $ref: "#/components/schemas/GroupParticipantsUpdate"
      responses:
        <<: *commonResponses
        200:
          description: Demote attempt summary.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GroupParticipantsPromoteDemoteResponse"
  /api/v1/group/participants/requests:
    get:
      operationId: getGroupParticipantsRequests
      tags:
        - Groups
      summary: List join requests
      description: Pending join requests awaiting approval.
      parameters:
        - $ref: "#/components/parameters/SessionIdQuery"
        - $ref: "#/components/parameters/GroupIdQuery"
      responses:
        <<: *commonResponses
        200:
          description: Join requests with method and timestamp.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GroupJoinRequestsResponse"
  /api/v1/group/participants/request/approve:
    post:
      operationId: postGroupParticipantsRequestApprove
      tags:
        - Groups
      summary: Approve join requests
      description: Approve join requests.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              allOf:
                - $ref: "#/components/schemas/GroupParticipantsUpdate"
      responses:
        <<: *commonResponses
        200:
          description: Approvals summary.
          content:
            application/json:
              schema:
                properties:
                  status:
                    type: boolean
                    description: Indicates if the request was processed.
                  code:
                    type: integer
                    description: Response code indicating result.
                  message:
                    type: string
                    description: Summary message.
                  results:
                    type: array
                    items:
                      type: object
                      properties:
                        sessionId:
                          type: string
                          description: Session identifier.
                        phone:
                          type: string
                          description: Phone number of the participant.
                        groupId:
                          type: string
                          description: Group identifier.
                        approvedParticipants:
                          type: array
                          items:
                            type: string
                          description: Phone number of the approved participant.
                        failedToApprove:
                          type: array
                          items:
                            type: string
                          description: Reason for failure if approval failed.
                        status:
                          type: string
                          description: Approval status message.
  /api/v1/group/participants/request/reject:
    post:
      operationId: postGroupParticipantsRequestReject
      tags:
        - Groups
      summary: Reject join requests
      description: Reject join requests.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              allOf:
                - $ref: "#/components/schemas/GroupParticipantsUpdate"
      responses:
        <<: *commonResponses
        200:
          description: Rejections summary.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GroupParticipantsPromoteDemoteResponse"

  /api/v1/group/leave:
    post:
      operationId: postGroupLeave
      tags:
        - Groups
      summary: Leave a group
      description: Leave a group.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GroupSelector"
      responses:
        <<: *commonResponses
        200:
          description: Leave status.
          content:
            application/json:
              schema:
                properties:
                  status:
                    type: boolean
                    description: Indicates if the request was processed.
                  code:
                    type: integer
                    description: Response code indicating result.
                  message:
                    type: string
                    description: Summary message.
                  results:
                    type: array
                    items:
                      type: object
                      properties:
                        sessionId:
                          type: string
                          description: Session identifier.
                        phone:
                          type: string
                          description: Phone number of the participant.
                        groupId:
                          type: string
                          description: Group identifier.
                        status:
                          type: string
                          description: Leave status message.
                example:
                  status: true
                  code: 1000
                  message: "Left group"
                  results:
                    - sessionId: main
                      phone: "6281234567890"
                      groupId: "120363111111111111@g.us"
                      status: "success leave"
  /api/v1/group/create:
    post:
      operationId: postGroupCreate
      tags:
        - Groups
      summary: Create a group
      description: Create a new group.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GroupCreateRequest"
            example:
              sessionId: "main"
              groupName: "New Squad"
              participants:
                - "6281234567890"
      responses:
        <<: *commonResponses
        200:
          description: Group create status with new id.
          content:
            application/json:
              schema:
                properties:
                  status:
                    type: boolean
                    description: Indicates if the request was processed.
                  code:
                    type: integer
                    description: Response code indicating result.
                  message:
                    type: string
                    description: Summary message.
                  results:
                    type: array
                    items:
                      type: object
                      properties:
                        sessionId:
                          type: string
                          description: Session identifier.
                        phone:
                          type: string
                          description: Phone number of the creator.
                        groupId:
                          type: string
                          description: Newly created group identifier.
              example:
                status: true
                code: 1000
                message: "Group created"
                results:
                  - sessionId: main
                    phone: "6281234567890"
                    groupId: "1234567890@g.us"
  /api/v1/group/delete:
    delete:
      operationId: deleteGroupDelete
      tags:
        - Groups
      summary: Delete a group
      description: Delete or disband a group. Caller must be an admin.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GroupSelector"
      responses:
        <<: *commonResponses
        200:
          description: Delete sequence summary with participant removals.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GroupDeleteResponse"
  /api/v1/group/info:
    get:
      operationId: getGroupInfo
      tags:
        - Groups
      summary: Get group info
      description: Fetch full group metadata.
      parameters:
        - $ref: "#/components/parameters/SessionIdQuery"
        - $ref: "#/components/parameters/GroupIdQuery"
      responses:
        <<: *commonResponses
        200:
          description: Enriched group info including participants and settings.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GroupInfoResponse"
  /api/v1/profile/info:
    get:
      operationId: getProfileInfo
      tags:
        - Profiles
      summary: Get profile info
      description: Current account profile summary.
      parameters:
        - $ref: "#/components/parameters/SessionIdQuery"
      responses:
        <<: *commonResponses
        200:
          description: Profile summary.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProfileInfoResponse"
  /api/v1/profile/picture:
    get:
      operationId: getProfilePicture
      tags:
        - Profiles
      summary: Get profile picture
      description: Current account avatar URLs.
      parameters:
        - $ref: "#/components/parameters/SessionIdQuery"
      responses:
        <<: *commonResponses
        200:
          description: Profile picture info.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProfilePictureResponse"
    post:
      operationId: postProfilePicture
      tags:
        - Profiles
      summary: Set profile picture
      description: Set or replace the current account avatar.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ProfilePictureSetRequest"
            example:
              sessionId: "main"
              picture: "data:image/png;base64,..."
      responses:
        <<: *commonResponses
        200:
          description: Updated profile picture payload.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProfilePictureResponse"
    delete:
      operationId: deleteProfilePicture
      tags:
        - Profiles
      summary: Delete profile picture
      description: Remove the current account avatar.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SessionSelector"
      responses:
        <<: *commonResponses
        200:
          description: Profile picture removed (result is null).
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ApiEnvelope"
              example:
                status: true
                code: 1000
                message: Profile picture removed
                results: []
  /api/v1/profile/privacy:
    get:
      operationId: getProfilePrivacy
      tags:
        - Profiles
      summary: Get privacy settings
      description: Privacy configuration for the account.
      parameters:
        - $ref: "#/components/parameters/SessionIdQuery"
      responses:
        <<: *commonResponses
        200:
          description: Privacy controls such as read receipts and last seen.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProfilePrivacyResponse"
  /api/v1/profile/list-contacts:
    get:
      operationId: getProfileListContacts
      tags:
        - Profiles
      summary: List contacts
      description: List contacts and optionally merge from groups.
      parameters:
        - $ref: "#/components/parameters/SessionIdQuery"
        - in: query
          name: type
          description: "(optional) Source for the contact listing."
          schema:
            type: string
            enum: [contacts, groups]
            default: contacts
        - in: query
          name: deep
          description: "(optional) When true, include profile pictures, status text, and business metadata for every contact."
          schema:
            type: boolean
            default: false
        - in: query
          name: groupIds
          description: "(optional) CSV list of group IDs; only applies when `type = groups`."
          schema:
            type: string
        - in: query
          name: limit
          description: "(optional) Maximum number of contacts returned (defaults to 15)."
          schema:
            type: integer
            minimum: 1
            maximum: 1000
            default: 15
      responses:
        <<: *commonResponses
        200:
          description: Contacts with optional avatars and aggregated metadata.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProfileContactsResponse"
              examples:
                deepFalse:
                  summary: Basic contact listing (deep=false)
                  value:
                    status: true
                    code: 1000
                    message: Contacts (deep=false)
                    result:
                      phone: "628111111111"
                      data:
                        - jid: "62812@s.whatsapp.net"
                          phone: "62812"
                          name: "Customer"
                deepTrue:
                  summary: Enriched contact listing (deep=true)
                  value:
                    status: true
                    code: 1000
                    message: Contacts (deep=true)
                    result:
                      phone: "628111111111"
                      data:
                        - jid: "62812@s.whatsapp.net"
                          phone: "62812"
                          name: "Customer"
                          verifiedName: "Customer Store"
                          picture:
                            full: "https://mmg.whatsapp.net/d/f/ABC123.jpg"
                            preview: "https://mmg.whatsapp.net/d/f/ABC123-thumb.jpg"
                          about: "Fast response"
                          businessProfile:
                            description: "Retail shop"
                            email: "hi@example.com"
  /api/v1/profile/on-whatsapp:
    get:
      operationId: getProfileOnWhatsapp
      tags:
        - Profiles
      summary: Check WhatsApp numbers
      description: Check whether numbers exist on WhatsApp.
      parameters:
        - $ref: "#/components/parameters/SessionIdQuery"
        - in: query
          name: checkNumbers
          required: true
          description: "One or more comma separated numbers to verify."
          schema:
            type: string
        - in: query
          name: deep
          description: "(optional) When true, include profile pictures, status text, and business metadata for numbers that exist on WhatsApp."
          schema:
            type: boolean
            default: false
      responses:
        <<: *commonResponses
        200:
          description: WhatsApp availability results.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProfileWhoisResponse"
              examples:
                shallow:
                  summary: Lookup without deep enrichment
                  value:
                    status: true
                    code: 1000
                    message: Lookup complete
                    results:
                      - data:
                          jid: "62812@s.whatsapp.net"
                          phone: "62812"
                          isOnWhatsApp: true
                deep:
                  summary: Lookup with detailed enrichment
                  value:
                    status: true
                    code: 1000
                    message: Lookup complete
                    results:
                      - data:
                          jid: "62812@s.whatsapp.net"
                          phone: "62812"
                          isOnWhatsApp: true
                          picture:
                            full: "https://mmg.whatsapp.net/d/f/ABC123.jpg"
                            preview: "https://mmg.whatsapp.net/d/f/ABC123-thumb.jpg"
                          about: "Fast response"
                          businessProfile:
                            description: "Retail shop"
  /api/v1/profile/business-profile:
    get:
      operationId: getProfileBusinessProfile
      tags:
        - Profiles
      summary: Get business profile info
      description: Fetch business profile metadata for numbers.
      parameters:
        - $ref: "#/components/parameters/SessionIdQuery"
        - in: query
          name: checkNumbers
          description: One or more comma separated numbers to look up. Accepts a single number or multiple numbers (e.g., `62812` or `62812,62813`).
          required: true
          schema:
            type: string
      responses:
        <<: *commonResponses
        200:
          description: Business profile summary; response shape matches the number of inputs.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProfileBusinessResponse"
  /api/v1/server/ping:
    get:
      operationId: getServerPing
      tags:
        - Server
      summary: Ping the API
      description: Returns server timestamps plus process latency.
      responses:
        <<: *commonResponses
        200:
          description: Pong with metadata.
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/ApiEnvelope"
                  - type: object
                    properties:
                      results:
                        type: array
                        items:
                          $ref: "#/components/schemas/ServerPing"
              examples:
                Example response:
                  summary: Ping reply
                  value:
                    status: true
                    code: 1000
                    message: Server is alive
                    results:
                      - ping: pong
                        latencyMs: 12.4
                        serverTime: "2024-05-01 15:30:00"
                        serverTimeISO: "2024-05-01T15:30:00.000+07:00"
                        serverTimeUTC: "2024-05-01T08:30:00.000Z"
                        timezone: Asia/Jakarta
                        timezoneLocale: id-ID
                        timestamp: 1714552200
  /api/v1/server/info:
    get:
      operationId: getServerInfo
      tags:
        - Server
      summary: Get runtime info
      description: Detailed process, system, disk, IO, and session statistics. Requires admin key.
      security:
        - ApiKeyAuth: []
      responses:
        <<: *commonResponses
        200:
          description: Server info envelope.
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/ApiEnvelope"
                  - type: object
                    properties:
                      results:
                        type: array
                        items:
                          $ref: "#/components/schemas/ServerInfo"
              examples:
                Example response:
                  summary: Runtime snapshot
                  value:
                    status: true
                    code: 1000
                    message: Server information fetched
                    results:
                      - serverName: WARest Primary
                        serverVersion: 1.3.41
                        environment: production
                        uptimeSeconds: 86400
                        system:
                          platform: linux
                          release: "5.15.0"
                        cpu:
                          cores: 4
                          usagePercent: 32.5
                        memory:
                          totalMB: 4096
                          usedMB: 2034
                          usagePercent: 49.7
                        process:
                          pid: 1234
                          nodeVersion: "20.11.1"
                          uptimeSeconds: 3600
                        disk:
                          - mount: /
                            usedPercent: 45.1
                        loadAverage: [0.51, 0.44, 0.32]
                        timezone: Asia/Jakarta
                        runtime:
                          - name: node
                            version: "20.11.1"
                        sessions:
                          active: 2
                        timestamp: 1714552200
  /api/v1/server/healthz:
    get:
      operationId: getServerHealthz
      tags:
        - Server
      summary: Check dependency health
      description: Verifies database, cache, storage, filesystem, FFmpeg, Sharp, and queue integrations.
      security:
        - ApiKeyAuth: []
      responses:
        <<: *commonResponses
        200:
          description: Health status indicating healthy or degraded states.
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/ApiEnvelope"
                  - type: object
                    properties:
                      results:
                        type: array
                        items:
                          $ref: "#/components/schemas/ServerHealth"
              examples:
                Example response:
                  summary: Health check
                  value:
                    status: true
                    code: 1000
                    message: All services healthy
                    results:
                      - status: healthy
                        serviceName: WARest API
                        serviceVersion: 1.3.41
                        uptime: "1d 2h 5m"
                        services:
                          database:
                            status: ok
                            databaseType: sqlite
                          cache:
                            status: ok
                            driver: memory
                          storage:
                            status: ok
                          messageQueue: ok
                          fileSystem: ok
                          ffmpeg: ok
                          sharp: ok
                        timestamp: 1714552200
  /api/v1/server/cpu-history:
    get:
      operationId: getServerCpuHistory
      tags:
        - Server
      summary: Get CPU history
      description: In memory sampler covering up to thirty days depending on uptime.
      security:
        - ApiKeyAuth: []
      parameters:
        - in: query
          name: period
          description: Time window to aggregate.
          schema:
            type: string
            enum: [1h, 6h, 12h, 24h, 7d, 30d]
            default: 1h
        - in: query
          name: interval
          description: Sample granularity.
          schema:
            type: string
            enum: [1m, 5m, 15m, 30m, 1h]
            default: 5m
      responses:
        <<: *commonResponses
        200:
          description: Array of usage samples.
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/ApiEnvelope"
                  - type: object
                    properties:
                      results:
                        type: array
                        items:
                          $ref: "#/components/schemas/ServerCpuHistory"
              examples:
                Example response:
                  summary: CPU samples
                  value:
                    status: true
                    code: 1000
                    message: CPU history fetched
                    results:
                      - period: 1h
                        interval: 5m
                        data:
                          - timestamp: 1714551900
                            usagePercent: 24.5
                          - timestamp: 1714552200
                            usagePercent: 31.2
                        averageUsagePercent: 27.8
                        maxUsagePercent: 42.3
                        timestamp: 1714552200
  /api/v1/server/ready:
    get:
      operationId: getServerReady
      tags:
        - Server
      summary: Check readiness
      description: Ensures required integrations respond before routing traffic.
      security:
        - ApiKeyAuth: []
      responses:
        <<: *commonResponses
        200:
          description: Component readiness flags.
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/ApiEnvelope"
                  - type: object
                    properties:
                      results:
                        type: array
                        items:
                          $ref: "#/components/schemas/ServerReady"
              examples:
                Example response:
                  summary: Ready signal
                  value:
                    status: true
                    code: 1000
                    message: Server is ready for traffic
                    results:
                      - ready: true
                        dependencies:
                          db: true
                          redis: true
                          storage: true
                        timestamp: 1714552200
  /api/v1/server/restart:
    post:
      operationId: postServerRestart
      tags:
        - Server
      summary: Restart the server
      description: Schedules a process restart using the runtime auto detection for Node, nodemon, PM2, Docker, and similar runtimes.
      security:
        - ApiKeyAuth: []
      responses:
        <<: *commonResponses
        200:
          description: Restart scheduled.
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/ApiEnvelope"
                  - type: object
                    properties:
                      results:
                        type: array
                        items:
                          $ref: "#/components/schemas/ServerRestart"
              examples:
                RestartQueued:
                  summary: Restart scheduled
                  value:
                    status: true
                    code: 1000
                    message: "Restart scheduled via nodemon strategy"
                    results:
                      - restartInitiated: true
                        scheduledAt: "2024-05-01T08:30:05.000Z"
                        restartStrategy: nodemon
                        timestamp: 1714552205
                AlreadyPending:
                  summary: Restart already pending
                  value:
                    status: true
                    code: 1005
                    message: "A restart is already pending"
                    results:
                      - restartInitiated: false
                        scheduledAt: "2024-05-01T08:00:00.000Z"
                        restartStrategy: nodemon
                        timestamp: 1714552000
  /api/v1/server/restart/scheduled:
    post:
      operationId: postServerRestartScheduled
      tags:
        - Server
      summary: Schedule restarts
      description: Persists the restart schedule and reuses runtime auto detection.
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ServerRestartScheduleRequest"
            example:
              schedule: "02:30"
      responses:
        <<: *commonResponses
        200:
          description: Scheduled restart metadata or null when cleared.
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/ApiEnvelope"
                  - type: object
                    properties:
                      results:
                        type: array
                        items:
                          $ref: "#/components/schemas/ServerRestartSchedule"
              examples:
                Example response:
                  summary: Schedule stored
                  value:
                    status: true
                    code: 1000
                    message: "Restart scheduled daily at 02:00 (Asia/Jakarta)"
                    results:
                      - scheduledRestart: "02:00"
                        timezone: Asia/Jakarta
                        nextRestartAt: "2024-05-02T02:00:00.000+07:00"
                        timestamp: 1714552200
  /api/v1/misc/convert-string-toqr/{target}:
    post:
      operationId: postMiscConvertStringTarget
      tags:
        - Misc
      summary: Convert string to QR friendly output
      description: Convert a string into a QR-friendly target. `base64` returns a PNG data URI, while image targets (`svg`, `png`, `jpg`, `jpeg`, `webp`) return a hosted file URL to the generated asset. Image outputs are stored temporarily (default 5 minutes) and automatically purged.
      parameters:
        - in: path
          name: target
          required: true
          description: "Output format (base64, svg, png, jpg, jpeg, or webp)."
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MiscConvertStringRequest"
            example:
              string: "Hello QR"
      responses:
        <<: *commonResponses
        200:
          description: Converted payload or stored file reference.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MiscConvertResponse"
              examples:
                base64Example:
                  summary: Converted to base64 data URI
                  value:
                    status: true
                    code: 1000
                    message: "String converted to QR-friendly PNG (base64 data URI)"
                    results:
                      - data: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA..."
                        meta:
                          mode: dataurl
                          mimeType: image/png
                          format: png
                pngExample:
                  summary: Converted to PNG
                  value:
                    status: true
                    code: 1000
                    message: "String converted to QR-friendly PNG format"
                    results:
                      - data: "https://cdn.warest.app/misc/2024-05-02/qr-string-x9nq2.png"
                        meta:
                          mode: url
                          mimeType: image/png
                          size: 24567
                          key: "misc/2024-05-02/qr-string-x9nq2.png"
                          url: "https://cdn.warest.app/misc/2024-05-02/qr-string-x9nq2.png"
                          temporary: true
                          expiresAt: "2024-05-02T07:05:00.000Z"
                svgExample:
                  summary: Converted to SVG
                  value:
                    status: true
                    code: 1000
                    message: "String converted to QR-friendly SVG format"
                    results:
                      - data: "https://cdn.warest.app/misc/2024-05-02/qr-string-svg-p92d.svg"
                        meta:
                          mode: url
                          mimeType: image/svg+xml
                          size: 5021
                          key: "misc/2024-05-02/qr-string-svg-p92d.svg"
                          url: "https://cdn.warest.app/misc/2024-05-02/qr-string-svg-p92d.svg"
                          temporary: true
                          expiresAt: "2024-05-02T07:05:00.000Z"
  /api/v1/misc/whatsapp/file-decrypt:
    post:
      operationId: postMiscWhatsappFileDecrypt
      tags:
        - Misc
      summary: Decrypt WhatsApp media
      description: Decrypt a WhatsApp media payload with mediaKey.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MiscWhatsappFileDecryptRequest"
            example:
              mediaKey: "base64=="
              file: "base64=="
      responses:
        <<: *commonResponses
        200:
          description: Decrypted media in requested output mode.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MiscBinaryResponse"
              examples:
                success:
                  summary: Media decrypted
                  value:
                    status: true
                    code: 1000
                    message: "File decrypted"
                    results:
                      - data: "data:image/jpeg;base64,/9j/4AAQSk..."
                        meta:
                          mimeType: image/jpeg
                          size: 24567
                          mode: base64
  /api/v1/misc/whatsapp/poll-update-vote:
    post:
      operationId: postMiscWhatsappPollUpdateVote
      tags:
        - Misc
      summary: Decrypt poll votes
      description: Decrypts a Baileys `pollUpdateVote` node. Provide `sessionId` so the server can load the poll secret (or override it with `pollEncKey`).
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MiscWhatsappPollUpdateVoteRequest"
            example:
              sessionId: main
              pollUpdateVote:
                pollCreationMessageKey:
                  id: "3EB0C2C010FFEE0"
                  remoteJid: "120363111111111111@g.us"
                  participant: "6281122334455@s.whatsapp.net"
                key:
                  participant: "6281133344455@s.whatsapp.net"
                vote:
                  encPayload: "Z3VZX0Jhc2U2NA=="
                  encIv: "YWJjZGVmZ2hpamts"
      responses:
        <<: *commonResponses
        200:
          description: Voter JID and voted option indexes.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MiscPollDecryptResponse"
              examples:
                success:
                  summary: Poll decrypted
                  value:
                    status: true
                    code: 1000
                    message: "Poll vote decrypted"
                    results:
                      - messageKey:
                          id: "3EB0C2C010FFEE0"
                          remoteJid: "120363111111111111@g.us"
                          participant: "6281122334455@s.whatsapp.net"
                        pollCreatorJid: "6281122334455@s.whatsapp.net"
                        voterJid: "6281133344455@s.whatsapp.net"
                        votedOptionIndexes: [1]
                        votedOptionNames: ["Green"]
                        pollTitle: "What color should we pick?"
                        selectableOptionsCount: 1
                        pollOptions:
                          - index: 0
                            name: Red
                          - index: 1
                            name: Green
                          - index: 2
                            name: Blue
                        timestampMs: 1714552200123
  /api/v1/misc/whatsapp/validate/phone:
    post:
      operationId: postMiscWhatsappValidatePhone
      tags:
        - Misc
      summary: Check a phone number
      description: Check whether a phone exists on WhatsApp.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MiscWhatsappValidatePhoneRequest"
            example:
              phone: "62812"
      responses:
        <<: *commonResponses
        200:
          description: Phone existence and resolved JID/LID.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MiscPhoneValidateResponse"
              examples:
                success:
                  summary: Phone validation
                  value:
                    status: true
                    code: 1000
                    message: "Phone validation complete"
                    results:
                      - data:
                          exists: true
                          e164: "+62812"
                          jid: "62812@s.whatsapp.net"
                          lid: null
                          country: "ID"
  /api/v1/misc/whatsapp/validate/jid:
    post:
      operationId: postMiscWhatsappValidateJid
      tags:
        - Misc
      summary: Validate a JID
      description: Validate JID or group id for the active session.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MiscWhatsappValidateJidRequest"
            example:
              jid: "62812@s.whatsapp.net"
      responses:
        <<: *commonResponses
        200:
          description: JID validity and type.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MiscJidValidateResponse"
              examples:
                success:
                  summary: JID validation
                  value:
                    status: true
                    code: 1000
                    message: "JID validation complete"
                    results:
                      - data:
                          exists: true
                          type: user
  /api/v1/misc/whatsapp/resolve/jid-or-lid:
    post:
      operationId: postMiscWhatsappResolveJidOrLid
      tags:
        - Misc
      summary: Resolve user identifiers
      description: Resolve LIDs or digits into WhatsApp JIDs.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MiscWhatsappResolveRequest"
            example:
              input: "lid:abcd"
      responses:
        <<: *commonResponses
        200:
          description: Resolution result with both LID and JID when available.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MiscResolveResponse"
              examples:
                success:
                  summary: Identifier resolved
                  value:
                    status: true
                    code: 1000
                    message: "Identifier resolved"
                    results:
                      - data:
                          isValid: true
                          type: jid
                          lid: null
                          jid: "62812@s.whatsapp.net"
                          country: "ID"
  /api/v1/misc/media/thumbnail:
    post:
      operationId: postMiscMediaThumbnail
      tags:
        - Misc
      summary: Create thumbnails
      description: Generate thumbnails for images or videos.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MiscMediaThumbnailRequest"
            example:
              file: "data:image/png;base64,..."
              type: image
      responses:
        <<: *commonResponses
        200:
          description: Thumbnail array with metadata.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MiscThumbnailResponse"
              examples:
                success:
                  summary: Thumbnail result
                  value:
                    status: true
                    code: 1000
                    message: "Thumbnails generated"
                    results:
                      - data:
                          - thumbnail: "data:image/jpeg;base64,/9j/4AAQSk..."
                            meta:
                              mimeType: image/jpeg
                              width: 64
                              height: 64
  /api/v1/misc/media/image:
    post:
      operationId: postMiscMediaImage
      tags:
        - Misc
      summary: Process an image
      description: Convert, resize, or compress images.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MiscMediaImageRequest"
            example:
              file: "data:image/png;base64,..."
      responses:
        <<: *commonResponses
        200:
          description: Processed image details.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MiscImageProcessResponse"
              examples:
                success:
                  summary: Image processed
                  value:
                    status: true
                    code: 1000
                    message: "Image processed"
                    results:
                      - data: "data:image/webp;base64,UklGRhIAAABXRUJQVlA4IC4AAA..."
                        details:
                          format: webp
                          width: 512
                          height: 512
                          size: 34567
                        actionsPerformed:
                          converted: true
                          resized: true
                          compressed: true
                        createdAt: "2024-05-01T08:30:00.000Z"
                        meta:
                          mimeType: image/webp
                          label: image
  /api/v1/misc/uuid/generate:
    post:
      operationId: postMiscUuidGenerate
      tags:
        - Misc
      summary: Generate identifiers
      description: Generate UUID, ULID, or deterministic namespace based IDs.
      requestBody:
        required: false
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MiscUuidGenerateRequest"
            example:
              count: 2
      responses:
        <<: *commonResponses
        200:
          description: Generated identifiers.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MiscUuidGenerateResponse"
              examples:
                success:
                  summary: UUIDs generated
                  value:
                    status: true
                    code: 1000
                    message: "Identifiers generated"
                    results:
                      - data:
                          - "f47ac10b-58cc-4372-a567-0e02b2c3d479"
                          - "c9bf9e57-1685-4c89-bafb-ff5af830be8a"
  /api/v1/misc/uuid/validate:
    post:
      operationId: postMiscUuidValidate
      tags:
        - Misc
      summary: Validate identifiers
      description: Validate UUID or ULID strings.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MiscUuidValidateRequest"
            example:
              value: "f47ac10b-58cc-4372-a567-0e02b2c3d479"
      responses:
        <<: *commonResponses
        200:
          description: Validation result.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MiscUuidValidateResponse"
              examples:
                success:
                  summary: UUID validation
                  value:
                    status: true
                    code: 1000
                    message: "Validation complete"
                    results:
                      - data:
                          isValid: true
                          type: uuid
                          version: v4
  /api/v1/misc/crypto/hash:
    post:
      operationId: postMiscCryptoHash
      tags:
        - Misc
      summary: Hash data
      description: Hash arbitrary payloads or strings.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MiscCryptoHashRequest"
            example:
              input: "text"
      responses:
        <<: *commonResponses
        200:
          description: Hash digest data.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MiscCryptoResponse"
              examples:
                success:
                  summary: Hash generated
                  value:
                    status: true
                    code: 1000
                    message: "Hash generated"
                    results:
                      - data: "ee26b0dd4af7e749aa1a8ee3c10ae992..."
  /api/v1/misc/crypto/hmac:
    post:
      operationId: postMiscCryptoHmac
      tags:
        - Misc
      summary: Generate an HMAC
      description: Produce HMAC digests.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MiscCryptoHmacRequest"
            example:
              key: secret
              input: "text"
      responses:
        <<: *commonResponses
        200:
          description: HMAC digest data.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MiscCryptoResponse"
              examples:
                success:
                  summary: HMAC generated
                  value:
                    status: true
                    code: 1000
                    message: "HMAC generated"
                    results:
                      - data: "de7c9b85b8b78aa6bc8a7a36f70a9070..."
  /api/v1/misc/base64:
    post:
      operationId: postMiscBase64
      tags:
        - Misc
      summary: Encode or decode base64
      description: Encode or decode base64 payloads.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MiscBase64Request"
            example:
              action: encode
              input: "Hello"
      responses:
        <<: *commonResponses
        200:
          description: Converted payload and optional metadata.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MiscConvertResponse"
              examples:
                encode:
                  summary: Base64 encode
                  value:
                    status: true
                    code: 1000
                    message: "Encoded to base64"
                    results:
                      - data: "SGVsbG8="
components:
  parameters:
    SessionIdQuery:
      in: query
      name: sessionId
      required: true
      description: "Unique session identifier. Accepts the aliases `id` or `session`."
      schema:
        type: string
    GroupIdQuery:
      in: query
      name: groupId
      required: true
      description: "Raw group ID or full JID such as 1203630...@g.us."
      schema:
        type: string
    MessageId:
      in: path
      name: messageId
      required: true
      schema:
        type: string
    ChatId:
      in: path
      name: chatId
      required: true
      schema:
        type: string
  responses:
    ValidationError:
      description: Missing or invalid parameters.
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ApiEnvelope"
          examples:
            Example response:
              value:
                status: false
                code: 2001
                message: Required parameter missing
                results: null
    SessionRequiredError:
      description: sessionId missing or invalid.
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ApiEnvelope"
          examples:
            Example response:
              value:
                status: false
                code: 1100
                message: sessionId is required
                results: null
    UnauthorizedError:
      description: Authentication failed.
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ApiEnvelope"
          examples:
            Example response:
              value:
                status: false
                code: 2200
                message: Missing or invalid credentials
                results: null
    SessionForbiddenError:
      description: Session belongs to another API key.
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ApiEnvelope"
          examples:
            Example response:
              value:
                status: false
                code: 2201
                message: Forbidden
                results: null
    ForbiddenError:
      description: Authorization failed.
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ApiEnvelope"
          examples:
            Example response:
              value:
                status: false
                code: 2201
                message: Insufficient permissions
                results: null
    NotFoundError:
      description: Resource not found.
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ApiEnvelope"
          examples:
            Example response:
              value:
                status: false
                code: 2600
                message: Not found
                results: null
    SessionNotFoundError:
      description: Session not found or already removed.
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ApiEnvelope"
          example:
            status: false
            code: 1101
            message: Session not found
            results: null
    RateLimitError:
      description: Rate limit exceeded.
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ApiEnvelope"
          examples:
            Example response:
              value:
                status: false
                code: 2400
                message: Too many requests
                results: null
    InternalServerError:
      description: Unexpected server error.
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ApiEnvelope"
          examples:
            Example response:
              value:
                status: false
                code: 8000
                message: Internal server error
                results: null
  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      in: header
      name: X-WAREST-API-KEY
      description: "Send your X-WAREST-API-KEY header; use an admin-scoped key for admin-only routes."
  schemas:
    ApiEnvelope:
      type: object
      properties:
        status:
          type: boolean
        code:
          type: integer
        message:
          type: string
        results:
          type: array
          nullable: true
          items:
            type: object
      required: [status, code, message]
    ApiSingleResultEnvelope:
      type: object
      properties:
        status:
          type: boolean
        code:
          type: integer
        message:
          type: string
        result:
          nullable: true
          type: object
          additionalProperties: true
      required: [status, code, message, result]
    SessionSelector:
      description: Provide the session handle by supplying `sessionId`. This identifier is returned by `/api/v1/session/create`.
      type: object
      required:
        - sessionId
      properties:
        sessionId:
          type: string
          description: Unique session identifier returned by `/api/v1/session/create`.
          example: "main"
    DestinationSelector:
      allOf:
        - $ref: "#/components/schemas/SessionSelector"
        - type: object
          required:
            - to
          properties:
            to:
              oneOf:
                - type: string
                  description: Digit string, LID, or JID. Comma separated lists are allowed.
                  example: "6281234567890"
                - type: array
                  items:
                    type: string
    SendOptions:
      type: object
      properties:
        presence:
          type: boolean
          description: "(optional) When `true`, the server automatically marks the sender available/online and emits typing or recording cues (depending on the route) before sending the payload."
          example: true
        replyMessageId:
          type: string
          description: "(optional) Message ID to quote."
        isForwarded:
          type: boolean
          example: false
          description: "(optional) Mark the outgoing message as forwarded."
    SendResult:
      type: object
      required:
        - phone
        - to
        - toJid
        - messageId
        - status
        - timestamp
      properties:
        phone:
          type: string
          description: Normalized sender phone (session owner).
        to:
          type: string
          description: Destination phone/JID (without domain).
        toJid:
          type: string
          description: Destination JID.
        messageId:
          type: string
        status:
          type: string
          description: Message subtype (text, image, audio, document, gif, interactive_button, etc.).
        timestamp:
          type: integer
          format: int64
        advancedInfo:
          type: object
          description: Route-specific metadata that always includes isForwarded/quotedMessageId plus type-specific fields.
          required:
            - isForwarded
            - quotedMessageId
          properties:
            isForwarded:
              type: boolean
              description: Whether the outgoing message is marked as forwarded.
            quotedMessageId:
              type: string
              nullable: true
          additionalProperties: true
    MessageSendResponse:
      allOf:
        - $ref: "#/components/schemas/ApiEnvelope"
        - type: object
          properties:
            results:
              type: array
              description: Array of per-recipient send results (empty when no recipient was processed).
              items:
                $ref: "#/components/schemas/SendResult"
      example:
        status: true
        code: 1000
        message: Text message sent
        results:
          - phone: "6281912311111"
            to: "628123456789"
            toJid: "628123456789@s.whatsapp.net"
            messageId: "3EB055069C144F12C0E64D"
            status: "text success"
            timestamp: 1763486858
            advancedInfo:
              isForwarded: false
              quotedMessageId: "ABCD1234EFGH5678"
    MessageActionResult:
      type: object
      properties:
        sessionId:
          type: string
          description: Session identifier that performed the action.
        phone:
          type: string
          description: Sender phone (session owner).
        to:
          type: string
          description: Destination phone/JID without domain.
        toJid:
          type: string
          description: Destination JID (when available).
        messageId:
          type: string
          description: Message ID affected by the action (if applicable).
        status:
          type: string
          description: Status label following the `<action> success` pattern (e.g., `message starred success`, `chat muted success`).
    MessageActionResponse:
      allOf:
        - $ref: "#/components/schemas/ApiEnvelope"
        - type: object
          properties:
            results:
              type: array
              items:
                $ref: "#/components/schemas/MessageActionResult"
      example:
        status: true
        code: 1000
        message: Message updated
        results:
          - sessionId: main
            phone: "628111111111"
            to: "62812xxxxxxx"
            toJid: "62812xxxxxxx@s.whatsapp.net"
            messageId: "3EB01234"
            status: "message edited success"
    ChatListResult:
      type: object
      properties:
        sessionId:
          type: string
        phone:
          type: string
        data:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
              jid:
                type: string
              name:
                type: string
              displayName:
                type: string
              isGroup:
                type: boolean
              unreadCount:
                type: integer
              lastMessage:
                type: string
                nullable: true
              lastMessageTimestamp:
                type: integer
              ephemeralExpiry:
                type: integer
              createdAt:
                type: integer
              updatedAt:
                type: integer
        pagination:
          type: object
          properties:
            limit:
              type: integer
            offset:
              type: integer
            total:
              type: integer
    ChatListResponse:
      allOf:
        - $ref: "#/components/schemas/ApiSingleResultEnvelope"
        - type: object
          properties:
            result:
              $ref: "#/components/schemas/ChatListResult"
      example:
        status: true
        code: 1000
        message: Chats list fetched
        result:
          sessionId: main
          phone: "6281234567890"
          data:
            - id: "6281122334455@whatsapp.net"
              jid: "6281122334455@whatsapp.net"
              displayName: Alex Marker
              name: Alex
              isGroup: false
              unreadCount: 2
              lastMessage: "Ping?"
              lastMessageTimestamp: 1714552100
              ephemeralExpiry: 0
              createdAt: 1711000000
              updatedAt: 1714552100
          pagination:
            limit: 10
            offset: 0
            total: 1
    ChatMessagesResult:
      type: object
      properties:
        sessionId:
          type: string
        phone:
          type: string
        data:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
              toJid:
                type: string
              senderJid:
                type: string
              fromMe:
                type: boolean
              messageType:
                type: string
              body:
                type: string
                nullable: true
              timestamp:
                type: integer
              isMedia:
                type: boolean
              mediaType:
                type: string
                nullable: true
              mediaMetadata:
                type: object
                nullable: true
                properties:
                  url:
                    type: string
                    nullable: true
                  mimeType:
                    type: string
                    nullable: true
                  fileName:
                    type: string
                    nullable: true
                  fileSize:
                    type: integer
                    nullable: true
              messageTypeDetails:
                type: object
                nullable: true
                additionalProperties: true
              quotedMessageId:
                type: string
                nullable: true
              mentionedJids:
                type: array
                items:
                  type: string
              reactions:
                type: array
                items:
                  type: object
                  properties:
                    from:
                      type: string
                    emoji:
                      type: string
                    timestamp:
                      type: integer
              isEdited:
                type: boolean
              isDeleted:
                type: boolean
              deletedAt:
                type: integer
                nullable: true
              poll:
                type: object
                nullable: true
              createdAt:
                type: integer
              updatedAt:
                type: integer
        pagination:
          type: object
          properties:
            limit:
              type: integer
            offset:
              type: integer
            total:
              type: integer
        chatInfo:
          type: object
          nullable: true
          properties:
            jid:
              type: string
            name:
              type: string
              nullable: true
            lastMessage:
              type: string
              nullable: true
            isGroup:
              type: boolean
            unreadCount:
              type: integer
            lastMessageTimestamp:
              type: integer
            ephemeralExpiry:
              type: integer
            createdAt:
              type: integer
            updatedAt:
              type: integer
    ChatMessagesResponse:
      allOf:
        - $ref: "#/components/schemas/ApiSingleResultEnvelope"
        - type: object
          properties:
            result:
              $ref: "#/components/schemas/ChatMessagesResult"
      example:
        status: true
        code: 1000
        message: Messages list fetched
        result:
          sessionId: main
          phone: "6281234567890"
          data:
            - id: AABBCCDDEE
              toJid: "6281122334455@whatsapp.net"
              senderJid: "6281234567890@whatsapp.net"
              fromMe: true
              messageType: extendedtextmessage
              body: "Ping?"
              timestamp: 1714552000
              isMedia: false
              mediaType: null
              mediaMetadata: null
              messageTypeDetails: {}
              quotedMessageId: null
              mentionedJids: []
              reactions: []
              isEdited: false
              isDeleted: false
              deletedAt: null
              poll: null
              createdAt: 1714552000
              updatedAt: 1714552000
          pagination:
            limit: 25
            offset: 0
            total: 1
          chatInfo:
            jid: "6281122334455@whatsapp.net"
            name: Alex Marker
            lastMessage: "Ping?"
            isGroup: false
            unreadCount: 1
            lastMessageTimestamp: 1714552000
            ephemeralExpiry: 0
            createdAt: 1711000000
            updatedAt: 1714552000

    ChatReadResult:
      type: object
      properties:
        sessionId:
          type: string
        phone:
          type: string
        chatId:
          type: string
        totalMarked:
          type: integer
        mode:
          type: string
        partial:
          type: object
          nullable: true
          properties:
            capped:
              type: boolean
            cap:
              type: integer
        parameters:
          type: object
          properties:
            messages:
              type: integer
            days:
              type: integer
        marked:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
              fromMe:
                type: boolean
              timestamp:
                type: integer
    ChatReadRequest:
      allOf:
        - $ref: "#/components/schemas/SessionSelector"
        - type: object
          properties:
            messages:
              type: integer
              description: "Number of inbound messages to acknowledge (0 = no limit)."
            days:
              type: integer
              description: "When `messages` = 0 this limits acknowledgements to the last N days."
    ChatReadResponse:
      allOf:
        - $ref: "#/components/schemas/ApiSingleResultEnvelope"
        - type: object
          properties:
            result:
              $ref: "#/components/schemas/ChatReadResult"
      example:
        status: true
        code: 1000
        message: "Marked inbound messages as read in the last 7 day(s)"
        result:
          sessionId: main
          phone: "6281234567890"
          chatId: "6281122334455@whatsapp.net"
          totalMarked: 1
          mode: by_days
          parameters:
            messages: 0
            days: 7
          marked:
            - id: AABBCC
              fromMe: false
              timestamp: 1714551000
    ChatPinResult:
      type: object
      properties:
        sessionId:
          type: string
        phone:
          type: string
        chatId:
          type: string
        pinned:
          type: boolean
        message:
          type: string
        updatedAt:
          type: integer
        messageId:
          type: string
          nullable: true
    ChatPinRequest:
      allOf:
        - $ref: "#/components/schemas/SessionSelector"
        - type: object
          required:
            - pin
          properties:
            pin:
              type: boolean
              description: true pins the item, false unpins it.
    ChatPinResponse:
      allOf:
        - $ref: "#/components/schemas/ApiSingleResultEnvelope"
        - type: object
          properties:
            result:
              $ref: "#/components/schemas/ChatPinResult"
      example:
        status: true
        code: 1000
        message: "<chat/message> pinned"
        result:
          sessionId: main
          phone: "6281234567890"
          chatId: "6281122334455@whatsapp.net"
          pinned: true
          message: "<chat/message> pinned successfully"
          updatedAt: 1714552200
    GroupSelector:
      allOf:
        - $ref: "#/components/schemas/SessionSelector"
        - type: object
          required:
            - groupId
          properties:
            groupId:
              type: string
              description: Raw id or value ending with @g.us.
    GroupPictureSetRequest:
      allOf:
        - $ref: "#/components/schemas/GroupSelector"
        - type: object
          required:
            - picture
          properties:
            picture:
              type: string
              description: URL, local path, or base64 payload.
    GroupNameUpdateRequest:
      allOf:
        - $ref: "#/components/schemas/GroupSelector"
        - type: object
          required:
            - groupName
          properties:
            groupName:
              type: string
    GroupDescriptionUpdateRequest:
      allOf:
        - $ref: "#/components/schemas/GroupSelector"
        - type: object
          required:
            - groupDescription
          properties:
            groupDescription:
              type: string
    GroupLockedRequest:
      allOf:
        - $ref: "#/components/schemas/GroupSelector"
        - type: object
          required:
            - locked
          properties:
            locked:
              type: boolean
              description: true restricts edits to admins.
    GroupAnnouncementRequest:
      allOf:
        - $ref: "#/components/schemas/GroupSelector"
        - type: object
          required:
            - announcement
          properties:
            announcement:
              type: boolean
              description: true restricts messages to admins.
    GroupJoinViaLinkRequest:
      allOf:
        - $ref: "#/components/schemas/SessionSelector"
        - type: object
          required:
            - inviteLink
          properties:
            inviteLink:
              type: string
              description: Full invite URL or code.
    GroupCreateRequest:
      allOf:
        - $ref: "#/components/schemas/SessionSelector"
        - type: object
          required:
            - groupName
          properties:
            groupName:
              type: string
            participants:
              type: array
              items:
                type: string
    GroupInfo:
      type: object
      properties:
        id:
          type: string
        addressingMode:
          type: string
        subject:
          type: string
        subjectOwner:
          type: string
        subjectOwnerJid:
          type: string
        subjectTime:
          type: integer
        creation:
          type: integer
        owner:
          type: string
        ownerJid:
          type: string
        owner_country_code:
          type: string
        desc:
          type: string
        descId:
          type: string
        descOwner:
          type: string
        descOwnerJid:
          type: string
        descTime:
          type: integer
        restrict:
          type: boolean
        announce:
          type: boolean
        isCommunity:
          type: boolean
        isCommunityAnnounce:
          type: boolean
        joinApprovalMode:
          type: boolean
        memberAddMode:
          type: boolean
        participantsCount:
          type: integer

    GroupListResponse:
      allOf:
        - $ref: "#/components/schemas/ApiEnvelope"
        - type: object
          properties:
            results:
              type: array
              items:
                type: object
                properties:
                  sessionId:
                    type: string
                  phone:
                    type: string
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/GroupInfo"
      example:
        status: true
        code: 1000
        message: Groups listed
        results:
          - sessionId: main
            phone: "6281234567890"
            data:
              - id: "120363111111111111@g.us"
                addressingMode: "subject"
                subject: "Core Team"
                subjectOwner: "628199999999"
                subjectOwnerJid: "628199999999@whatsapp.net"
                subjectTime: 1714000000
                creation: 1710000000
                owner: "628199999999"
                ownerJid: "628199999999@whatsapp.net"
                owner_country_code: "ID"
                desc: "Daily standup"
                descId: "120363111111111111@g.us"
                descOwner: "628199999999"
                descOwnerJid: "628199999999@whatsapp.net"
                descTime: 1712000000
                restrict: false
                announce: false
                isCommunity: false
                isCommunityAnnounce: false
                joinApprovalMode: false
                memberAddMode: false
                participantsCount: 8

    GroupPictureResponse:
      allOf:
        - $ref: "#/components/schemas/ApiEnvelope"
        - type: object
          properties:
            results:
              type: array
              items:
                type: object
                properties:
                  sessionId:
                    type: string
                  phone:
                    type: string
                  groupId:
                    type: string
                  pictureUrl:
                    type: string
                    nullable: true
      example:
        status: true
        code: 1000
        message: Group picture
        results:
          - sessionId: main
            phone: "6281234567890"
            groupId: "120363111111111111@g.us"
            pictureUrl: "https://pps.whatsapp.net/v/t61.24694-24/..."
    GroupMutationResponse:
      allOf:
        - $ref: "#/components/schemas/ApiEnvelope"
        - type: object
          properties:
            results:
              type: array
              items:
                type: object
                properties:
                  sessionId:
                    type: string
                  phone:
                    type: string
                  groupId:
                    type: string
                  pictureUrl:
                    type: string
                  status:
                    type: string
      example:
        status: true
        code: 1000
        message: Group picture updated
        results:
          - sessionId: main
            phone: "6281234567890"
            groupId: "120363111111111111@g.us"
            pictureUrl: "https://pps.whatsapp.net/v/t61.24694-24/..."
            status: success update group picture

    GroupDefaultResponse:
      allOf:
        - $ref: "#/components/schemas/ApiEnvelope"
        - type: object
          properties:
            results:
              type: array
              items:
                type: object
                properties:
                  sessionId:
                    type: string
                  phone:
                    type: string
                  groupId:
                    type: string
                  status:
                    type: string
      example:
        status: true
        code: 1000
        message: Group <action>
        results:
          - sessionId: main
            phone: "6281234567890"
            groupId: "120363111111111111@g.us"
            status: success <action>

    GroupNameUpdateResponse:
      allOf:
        - $ref: "#/components/schemas/ApiEnvelope"
        - type: object
          properties:
            results:
              type: array
              items:
                type: object
                properties:
                  sessionId:
                    type: string
                  phone:
                    type: string
                  groupId:
                    type: string
                  groupName:
                    type: string
                  status:
                    type: string
      example:
        status: true
        code: 1000
        message: Group name updated
        results:
          - sessionId: main
            phone: "6281234567890"
            groupId: "120363111111111111@g.us"
            groupName: "Core Team"
            status: success update group name
    GroupDescriptionUpdateResponse:
      allOf:
        - $ref: "#/components/schemas/ApiEnvelope"
        - type: object
          properties:
            results:
              type: array
              items:
                type: object
                properties:
                  sessionId:
                    type: string
                  phone:
                    type: string
                  groupId:
                    type: string
                  groupDescription:
                    type: string
                  status:
                    type: string
      example:
        status: true
        code: 1000
        message: Group description updated
        results:
          - sessionId: main
            phone: "6281234567890"
            groupId: "120363111111111111@g.us"
            groupDescription: "Daily standup"
            status: success update group description

    GroupInviteResponse:
      allOf:
        - $ref: "#/components/schemas/ApiEnvelope"
        - type: object
          properties:
            results:
              type: array
              items:
                type: object
                properties:
                  sessionId:
                    type: string
                  phone:
                    type: string
                  groupId:
                    type: string
                  inviteLink:
                    type: string
                    nullable: true
                  status:
                    type: string
                    nullable: true

    GroupInvitePreview:
      allOf:
        - $ref: "#/components/schemas/ApiEnvelope"
        - type: object
          properties:
            results:
              type: array
              items:
                type: object
                properties:
                  sessionId:
                    type: string
                  phone:
                    type: string
                  groupId:
                    type: string
                  groupName:
                    type: string
                  groupDescription:
                    type: string
                    nullable: true
                  participantsCount:
                    type: integer
                  isGroupLocked:
                    type: boolean
                  isAnnouncement:
                    type: boolean
                  isEphemeral:
                    type: boolean
                  inviteLink:
                    type: string
                  groupPicture:
                    type: string
                    nullable: true
      example:
        status: true
        code: 1000
        message: Invite preview
        results:
          - sessionId: main
            phone: "6281234567890"
            groupId: "120363111111111111@g.us"
            groupName: Core Team
            groupDescription: Daily standup
            participantsCount: 8
            isGroupLocked: false
            isAnnouncement: false
            isEphemeral: false
            inviteLink: "https://chat.whatsapp.com/abcdef"
            groupPicture: "https://cdn.example.com/group.png"
    GroupParticipantsResponse:
      allOf:
        - $ref: "#/components/schemas/ApiEnvelope"
        - type: object
          properties:
            results:
              type: array
              items:
                type: object
                properties:
                  sessionId:
                    type: string
                  phone:
                    type: string
                  groupId:
                    type: string
                  participants:
                    type: array
                    items:
                      type: object
                      properties:
                        jid:
                          type: string
                        isMe:
                          type: boolean
                        isAdmin:
                          type: boolean
                        isSuperAdmin:
                          type: boolean
                        name:
                          type: string
                          nullable: true
      example:
        status: true
        code: 1000
        message: Participants fetched
        results:
          - sessionId: main
            phone: "6281234567890"
            groupId: "120363111111111111@g.us"
            participants:
              - id: "2229876543210@lid"
                jid: "628199999999@whatsapp.net"
                lid: "2229876543210@lid"
                isMe: false
                isAdmin: true
                isSuperAdmin: true
              - id: "2229876543211@lid"
                jid: "628188888888@whatsapp.net"
                lid: "2229876543211@lid"
                isMe: false
                isAdmin: false
                isSuperAdmin: false
              - id: "2221234567890@lid"
                jid: "6281234567890@whatsapp.net"
                lid: "2221234567890@lid"
                isMe: true
                isAdmin: false
                isSuperAdmin: false
    GroupParticipantsUpdate:
      allOf:
        - $ref: "#/components/schemas/GroupSelector"
        - type: object
          required:
            - participants
          properties:
            participants:
              type: array
              minItems: 1
              items:
                type: string
    GroupParticipantsPromoteDemoteResponse:
      allOf:
        - $ref: "#/components/schemas/ApiEnvelope"
        - type: object
          properties:
            results:
              type: array
              items:
                type: object
                properties:
                  sessionId:
                    type: string
                  phone:
                    type: string
                  groupId:
                    type: string
                  participants:
                    type: array
                    items:
                      type: object
                      properties:
                        phone:
                          type: string
                        status:
                          type: string
                  status:
                    type: string
      example:
        status: true
        code: 1000
        message: "Participants <action>"
        results:
          - sessionId: main
            phone: "6281234567890"
            groupId: "120363111111111111@g.us"
            participants:
              - phone: "628199999999"
                status: "<action>"
            status: success
    GroupParticipantsMutationResponse:
      allOf:
        - $ref: "#/components/schemas/ApiEnvelope"
        - type: object
          properties:
            results:
              type: array
              items:
                type: object
                properties:
                  sessionId:
                    type: string
                  phone:
                    type: string
                  groupId:
                    type: string
                  status:
                    type: string
                  participants:
                    type: array
                    items:
                      type: object
                      properties:
                        phone:
                          type: string
                        jid:
                          type: string
                          nullable: true
                        status:
                          type: string
                  failedToAdd:
                    type: array
                    items:
                      type: string
                    nullable: true
                  failedToRemove:
                    type: array
                    items:
                      type: string
                    nullable: true
                  approvedParticipants:
                    type: array
                    items:
                      type: string
                    nullable: true
      example:
        status: true
        code: 1000
        message: Participants updated
        results:
          - sessionId: main
            phone: "6281234567890"
            groupId: "120363111111111111@g.us"
            status: accepted
    GroupJoinRequestsResponse:
      allOf:
        - $ref: "#/components/schemas/ApiEnvelope"
        - type: object
          properties:
            results:
              type: array
              items:
                type: object
                properties:
                  sessionId:
                    type: string
                  phone:
                    type: string
                  groupId:
                    type: string
                  joinRequests:
                    type: array
                    items:
                      type: object
                      properties:
                        jid:
                          type: string
                        lid:
                          type: string
                          nullable: true
                        phone:
                          type: string
                        requestMethod:
                          type: string
                        requestTime:
                          type: integer
      example:
        status: true
        code: 1000
        message: Pending join requests
        results:
          - sessionId: main
            phone: "6281234567890"
            groupId: "120363111111111111@g.us"
            joinRequests:
              - jid: "628177777777@whatsapp.net"
                lid: null
                phone: "628177777777"
                requestMethod: invite_link
                requestTime: 1714551000
    GroupDeleteResponse:
      allOf:
        - $ref: "#/components/schemas/ApiEnvelope"
        - type: object
          properties:
            results:
              type: array
              items:
                type: object
                properties:
                  sessionId:
                    type: string
                  phone:
                    type: string
                  groupId:
                    type: string
                  removedParticipants:
                    type: array
                    items:
                      type: string
                  failedToRemove:
                    type: array
                    items:
                      type: string
                  status:
                    type: string
      example:
        status: true
        code: 1000
        message: Group disbanded
        results:
          - sessionId: main
            phone: "6281234567890"
            groupId: "120363111111111111@g.us"
            removedParticipants:
              - "628188888888@whatsapp.net"
            failedToRemove: []
            status: success delete group
    GroupInfoResponse:
      allOf:
        - $ref: "#/components/schemas/ApiEnvelope"
        - type: object
          properties:
            results:
              type: array
              items:
                type: object
                properties:
                  sessionId:
                    type: string
                  phone:
                    type: string
                  data:
                    $ref: "#/components/schemas/GroupInfo"
      example:
        status: true
        code: 1000
        message: Group info retrieved
        results:
          - sessionId: main
            phone: "6281234567890"
            data:
              id: "120363111111111111@g.us"
              addressingMode: "lid"
              subject: "Core Team"
              subjectOwner: "628199999999"
              subjectOwnerJid: "628199999999@whatsapp.net"
              subjectTime: 1714000000
              creation: 1710000000
              owner: "628199999999"
              ownerJid: "628199999999@whatsapp.net"
              owner_country_code: "ID"
              desc: "Daily standup"
              descId: "3EB01234.."
              descOwner: "628199999999"
              descOwnerJid: "628199999999@whatsapp.net"
              descTime: 1712000000
              restrict: false
              announce: false
              isCommunity: false
              isCommunityAnnounce: false
              joinApprovalMode: false
              memberAddMode: false
              participantsCount: 8
    ProfileInfoResponse:
      allOf:
        - $ref: "#/components/schemas/ApiEnvelope"
        - type: object
          properties:
            results:
              type: array
              items:
                type: object
                properties:
                  phone:
                    type: string
                  verifiendName:
                    type: string
                    nullable: true
                  pushName:
                    type: string
                    nullable: true
                  about:
                    type: string
                    nullable: true
                  pictureId:
                    type: string
                    nullable: true
                  businessProfile:
                    type: object
                    nullable: true
                    properties:
                      jid:
                        type: string
                      email:
                        type: string
                        nullable: true
                      address:
                        type: string
                        nullable: true
                      categories:
                        type: array
                        items:
                          type: string
                      businessHoursTimezone:
                        type: string
                        nullable: true
                      businessHours:
                        type: array
                        items:
                          type: object
                          properties:
                            day_of_week:
                              type: string
                            mode:
                              type: string
                            open_time:
                              type: string
                            close_time:
                              type: string
                      description:
                        type: string
                        nullable: true
                      website:
                        type: array
                        items:
                          type: string
                      wid:
                        type: string
                  entries:
                    type: object
                    nullable: true
                    properties:
                      User:
                        type: string
                      Agent:
                        type: number
                      Device:
                        type: string
                      Server:
                        type: string
                  profilePicture:
                    type: object
                    nullable: true
                    properties:
                      url:
                        type: string
                      id:
                        type: string
                      type:
                        type: string
                      imgFull:
                        type: string
                      imgPreview:
                        type: string
      example:
        status: true
        code: 1000
        message: Profile info
        results:
          - phone: "6281234567890"
            verifiendName: "Alex Marker"
            pushName: "Alex"
            about: "Living life to the fullest"
            pictureId: D1E2F3
            businessProfile: null
            entries:
              User: "WhatsApp User"
              Agent: 2
              Device: "iPhone"
              Server: "WhatsApp Server"
            profilePicture:
              url: "https://pps.whatsapp.net/v/t61.24694-24/..."
              id: D1E2F3
              type: image
              imgFull: "https://pps.whatsapp.net/v/t61.24694-24/..."
              imgPreview: "https://pps.whatsapp.net/v/t61.24694-24/..."
    ProfilePictureSetRequest:
      allOf:
        - $ref: "#/components/schemas/SessionSelector"
        - type: object
          required:
            - picture
          properties:
            picture:
              type: string
              description: URL, local file path, or base64 data URL.
    ProfilePictureResponse:
      allOf:
        - $ref: "#/components/schemas/ApiEnvelope"
        - type: object
          properties:
            results:
              type: array
              items:
                type: object
                properties:
                  phone:
                    type: string
                  url:
                    type: string
                  id:
                    type: string
                  type:
                    type: string
                  imgFull:
                    type: string
                    nullable: true
                  imgPreview:
                    type: string
                    nullable: true
      example:
        status: true
        code: 1000
        message: Profile picture resolved
        results:
          - phone: "6281234567890"
            url: "https://cdn.example.com/profile.jpg"
            id: D1E2F3
            type: image
            imgFull: "https://cdn.example.com/profile.jpg"
            imgPreview: "https://cdn.example.com/profile-thumb.jpg"
    ProfilePrivacyResponse:
      allOf:
        - $ref: "#/components/schemas/ApiEnvelope"
        - type: object
          properties:
            results:
              type: array
              items:
                type: object
                properties:
                  phone:
                    type: string
                  readReceipts:
                    type: string
                  profilePhoto:
                    type: string
                  status:
                    type: string
                  online:
                    type: string
                  lastSeen:
                    type: string
                  groupAdd:
                    type: string
                  callAdd:
                    type: string
                  stickers:
                    type: string
                  messages:
                    type: string
      example:
        status: true
        code: 1000
        message: Privacy preferences
        results:
          - phone: "6281234567890"
            readReceipts: all
            profilePhoto: contacts
            status: contacts
            online: all
            lastSeen: contacts
            groupAdd: all
            callAdd: all
            stickers: contacts
            messages: all
    ProfileContactsResponse:
      allOf:
        - $ref: "#/components/schemas/ApiEnvelope"
        - type: object
          properties:
            results:
              type: array
              items:
                type: object
                properties:
                  phone:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        jid:
                          type: string
                        phone:
                          type: string
                        name:
                          type: string
                          nullable: true
                        verifiedName:
                          type: string
                          nullable: true
                        picture:
                          type: object
                          nullable: true
                          properties:
                            full:
                              type: string
                              nullable: true
                            preview:
                              type: string
                              nullable: true
                        about:
                          type: string
                          nullable: true
                        businessProfile:
                          type: object
                          nullable: true
                          additionalProperties: true
      example:
        status: true
        code: 1000
        message: Contacts retrieved
        results:
          - phone: "6281234567890"
            data:
              - jid: "628199999999@whatsapp.net"
                phone: "628199999999"
                name: Alex
    ProfileWhoisEntry:
      type: object
      properties:
        jid:
          type: string
        phone:
          type: string
        isOnWhatsApp:
          type: boolean
        picture:
          type: object
          nullable: true
          properties:
            full:
              type: string
              nullable: true
            preview:
              type: string
              nullable: true
        about:
          type: string
          nullable: true
        businessProfile:
          type: object
          nullable: true
          additionalProperties: true
    ProfileWhoisResponse:
      allOf:
        - $ref: "#/components/schemas/ApiEnvelope"
        - type: object
          properties:
            results:
              type: array
              items:
                type: object
                properties:
                  data:
                    oneOf:
                      - $ref: "#/components/schemas/ProfileWhoisEntry"
                      - type: array
                        items:
                          $ref: "#/components/schemas/ProfileWhoisEntry"
      example:
        status: true
        code: 1000
        message: WhatsApp registration lookup
        results:
          - data:
              - jid: "628199999999@whatsapp.net"
                phone: "628199999999"
                isOnWhatsApp: true
    BusinessProfileEntry:
      type: object
      properties:
        jid:
          type: string
        phone:
          type: string
          nullable: true
        email:
          type: string
          nullable: true
        address:
          type: string
          nullable: true
        categories:
          type: array
          items:
            type: string
        businessHoursTimezone:
          type: string
          nullable: true
        businessHours:
          type: array
          items:
            type: object
            properties:
              day_of_week:
                type: string
                nullable: true
              mode:
                type: string
                nullable: true
              open_time:
                type: string
                nullable: true
              close_time:
                type: string
                nullable: true
        description:
          type: string
          nullable: true
        websites:
          type: array
          items:
            type: string
        wid:
          type: string
          nullable: true
    ProfileBusinessResponse:
      allOf:
        - $ref: "#/components/schemas/ApiEnvelope"
        - type: object
          properties:
            results:
              type: array
              items:
                type: object
                properties:
                  data:
                    oneOf:
                      - $ref: "#/components/schemas/BusinessProfileEntry"
                      - type: array
                        items:
                          $ref: "#/components/schemas/BusinessProfileEntry"
      example:
        status: true
        code: 1000
        message: Business profile info
        results:
          - data:
              jid: "62812@s.whatsapp.net"
              phone: "62812"
              email: "hi@example.com"
              address: "Jl. Kebon Jeruk No. 1"
              categories: ["Retail", "Store"]
              businessHoursTimezone: "Asia/Jakarta"
              businessHours:
                - day_of_week: monday
                  mode: open
                  open_time: "08:00"
                  close_time: "17:00"
              description: "Retail shop"
              websites: ["https://store.example.com"]
              wid: "62812"
    MiscConvertStringRequest:
      type: object
      required:
        - string
      properties:
        string:
          type: string
          description: Source string or data URI to encode.
        encoding:
          type: string
          default: utf8
    MiscWhatsappFileDecryptRequest:
      type: object
      required:
        - mediaKey
        - file
      properties:
        mediaKey:
          type: string
          description: Base64 encoded media key.
        file:
          type: string
          description: Base64 payload, HTTPS URL, or local path to the encrypted media.
        mimeType:
          type: string
        fileSha256:
          type: string
          description: Base64 encoded checksum for verification.
        output:
          type: string
          enum: [base64, url, file]
          default: base64
    MiscWhatsappPollUpdateVoteRequest:
      type: object
      required:
        - sessionId
        - pollUpdateVote
      properties:
        sessionId:
          type: string
          description: Session ID used to locate the poll message secret.
        pollEncKey:
          type: string
          description: Optional base64 poll secret override.
        pollMsgId:
          type: string
          description: Poll message ID fallback if not included in pollUpdateVote.
        pollCreatorJid:
          type: string
          description: Override for the poll creator jid.
        voterJid:
          type: string
          description: Override for the voter jid.
        pollUpdateVote:
          type: object
          description: Raw poll vote node collected from webhook payloads.
    MiscWhatsappValidatePhoneRequest:
      type: object
      required:
        - phone
      properties:
        sessionId:
          type: string
        phone:
          type: string
        country:
          type: string
          description: ISO country override.
    MiscWhatsappValidateJidRequest:
      type: object
      required:
        - jid
      properties:
        sessionId:
          type: string
        jid:
          type: string
    MiscWhatsappResolveRequest:
      type: object
      required:
        - input
      properties:
        sessionId:
          type: string
        input:
          type: string
          description: JID, LID, or bare digits.
    MiscMediaThumbnailRequest:
      type: object
      required:
        - file
        - type
      properties:
        file:
          type: string
        type:
          type: string
          enum: [image, video]
        width:
          type: integer
          default: 320
        height:
          type: integer
          default: 320
        count:
          type: integer
          description: Number of stills when `type = video`.
        output:
          type: string
          enum: [base64, url, file]
          default: base64
    MiscMediaImageRequest:
      type: object
      required:
        - file
      properties:
        file:
          type: string
        actions:
          type: object
          properties:
            convert:
              type: string
              enum: [png, jpg, jpeg, webp, tiff, avif]
            resize:
              type: object
              properties:
                width:
                  type: integer
                height:
                  type: integer
                fit:
                  type: string
            compress:
              type: object
              properties:
                quality:
                  type: integer
        output:
          type: string
          enum: [base64, url, file]
          default: base64
    MiscUuidGenerateRequest:
      type: object
      properties:
        type:
          type: string
          enum: [uuid, ulid]
          default: uuid
        version:
          type: string
          enum: [v1, v3, v4, v5, nil]
          default: v4
        namespace:
          type: string
        name:
          type: string
        format:
          type: string
          description: Optional output mask such as xxxx-xxxx.
        count:
          type: integer
          minimum: 1
          maximum: 1000
          default: 1
    MiscUuidValidateRequest:
      type: object
      required:
        - value
      properties:
        type:
          type: string
          enum: [uuid, ulid]
        value:
          type: string
    MiscCryptoHashRequest:
      type: object
      required:
        - input
      properties:
        algo:
          type: string
          default: sha256
        input:
          type: string
        output:
          type: string
          enum: [hex, base64]
          default: hex
    MiscCryptoHmacRequest:
      type: object
      required:
        - key
        - input
      properties:
        algo:
          type: string
          default: sha256
        key:
          type: string
        input:
          type: string
        output:
          type: string
          enum: [hex, base64]
          default: hex
    MiscBase64Request:
      type: object
      required:
        - action
        - input
      properties:
        action:
          type: string
          enum: [encode, decode]
          default: encode
        input:
          type: string
        output:
          type: string
          enum: [string, base64, url, file]
          default: string
    MiscConvertResponse:
      allOf:
        - $ref: "#/components/schemas/ApiEnvelope"
        - type: object
          properties:
            results:
              type: array
              items:
                type: object
                properties:
                  data:
                    type: string
                  meta:
                    type: object
                    nullable: true
      example:
        status: true
        code: 1000
        message: Conversion complete
        results:
          - data: "https://cdn.warest.app/misc/2024-05-02/qr-string-sample.png"
            meta:
              mode: url
              mimeType: image/png
              key: "misc/2024-05-02/qr-string-sample.png"
              url: "https://cdn.warest.app/misc/2024-05-02/qr-string-sample.png"
              temporary: true
              expiresAt: "2024-05-02T07:05:00.000Z"
    MiscBinaryResponse:
      allOf:
        - $ref: "#/components/schemas/ApiEnvelope"
        - type: object
          properties:
            results:
              type: array
              items:
                type: object
                properties:
                  data:
                    type: string
                  meta:
                    type: object
                    nullable: true
      example:
        status: true
        code: 1000
        message: Binary processed
        results:
          - data: "data:application/pdf;base64,JVBERi0xLjMK"
            meta:
              filename: invoice.pdf
              size: 102400
    MiscPollDecryptResponse:
      allOf:
        - $ref: "#/components/schemas/ApiEnvelope"
        - type: object
          properties:
            results:
              type: array
              items:
                type: object
                properties:
                  messageKey:
                    type: object
                  pollCreatorJid:
                    type: string
                    nullable: true
                  voterJid:
                    type: string
                    nullable: true
                  votedOptionIndexes:
                    type: array
                    items:
                      type: integer
                  votedOptionNames:
                    type: array
                    items:
                      type: string
                  pollTitle:
                    type: string
                    nullable: true
                  selectableOptionsCount:
                    type: integer
                    nullable: true
                  pollOptions:
                    type: array
                    items:
                      type: object
                      properties:
                        index:
                          type: integer
                        name:
                          type: string
                  timestampMs:
                    type: number
                    format: double
                    nullable: true
      example:
        status: true
        code: 1000
        message: Poll decrypted
        results:
          - messageKey:
              id: "3EB0C2C010FFEE0"
              remoteJid: "120363111111111111@g.us"
            pollCreatorJid: "6281122334455@s.whatsapp.net"
            voterJid: "6281133344455@s.whatsapp.net"
            votedOptionIndexes: [1]
            votedOptionNames: ["Green"]
            pollTitle: "What color should we pick?"
            selectableOptionsCount: 1
            pollOptions:
              - index: 0
                name: Red
              - index: 1
                name: Green
              - index: 2
                name: Blue
            timestampMs: 1714552200123
    MiscPhoneValidateResponse:
      allOf:
        - $ref: "#/components/schemas/ApiEnvelope"
        - type: object
          properties:
            results:
              type: array
              items:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      exists:
                        type: boolean
                      e164:
                        type: string
                      jid:
                        type: string
                      lid:
                        type: string
                        nullable: true
                      country:
                        type: string
    MiscJidValidateResponse:
      allOf:
        - $ref: "#/components/schemas/ApiEnvelope"
        - type: object
          properties:
            results:
              type: array
              items:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      exists:
                        type: boolean
                      type:
                        type: string
      example:
        status: true
        code: 1000
        message: JID validated
        results:
          - data:
              exists: true
              type: individual
    MiscResolveResponse:
      allOf:
        - $ref: "#/components/schemas/ApiEnvelope"
        - type: object
          properties:
            results:
              type: array
              items:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      isValid:
                        type: boolean
                      type:
                        type: string
                      lid:
                        type: string
                        nullable: true
                      jid:
                        type: string
                        nullable: true
                      country:
                        type: string
                        nullable: true
      example:
        status: true
        code: 1000
        message: Identifier resolved
        results:
          - data:
              isValid: true
              type: phone
              lid: null
              jid: "628199999999@whatsapp.net"
              country: ID
    MiscThumbnailResponse:
      allOf:
        - $ref: "#/components/schemas/ApiEnvelope"
        - type: object
          properties:
            results:
              type: array
              items:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        thumbnail:
                          type: string
                        meta:
                          type: object
                          properties:
                            mimetype:
                              type: string
                            width:
                              type: integer
                            height:
                              type: integer
      example:
        status: true
        code: 1000
        message: Thumbnails generated
        results:
          - data:
              - thumbnail: "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQ"
                meta:
                  mimetype: image/jpeg
                  width: 96
                  height: 96
    MiscImageProcessResponse:
      allOf:
        - $ref: "#/components/schemas/ApiEnvelope"
        - type: object
          properties:
            results:
              type: array
              items:
                type: object
                properties:
                  data:
                    type: string
                  details:
                    type: object
                    properties:
                      format:
                        type: string
                      width:
                        type: integer
                      height:
                        type: integer
                      size:
                        type: integer
                  actionsPerformed:
                    type: array
                    items:
                      type: string
                  createdAt:
                    type: string
      example:
        status: true
        code: 1000
        message: Image processed
        results:
          - data: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA"
            details:
              format: png
              width: 512
              height: 512
              size: 345678
            actionsPerformed: [resize, optimize]
            createdAt: "2024-05-01T08:30:00.000Z"
    MiscUuidGenerateResponse:
      allOf:
        - $ref: "#/components/schemas/ApiEnvelope"
        - type: object
          properties:
            results:
              type: array
              items:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: string
      example:
        status: true
        code: 1000
        message: UUIDs generated
        results:
          - data:
              - f19a3f18-3c4e-4d4d-9a62-6c34f657b7b9
              - a29e1a4d-e73f-4522-903d-10b4f76e52f4
    MiscUuidValidateResponse:
      allOf:
        - $ref: "#/components/schemas/ApiEnvelope"
        - type: object
          properties:
            results:
              type: array
              items:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      isValid:
                        type: boolean
                      type:
                        type: string
                      version:
                        type: string
      example:
        status: true
        code: 1000
        message: UUID inspected
        results:
          - data:
              isValid: true
              type: string
              version: v4
    MiscCryptoResponse:
      allOf:
        - $ref: "#/components/schemas/ApiEnvelope"
        - type: object
          properties:
            results:
              type: array
              items:
                type: object
                properties:
                  data:
                    type: string
      example:
        status: true
        code: 1000
        message: Crypto operation complete
        results:
          - data: 1fd5cb12aab902f4c5a0d9f9aa901234
    ServerPing:
      type: object
      properties:
        ping:
          type: string
        latencyMs:
          type: number
        serverTime:
          type: string
        timestamp:
          type: integer
    ServerInfo:
      type: object
      properties:
        serverName:
          type: string
        serverVersion:
          type: string
        environment:
          type: string
        uptimeSeconds:
          type: integer
        system:
          type: object
        cpu:
          type: object
        memory:
          type: object
        process:
          type: object
        disk:
          type: array
          items:
            type: object
        loadAverage:
          type: array
          items:
            type: number
        runtime:
          type: array
          items:
            type: object
        sessions:
          type: object
        timestamp:
          type: integer
    ServerHealth:
      type: object
      properties:
        status:
          type: string
          enum: [healthy, degraded, unhealthy]
        services:
          type: object
        uptimeSeconds:
          type: integer
        timestamp:
          type: integer
    ServerCpuHistory:
      type: object
      properties:
        period:
          type: string
        interval:
          type: string
        data:
          type: array
          items:
            type: object
            properties:
              timestamp:
                type: integer
              usagePercent:
                type: number
        averageUsagePercent:
          type: number
        maxUsagePercent:
          type: number
        timestamp:
          type: integer
    ServerReady:
      type: object
      properties:
        ready:
          type: boolean
        dependencies:
          type: object
        timestamp:
          type: integer
    ServerRestart:
      type: object
      properties:
        restartInitiated:
          type: boolean
        scheduledAt:
          type: string
        restartStrategy:
          type: string
        timestamp:
          type: integer
    ServerRestartSchedule:
      type: object
      nullable: true
      properties:
        scheduledRestart:
          type: string
        timezone:
          type: string
        nextRestartAt:
          type: string
        timestamp:
          type: integer
    ServerRestartRequest:
      type: object
      properties:
        delaySeconds:
          type: number
          minimum: 0
          description: Grace period before restart in seconds.
        reason:
          type: string
          description: Audit reason for triggering the restart.
    ServerRestartScheduleRequest:
      type: object
      required:
        - schedule
      properties:
        schedule:
          type: string
          description: HH:MM 24-hour notation or "0" to clear.
        timezone:
          type: string
          description: IANA timezone, defaults to config.timezone.
    SessionCreateResult:
      type: object
      properties:
        registryUser:
          type: string
        sessionId:
          type: string
        qrString:
          type: string
          nullable: true
        qr:
          type: string
          nullable: true
        qrDuration:
          type: integer
          nullable: true
        webhookUrl:
          type: string
          nullable: true
        webhookSecret:
          type: string
          nullable: true
    SessionPairCodeResult:
      type: object
      properties:
        registryUser:
          type: string
        sessionId:
          type: string
        pairCode:
          type: string
          nullable: true
    SessionConfigResult:
      type: object
      properties:
        registryUser:
          type: string
        sessionId:
          type: string
        webhookUrl:
          type: string
          nullable: true
        webhookSecret:
          type: string
          nullable: true
    SessionDevicesResult:
      type: object
      properties:
        name:
          type: string
        phone:
          type: string
        device:
          type: object
    SessionListResult:
      type: object
      properties:
        items:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
              status:
                type: string
              me:
                type: object
                nullable: true
              pushName:
                type: string
                nullable: true
              lastConn:
                type: string
                nullable: true
    SessionDeleteResult:
      type: object
      properties:
        sessionId:
          type: string
        steps:
          type: object
          properties:
            runtime:
              type: boolean
            creds:
              type: boolean
            meta:
              type: boolean
